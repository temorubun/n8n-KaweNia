{
  "updatedAt": "2025-12-28T08:10:44.525Z",
  "createdAt": "2025-12-28T08:09:44.873Z",
  "id": "Z47ZyULxxBvqmbqI",
  "name": "Generate Web User",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "content": "",
        "height": 656,
        "width": 2960
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -288,
        -144
      ],
      "typeVersion": 1,
      "id": "81ec2a07-38f9-4f29-af96-987c22048f66",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "# SKTM Web User\n",
        "height": 80,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        -112
      ],
      "typeVersion": 1,
      "id": "376b9aaa-28e8-4223-859f-a979ccac231d",
      "name": "Sticky Note31"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2448,
        288
      ],
      "id": "fa583098-b119-4998-869b-6eef5b298000",
      "name": "a22"
    },
    {
      "parameters": {
        "content": "### Webhook Respon SKTM User",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2400,
        240
      ],
      "typeVersion": 1,
      "id": "198a97a2-b8b9-4bc8-aa85-a9913b6551d8",
      "name": "Sticky Note43"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "63abb96e-2834-4094-b950-36a2ad7c4302",
              "name": "Id HTML",
              "value": "={{ $('a19').item.json.data }}",
              "type": "string"
            },
            {
              "id": "143bb8cf-9195-43b5-84cf-d40909831b47",
              "name": "Id CSS",
              "value": "={{ $('a4').item.json.Full_Id }}",
              "type": "string"
            },
            {
              "id": "f455dd1c-fa8e-4f81-9810-e8e5744fffac",
              "name": "Id JS",
              "value": "={{ $('a16').item.json.Full_Id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2224,
        288
      ],
      "id": "f2bcbf26-0253-42fa-8883-937da8885050",
      "name": "a21",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Format Respon Json",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2160,
        240
      ],
      "typeVersion": 1,
      "id": "4f1ad2dd-0fec-4337-afec-0812c5f8c40d",
      "name": "Sticky Note42"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "6W3on0nN3Gmmij5S",
          "mode": "list",
          "cachedResultName": "Data Id",
          "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Short_Id": "={{$json.data.substring(3)}}",
            "Full_Id": "={{ $json.data }}",
            "Url": "=https://distrikwania.com/data/{{ $json.data }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Short_Id",
              "displayName": "Short_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Full_Id",
              "displayName": "Full_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Url",
              "displayName": "Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        2016,
        288
      ],
      "id": "310a188f-79f3-4a5b-8096-a8f6d19dd13b",
      "name": "a20",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1920,
        240
      ],
      "typeVersion": 1,
      "id": "4dea9094-9011-49f4-869d-f56923e80a72",
      "name": "Sticky Note25"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "File Name",
              "value": "=Index.html"
            },
            {
              "name": "Parent Folder",
              "value": "={{ $('a1').item.json.data_web.user.id.folder }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "=text/html; charset=utf-8",
        "body": "={{ $json.html }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1776,
        288
      ],
      "id": "f068dd6e-4cde-47ee-b4f3-d970b3d20798",
      "name": "a19",
      "alwaysOutputData": false,
      "executeOnce": false,
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tool Uploud Kode HTML\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1680,
        240
      ],
      "typeVersion": 1,
      "id": "f93b1276-3c61-488f-95ca-a6b6cf36ccac",
      "name": "Sticky Note24"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7e80eca0-0f2d-4e97-a821-bc7a4b1b0f5f",
              "name": "html",
              "value": "=<!doctype html>\n<html lang=\"id\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title></title>\n  <link rel=\"stylesheet\" href=\"{{ $json.css }}\">\n  <script type=\"module\" src=\"{{ $json.script }}\"></script>\n</head>\n<body>\n</body>\n</html>",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1520,
        288
      ],
      "id": "7af624fa-1fa7-4413-a58d-e79b79c1a113",
      "name": "a18",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Kode HTML Web",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1440,
        240
      ],
      "typeVersion": 1,
      "id": "8cb94d77-e3c8-4cdb-bd74-86beb3ab19ff",
      "name": "Sticky Note41"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e74cefab-5944-4e0c-a432-af5c939ca70e",
              "name": "css",
              "value": "=https://distrikwania.com/css/{{ $('a4').item.json.Short_Id }}",
              "type": "string"
            },
            {
              "id": "e5819852-8057-473e-82a4-c245ceae9dad",
              "name": "script",
              "value": "=https://distrikwania.com/js/{{ $json.Short_Id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1280,
        288
      ],
      "id": "feaf8c31-c9ce-4af1-afdd-39ee3176e548",
      "name": "a17",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Link CSS Dan JS",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1200,
        240
      ],
      "typeVersion": 1,
      "id": "55adf59b-40d6-4b6d-9082-8fe4bf6b5ed8",
      "name": "Sticky Note40"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "6W3on0nN3Gmmij5S",
          "mode": "list",
          "cachedResultName": "Data Id",
          "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Short_Id": "={{$json.data.substring(3)}}",
            "Full_Id": "={{ $json.data }}",
            "Url": "=https://distrikwania.com/js/{{ $json.data }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Short_Id",
              "displayName": "Short_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Full_Id",
              "displayName": "Full_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Url",
              "displayName": "Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1056,
        288
      ],
      "id": "5088466f-5f14-4a85-8069-2cb0161a311d",
      "name": "a16",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        240
      ],
      "typeVersion": 1,
      "id": "f5e97d03-9ee0-4398-8043-d457623d43c3",
      "name": "Sticky Note23"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "File Name",
              "value": "={{ $json[\"Nama File\"] }}"
            },
            {
              "name": "Parent Folder",
              "value": "={{ $json['Lokasi File'] }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "=text/js; charset=utf-8",
        "body": "={{ $json.script.main.js }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        816,
        288
      ],
      "id": "ce9fd78c-8a9f-4dee-ae11-494f3a33b4f6",
      "name": "a15",
      "alwaysOutputData": false,
      "executeOnce": false,
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tool Uploud Kode JS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        240
      ],
      "typeVersion": 1,
      "id": "3fa6affd-a102-4a8f-a7c3-f1620f1e1602",
      "name": "Sticky Note22"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c04bdd4f-4187-4ea9-8452-73b24ce88d26",
              "name": "Nama File",
              "value": "Script.Js",
              "type": "string"
            },
            {
              "id": "b0ad9943-1c44-4bed-971a-28fa72b37fed",
              "name": "Lokasi File",
              "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
              "type": "string"
            },
            {
              "id": "169c5718-3507-47bc-b17e-2f99def03107",
              "name": "script.main.js",
              "value": "={{ $json.url.join('\\n') }}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  renderTemplate();            \n  initViewMap();                \n  initDecryptionVariables();    \n  initBVariable();              \n  loadOnce(true); \n  headConstants();\n  bodyConstants();  \n  setHeaderData();              \n  updateCreateSendButton();     \n});\nwindow.toggleEditMode=toggleEditMode;\nwindow.saveChanges=saveChanges;\nwindow.cancelEdit=cancelEdit;\nwindow.uploadFiles=uploadFiles;\nwindow.confirmCreateAndSend=confirmCreateAndSend;\nwindow.confirmDeleteAll=confirmDeleteAll;\nwindow.handleFileSelect=handleFileSelect;\nwindow.handleDragOver=handleDragOver;\nwindow.handleDragLeave=handleDragLeave;\nwindow.handleDrop=handleDrop;\nwindow.checkStatusAndDisableButtons=checkStatusAndDisableButtons;\nwindow.addEventListener('dataReady', function() {\n  if (typeof initViewMap === 'function') {\n    initViewMap();           \n  }\n  if (typeof setHeaderData === 'function') {\n    setHeaderData();          \n  }\n  if (typeof bodyConstants === 'function') {\n    bodyConstants();       \n  }\n  if (typeof editConstants === 'function') {\n    editConstants();       \n  }\n  if (typeof updateCreateSendButton === 'function') {\n    updateCreateSendButton();\n  }\n});",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        544,
        288
      ],
      "id": "1d445bf8-278c-4c67-95ca-0ee39111b24c",
      "name": "a14",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Main Kode JS",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        480,
        240
      ],
      "typeVersion": 1,
      "id": "28547525-9975-442c-b5d6-f4804e8cd5a5",
      "name": "Sticky Note39"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "url"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        304,
        288
      ],
      "id": "3e5b6f2d-9701-448f-8dba-3011d5ab6355",
      "name": "a13"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e5819852-8057-473e-82a4-c245ceae9dad",
              "name": "url",
              "value": "=import \"https://distrikwania.com/js/{{ $json.data }}\";",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        80,
        288
      ],
      "id": "e998b95a-25fb-427b-8d4e-18dd64883855",
      "name": "a12",
      "notesInFlow": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "File Name",
              "value": "={{ $json[\"Nama File\"] }}"
            },
            {
              "name": "Parent Folder",
              "value": "={{ $json['Lokasi File'] }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "=text/js; charset=utf-8",
        "body": "={{ $json.script.js }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -128,
        288
      ],
      "id": "9d302381-40d1-45d5-8d13-83422d1221f1",
      "name": "a11",
      "alwaysOutputData": false,
      "executeOnce": false,
      "notesInFlow": true
    },
    {
      "parameters": {
        "fieldToSplitOut": "script",
        "include": "selectedOtherFields",
        "fieldsToInclude": "Lokasi File, Nama File",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2368,
        48
      ],
      "id": "c23d1694-d0fb-4622-9dd3-6f0ce1ca8e5b",
      "name": "a10"
    },
    {
      "parameters": {
        "content": "### Join Kode JS Web",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        240,
        240
      ],
      "typeVersion": 1,
      "id": "9fc846fb-13ce-4e5f-b3d5-7897a509cdb3",
      "name": "Sticky Note38"
    },
    {
      "parameters": {
        "content": "### Format import Kode JS Web",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        240
      ],
      "typeVersion": 1,
      "id": "3c2a2c72-499c-42a0-aaab-c9000584b14e",
      "name": "Sticky Note37"
    },
    {
      "parameters": {
        "content": "### Tool Uploud Kode JS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -240,
        240
      ],
      "typeVersion": 1,
      "id": "8f196390-6852-4b57-ac5e-71ff3a2090e3",
      "name": "Sticky Note21"
    },
    {
      "parameters": {
        "content": "### Split Out Kode JS ",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2304,
        0
      ],
      "typeVersion": 1,
      "id": "e31afd50-1806-47d0-b348-512dc056d6db",
      "name": "Sticky Note36"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c04bdd4f-4187-4ea9-8452-73b24ce88d26",
              "name": "Nama File",
              "value": "Script.Js",
              "type": "string"
            },
            {
              "id": "b0ad9943-1c44-4bed-971a-28fa72b37fed",
              "name": "Lokasi File",
              "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
              "type": "string"
            },
            {
              "id": "1df4e9d1-f6ef-41a2-87bc-f7a3faeae4e9",
              "name": "script.cancelEdit.js",
              "value": "=function cancelEdit(){renderView(lastObj||{}); if(editMode) toggleEditMode();}\nwindow.cancelEdit = cancelEdit;\n// Fungsi: cancelEdit (CancelEdit)\n// Fungsi ini digunakan untuk membatalkan perubahan yang sedang diedit dan kembali ke tampilan awal\n// Nama fungsi: CancelEdit\n// Singkatan: cEd\n",
              "type": "string"
            },
            {
              "id": "9950bbfd-eb6b-4494-b33c-0bea6fee6f32",
              "name": "script.checkStatusAndDisableButtons.js",
              "value": "=function checkStatusAndDisableButtons() {\n  const status = getData('status');\n  const isLetterSent = status.toLowerCase().includes('terkirim');\n  if (isLetterSent) {\n    disableAllButtons();\n    showStatusMessage('Surat telah terkirim');\n  } else {\n    enableAllButtons();\n    hideStatusMessage();\n    setTimeout(() => {\n      const editBtn = document.getElementById('editBtn');\n      if (editBtn) {\n        editBtn.disabled = false;\n        editBtn.classList.remove('disabled');\n        editBtn.onclick = toggleEditMode;\n      }\n    }, 10);\n  }\n}\n// Fungsi: checkStatusAndDisableButtons (CheckStatusAndDisableButtons)\n// Fungsi ini digunakan untuk memeriksa status dan menonaktifkan tombol-tombol jika surat telah dikirim\n// Nama fungsi: CheckStatusAndDisableButtons\n// Singkatan: cSD\n\nwindow.checkStatusAndDisableButtons = checkStatusAndDisableButtons;",
              "type": "string"
            },
            {
              "id": "20ee595f-45af-4e56-9232-ad390d8ec419",
              "name": "script.confirmCreateAndSend.js",
              "value": "=async function confirmCreateAndSend(){\n  if(!validateApplicantData()){\n    await showModal({ icon:'‚ö†Ô∏è', title:'Data Pemohon Belum Lengkap', message:'Pastikan semua data pemohon telah diisi dengan benar dan sesuai dengan pilihan yang tersedia untuk Jenis Kelamin, Status Perkawinan, dan Kelurahan/Kampung.', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n    return;\n  }\n  const docs = getData('dokumen');\n  if(!docs || docs.length === 0){\n    await showModal({ icon:'‚ö†Ô∏è', title:'Belum Ada File yang Dilampirkan', message:'Silakan upload minimal satu file pendukung sebelum membuat surat.', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n    return;\n  }\n  const ok = await confirmModal('Konfirmasi Pembuatan Surat','Dengan menekan <b>Setujui & Proses</b>, sistem akan membuat dokumen berdasarkan data saat ini dan mengirimkannya.',{okLabel:'Setujui & Proses',cancelLabel:'Tinjau Kembali',icon:'üì®'});\n  if(!ok) return;\n  await generateAndSendLetter();\n}\n\n// Fungsi: confirmCreateAndSend (ConfirmCreateAndSend)\n// Fungsi ini digunakan untuk mengkonfirmasi pembuatan dan pengiriman surat\n// Nama fungsi: ConfirmCreateAndSend\n// Singkatan: cCS\n\nwindow.confirmCreateAndSend = confirmCreateAndSend;",
              "type": "string"
            },
            {
              "id": "169c5718-3507-47bc-b17e-2f99def03107",
              "name": "script.confirmDeleteAll.js",
              "value": "=async function confirmDeleteAll(){\n  const ok = await showModal({ icon:'üóëÔ∏è',title:'Konfirmasi Penghapusan', message:'Tindakan ini akan <b>menghapus seluruh data dan surat</b> terkait referensi ini. Lanjutkan?', variant:'confirm', buttons:[ {label:'Batal',variant:'secondary',value:false}, {label:'Ya, Hapus Semua',danger:true,value:true} ] });\n  if(!ok) return; await deleteLetterAndData();\n}\n// Fungsi: confirmDeleteAll (ConfirmDeleteAll)\n// Fungsi ini digunakan untuk mengkonfirmasi penghapusan semua data dan surat\n// Nama fungsi: ConfirmDeleteAll\n// Singkatan: cDA\n\nwindow.confirmDeleteAll = confirmDeleteAll;",
              "type": "string"
            },
            {
              "id": "6cb67047-924d-4dea-a8b7-48d467240b8c",
              "name": "script.confirmDeleteDocs.js",
              "value": "=function confirmDeleteDocs(docs){\n  if(!docs||!docs.length) return;\n  confirmModal('Hapus Dokumen','Apakah Anda yakin ingin menghapus dokumen yang dipilih?').then(ok=>{\n    if(ok) deleteDocs(docs);\n  });\n}\n\n// Fungsi: confirmDeleteDocs1 (ConfirmDeleteDocs)\n// Fungsi ini digunakan untuk mengkonfirmasi penghapusan dokumen sebelum benar-benar dihapus\n// Nama fungsi: ConfirmDeleteDocs\n// Singkatan: cDD\n\nwindow.confirmDeleteDocs = confirmDeleteDocs;\n\n\n// async function confirmDeleteDocs1(docs=[]){\n//   if(!docs.length) return;\n//   const listHtml=docs.map(d=>{ const sizeTxt = d.size!=null ? humanSize(d.size) : '‚Äî'; return `üìÑ <b>${toStr(d.nama,'(tanpa nama)')}</b><br>Ukuran: ${sizeTxt}${d.tipe?(' ‚Ä¢ '+d.tipe):''}<br>ID: <span class=\"mono\">${toStr(d.id,'‚Äî')}</span>`; }).join('<hr style=\"border:0;border-top:1px solid rgba(148,163,184,.25);margin:8px 0\">');\n//   const ok = await showModal({ icon:'üóÇÔ∏è', title:'Konfirmasi Penghapusan Dokumen', message:`Dokumen berikut akan dihapus dari sistem:<br><br>${listHtml}<br><br>Tindakan ini tidak dapat dibatalkan. Lanjutkan?`, variant:'confirm', buttons:[ {label:'Batal',variant:'secondary',value:false}, {label:'Hapus Dokumen',danger:true,value:true} ] });\n//   if(!ok) return; await deleteDocumentsByFileIds(docs);\n// }\n\n// // Fungsi: confirmDeleteDocs (ConfirmDeleteDocuments)\n// // Fungsi ini digunakan untuk mengkonfirmasi penghapusan dokumen dengan detail yang lebih lengkap\n// // Nama fungsi: ConfirmDeleteDocuments\n// // Singkatan: cDD\n\n// window.confirmDeleteDocs = confirmDeleteDocs;",
              "type": "string"
            },
            {
              "id": "eed3f371-5a6e-42b0-bf7e-f8e188d2d232",
              "name": "script.confirmModal.js",
              "value": "=function confirmModal(title,message,{okLabel='Lanjutkan',cancelLabel='Batal',icon='‚ùì',danger=false}={}){\n  return showModal({\n    icon,title,message,variant:'confirm',\n    buttons:[\n      {label:cancelLabel,variant:'secondary',value:false},\n      {label:okLabel,primary:!danger,danger:danger,value:true}\n    ]\n  });\n}\n// Fungsi: confirmModal (ConfirmModal)\n// Fungsi ini digunakan untuk menampilkan modal konfirmasi dengan tombol ya/tidak\n// Nama fungsi: ConfirmModal\n// Singkatan: cMd\n\nwindow.confirmModal = confirmModal;",
              "type": "string"
            },
            {
              "id": "91a7d0fb-23e8-4e5b-a880-56b033573413",
              "name": "script.deleteDocs.js",
              "value": "=async function deleteDocs(docs){\n  const lastObj = getData('data')\n  if(!docs||!docs.length) return;\n  const ids = docs.map(d=>d.file_id).filter(Boolean);\n  if(!ids.length) return;\n  try{\n    showLoading(true,'Menghapus dokumen terpilih‚Ä¶');\n    const docDetails = docs.map(doc => ({\n      id: doc.file_id,\n      nama: doc.nama,\n      size: doc.size,\n      tipe: doc.tipe,\n    }));\n    const rawData = {\n      new_data: lastObj, \n      document_details: docDetails\n    };\n    await sendJSON('DELETE_DOCS', rawData);\n    await loadOnce(false);\n  }catch(e){\n    await loadOnce(false);\n    await showModal({\n      icon:'‚ö†Ô∏è',\n      title:'Gagal Menghapus Dokumen',\n      message:'Terjadi kendala saat menghapus dokumen.<br><span class=\"mono\">'+(e.message||e)+'</span>',\n      variant:'danger',\n      buttons:[{label:'Tutup',variant:'secondary',value:true}]\n    });\n  }finally{\n    showLoading(false);\n  }\n}\n// Fungsi: deleteDocs (DeleteDocuments)\n// Fungsi ini digunakan untuk menghapus dokumen dari server berdasarkan ID dengan pendekatan baru\n// Nama fungsi: DeleteDocuments\n// Singkatan: dDc\n\nwindow.deleteDocs = deleteDocs;",
              "type": "string"
            },
            {
              "id": "c9133d23-47d5-4248-a7a0-7bb11899e8ce",
              "name": "script.deleteLetterAndData.js",
              "value": "=async function deleteLetterAndData(){\n  try{\n    const lastObj = getData('data');\n    showLoading(true,'Menghapus surat dan seluruh data terkait‚Ä¶');\n    const rawData = {\n      new_data: lastObj,  \n    };\n    await sendJSON('DELETE_ALL', rawData);\n    await loadOnce(false);\n    await successModal('Penghapusan Berhasil','Surat dan seluruh data terkait telah dihapus dari sistem.');\n  }catch(e){\n    await loadOnce(false);\n    await showModal({ icon:'‚ö†Ô∏è', title:'Gagal Menghapus', message:'Terjadi kendala saat menghapus surat atau data.<br><span class=\"mono\">'+(e.message||e)+'</span>', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n  }finally{ showLoading(false); }\n}\n// Fungsi: deleteLetterAndData (DeleteLetterAndData)\n// Fungsi ini digunakan untuk menghapus surat dan semua data terkait dari server\n// Nama fungsi: DeleteLetterAndData\n// Singkatan: dLD\n\nwindow.deleteLetterAndData = deleteLetterAndData;",
              "type": "string"
            },
            {
              "id": "560704d5-b1df-4cc1-8c6c-9e2c5b6da0b1",
              "name": "script.disableAllButtons.js",
              "value": "=function disableAllButtons() {\n  if (!window.originalButtonStates) {\n    window.originalButtonStates = new Map();\n  }\n  const specificButtons = [\n    'createSendBtn',    \n    'editBtn',          \n    'uploadBtn'        \n  ];\n  specificButtons.forEach(buttonId => {\n    const button = document.getElementById(buttonId);\n    if (button) {\n      window.originalButtonStates.set(buttonId, {\n        disabled: button.disabled,\n        onclick: button.onclick\n      });\n      button.disabled = true;\n      button.classList.add('disabled');\n    }\n  });\n  const noteElement = document.getElementById('submitNote');\n  if (noteElement) {\n    noteElement.style.display = 'none';\n  }\n  const functionalButtons = document.querySelectorAll('button[onclick], .btn[onclick]');\n  functionalButtons.forEach((button, index) => {\n    const buttonKey = `functional_${index}`;\n    window.originalButtonStates.set(buttonKey, {\n      disabled: button.disabled,\n      onclick: button.onclick,\n      element: button\n    });\n    button.disabled = true;\n    button.classList.add('disabled');\n    button.onclick = function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      showModal({\n        icon: 'üîí',\n        title: 'Aksi Tidak Tersedia',\n        message: 'Surat telah terkirim. Semua tombol telah dinonaktifkan.',\n        variant: 'info',\n        buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n      });\n      return false;\n    };\n  });\n  const fileInput = document.getElementById('fileInput');\n  if (fileInput) {\n    window.originalButtonStates.set('fileInput', {\n      disabled: fileInput.disabled\n    });\n    fileInput.disabled = true;\n  }\n  const uploadContainer = document.querySelector('.file-upload-container');\n  if (uploadContainer) {\n    window.originalButtonStates.set('uploadContainer', {\n      pointerEvents: uploadContainer.style.pointerEvents,\n      opacity: uploadContainer.style.opacity,\n      ondragover: uploadContainer.ondragover,\n      ondragleave: uploadContainer.ondragleave,\n      ondrop: uploadContainer.ondrop\n    });\n    uploadContainer.style.pointerEvents = 'none';\n    uploadContainer.style.opacity = '0.5';\n    uploadContainer.ondragover = null;\n    uploadContainer.ondragleave = null;\n    uploadContainer.ondrop = null;\n  }\n  if (editMode) {\n    document.body.classList.remove('edit-mode');\n    editMode = false;\n  }\n  window.systemDisabled = true;\n}\n// Fungsi: disableAllButtons (DisableAllButtons)\n// Fungsi ini digunakan untuk menonaktifkan semua tombol saat surat telah dikirim\n// Nama fungsi: DisableAllButtons\n// Singkatan: dAB\n\nwindow.disableAllButtons = disableAllButtons;",
              "type": "string"
            },
            {
              "id": "a4cddc7c-d79b-4fbd-9db8-01b3cafda898",
              "name": "script.dnk.js",
              "value": "=function dnk(A) {\n    if (!A) {\n      console.error('Data harus disediakan');\n      return null;\n    }\n    try {\n      const a = A.split('_');\n      if (a.length < 2) {\n        console.error('Format data tidak valid');\n        return null;\n      }\n      const b = a.slice(1).join('_');\n      let c = atob(b);\n      try {\n        return JSON.parse(c);\n      } catch (e) {\n        return c;\n      }\n    } catch (e) {\n      console.error('Dekripsi tanpa key gagal:', e);\n      return null;\n    }\n  };\n\n// Fungsi: dnk (DecriptNoKey)\n// Fungsi ini digunakan untuk mendekripsi data tanpa menggunakan kunci\n// Nama fungsi: DecriptNoKey\n// Singkatan: dnk\n\nwindow.dnk = dnk;",
              "type": "string"
            },
            {
              "id": "e6ee7e52-14d1-4616-803d-21803f628f5b",
              "name": "script.dwk.js",
              "value": "=function dwk(A, B) {\n    if (!A || !B) {\n      return null;\n    }\n    const a = A.split('_');\n    if (a.length < 3) {\n      return null;\n    }\n    const b = a[2];\n\n    let c = [];\n    for (let i = 0; i < b.length; i += 2) {\n      c.push(parseInt(b.substr(i, 2), 16));\n    }\n\n    let d = '';\n    for (let i = 0; i < c.length; i++) {\n      let e = B.charCodeAt(i % B.length);\n      let f = c[i] ^ e;\n      d += String.fromCharCode(f);\n    }\n\n    try {\n      const g = atob(d);\n      try {\n        return JSON.parse(g);\n      } catch (e) {\n        return g;\n      }\n    } catch (e) {\n      return null;\n    }\n  };\n\n// Fungsi: dwk (DecriptWithKey)\n// Fungsi ini digunakan untuk mendekripsi data menggunakan kunci yang disediakan\n// Nama fungsi: DecriptWithKey\n// Singkatan: dwk\n\nwindow.dwk = dwk;",
              "type": "string"
            },
            {
              "id": "30cc1945-10c4-4623-9b70-fa468bcc6c7b",
              "name": "script.enableAllButtons.js",
              "value": "=function enableAllButtons() {\n  if (window.originalButtonStates) {\n    const specificButtons = ['createSendBtn', 'editBtn', 'uploadBtn'];\n    specificButtons.forEach(buttonId => {\n      const button = document.getElementById(buttonId);\n      if (button) {\n        const originalState = window.originalButtonStates.get(buttonId);\n        if (originalState) {\n          button.disabled = originalState.disabled || false;\n          button.onclick = originalState.onclick;\n          button.classList.remove('disabled');\n        } else {\n          button.disabled = false;\n          button.classList.remove('disabled');\n        }\n      }\n    });\n    for (const [key, originalState] of window.originalButtonStates) {\n      if (key.startsWith('functional_') && originalState.element) {\n        const button = originalState.element;\n        button.disabled = originalState.disabled || false;\n        button.onclick = originalState.onclick;\n        button.classList.remove('disabled');\n      }\n    }\n    const fileInput = document.getElementById('fileInput');\n    if (fileInput) {\n      const originalState = window.originalButtonStates.get('fileInput');\n      if (originalState) {\n        fileInput.disabled = originalState.disabled || false;\n      } else {\n        fileInput.disabled = false;\n      }\n    }\n    const uploadContainer = document.querySelector('.file-upload-container');\n    if (uploadContainer) {\n      const originalState = window.originalButtonStates.get('uploadContainer');\n      if (originalState) {\n        uploadContainer.style.pointerEvents = originalState.pointerEvents || '';\n        uploadContainer.style.opacity = originalState.opacity || '';\n        uploadContainer.ondragover = originalState.ondragover;\n        uploadContainer.ondragleave = originalState.ondragleave;\n        uploadContainer.ondrop = originalState.ondrop;\n      } else {\n        uploadContainer.style.pointerEvents = '';\n        uploadContainer.style.opacity = '';\n        uploadContainer.ondragover = handleDragOver;\n        uploadContainer.ondragleave = handleDragLeave;\n        uploadContainer.ondrop = handleDrop;\n      }\n    }\n    window.originalButtonStates.clear();\n  } else {\n    const allButtons = document.querySelectorAll('button, .btn');\n    allButtons.forEach(button => {\n      if (button.tagName === 'BUTTON') {\n        button.disabled = false;\n        button.classList.remove('disabled');\n      }\n    });\n    const fileInput = document.getElementById('fileInput');\n    if (fileInput) {\n      fileInput.disabled = false;\n    }\n    const uploadContainer = document.querySelector('.file-upload-container');\n    if (uploadContainer) {\n      uploadContainer.style.pointerEvents = '';\n      uploadContainer.style.opacity = '';\n      uploadContainer.ondragover = handleDragOver;\n      uploadContainer.ondragleave = handleDragLeave;\n      uploadContainer.ondrop = handleDrop;\n    }\n  }\n  window.systemDisabled = false;\n  updateCreateSendButton();\n  refreshPendingFilesUI();\n  const editBtn = document.getElementById('editBtn');\n  if (editBtn) {\n    editBtn.disabled = false;\n    editBtn.classList.remove('disabled');\n    if (!editBtn.onclick) {\n      editBtn.onclick = toggleEditMode;\n    }\n  }\n}\n// Fungsi: enableAllButtons (EnableAllButtons)\n// Fungsi ini digunakan untuk mengaktifkan kembali semua tombol setelah sebelumnya dinonaktifkan\n// Nama fungsi: EnableAllButtons\n// Singkatan: eAB\n\nwindow.enableAllButtons = enableAllButtons;",
              "type": "string"
            },
            {
              "id": "838c2113-b8f7-4d31-9761-32fbab7bf109",
              "name": "script.enk.js",
              "value": "=function enk(A) {\n    let a = btoa(JSON.stringify(A));\n    const b = (Math.random() + 1).toString(36).substring(2, 8);\n    const c = b + \"_\" + a;\n    return c;\n  };\n\n// Fungsi: enk (EncriptNoKey)\n// Fungsi ini digunakan untuk mengenkripsi data tanpa menggunakan kunci\n// Nama fungsi: EncriptNoKey\n// Singkatan: enk\n\nwindow.enk = enk;",
              "type": "string"
            },
            {
              "id": "e57e5cb7-6b56-467c-ab67-b7ef5eac4bc0",
              "name": "script.ewk.js",
              "value": "=function ewk(A, B) {\n    let a = btoa(JSON.stringify(A));\n    let b = [];\n    for (let i = 0; i < a.length; i++) {\n      let c = a.charCodeAt(i);\n      let d = B.charCodeAt(i % B.length);\n      b.push(c ^ d);\n    }\n    let e = b.map(v => v.toString(16).padStart(2, \"0\")).join(\"\");\n    const f = (Math.random() + 1).toString(36).substring(2, 8);\n    const g = f + \"_\" + B.length.toString(16) + \"_\" + e;\n    return g;\n  };\n\n// Fungsi: ewk (EncriptWithKey)\n// Fungsi ini digunakan untuk mengenkripsi data menggunakan kunci yang disediakan\n// Nama fungsi: EncriptWithKey\n// Singkatan: ewk\n\nwindow.ewk = ewk;",
              "type": "string"
            },
            {
              "id": "3c9d4d8d-b559-4cda-886c-00050b2286d4",
              "name": "script.formatProperCase.js",
              "value": "=// Helper function to format text with proper capitalization (only first letter capitalized)\nfunction formatProperCase(text) {\n  if (!text) return '';\n  return text.toLowerCase().replace(/\\b\\w/g, letter => letter.toUpperCase());\n}\n// Fungsi: formatProperCase (FormatProperCase)\n// Fungsi ini digunakan untuk memformat teks dengan kapitalisasi yang benar (hanya huruf pertama yang besar)\n// Nama fungsi: FormatProperCase\n// Singkatan: fPC\n\nwindow.formatProperCase = formatProperCase;",
              "type": "string"
            },
            {
              "id": "26a60d97-3971-4d8a-a01e-ca14acaabaa3",
              "name": "script.generateAndSendLetter.js",
              "value": "=async function generateAndSendLetter(){\n  try{\n    const lastObj = getData('data');\n    if(editMode) await saveChanges();\n    showLoading(true,'Memproses pembuatan surat dan pengiriman data‚Ä¶');\n    // Siapkan struktur data sebelum dienkripsi\n    const rawData = {\n      new_data: lastObj, \n    };\n    await sendJSON('CREATE_AND_SEND', rawData);\n    loadOnce(false);\n\n    await successModal('Surat Berhasil Dibuat','Data dan surat telah dikirim untuk verifikasi.');\n  }catch(e){\n\n    await showModal({icon:'‚ö†Ô∏è',title:'Gagal Membuat Surat',message:'Terjadi kendala saat membuat atau mengirim surat.<br><span class=\"mono\">'+(e.message||e)+'</span>',variant:'danger',buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n  }finally{ showLoading(false); }\n}\n\n// Fungsi: generateAndSendLetter (GenerateAndSendLetter)\n// Fungsi ini digunakan untuk membuat dan mengirim surat ke server\n// Nama fungsi: GenerateAndSendLetter\n// Singkatan: gSL\n\nwindow.generateAndSendLetter = generateAndSendLetter;",
              "type": "string"
            },
            {
              "id": "6e193a5d-8acb-4d78-9806-d29d878e90bd",
              "name": "script.getData.js",
              "value": "=// Fungsi TUNGGAL untuk mengambil semua jenis data dari lastJSON\nfunction getData(request) {\n  switch(request) {\n\n    case 'data':\n      return window.a;\n\n    case 'data_web':\n      return window.a.data_web;\n\n    case 'user':\n      return window.a.data_web.user;\n    \n    case 'status':\n      return window.a.data_web.user.status;\n\n    case 'tanggal':\n      return window.a.data_web.user.tanggal;\n\n    case 'data_surat':\n      return window.a.data_web.user.data_surat;\n      \n    case 'pemohon':\n      return window.a.data_web.user.data_surat.pemohon;\n\n    case 'perihal':\n      return window.a.data_web.user.data_surat.perihal;\n\n    case 'dokumen':\n      return window.a.data_web.user.data_surat.dokumen;\n\n    case 'whatsapp':\n      return window.a.data_web.user.whatsapp;\n\n    case 'logo':\n      return window.a.data_web.user.logo;\n\n    case 'tombol':\n      return window.a.data_web.user.tombol;\n\n    case 'admin2':\n      return window.a.data_web.admin2;\n\n    case 'nomor_surat':\n      return window.a.data_web.admin2.nomor_surat;\n\n    case 'kop':\n      return window.a.data_web.admin2.data_surat.kop;\n\n\n    default:\n      console.warn(`Permintaan data '${request}' tidak dikenali`);\n      return null;\n  }\n}\n\n// Ekspos fungsi ke window\nwindow.getData = getData;",
              "type": "string"
            },
            {
              "id": "683c1260-bb87-4d7d-84cd-7060128ff1ae",
              "name": "script.getWebhookUrl.js",
              "value": "=function getWebhookUrl(action){\n  const tombol = getData('tombol');\n  if (tombol) {\n    switch(action) {\n      case 'CREATE_AND_SEND':\n        return tombol.kirim_surat || null;\n      case 'UPDATE_ONLY':\n        return tombol.edit_data || null;\n      case 'UPLOAD_FILES':\n        return tombol.kirim_file || null;\n      case 'DELETE_DOCS':\n        return tombol.hapus_file || null;\n      case 'DELETE_ALL':\n        return tombol.hapus_surat || null;\n      default:\n        if (tombol.kirim_surat) return tombol.kirim_surat;\n        if (tombol.edit_data) return tombol.edit_data;\n        if (tombol.kirim_file) return tombol.kirim_file;\n        if (tombol.hapus_file) return tombol.hapus_file;\n        if (tombol.hapus_surat) return tombol.hapus_surat;\n    }\n  }\n  return null;\n}\n\n// Fungsi: getWebhookUrl (GetWebhookUrl)\n// Fungsi ini digunakan untuk mendapatkan URL webhook berdasarkan aksi yang diminta\n// Nama fungsi: GetWebhookUrl\n// Singkatan: gWU\n\nwindow.getWebhookUrl = getWebhookUrl;",
              "type": "string"
            },
            {
              "id": "f04bf3ba-236f-4846-b029-762bb18ad439",
              "name": "script.handleDragLeave.js",
              "value": "=function handleDragLeave(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='';ev.currentTarget.style.background='';}\n\n// Fungsi: handleDragLeave (HandleDragLeave)\n// Fungsi ini digunakan untuk menangani event saat file didrag leave dari area upload\n// Nama fungsi: HandleDragLeave\n// Singkatan: hDL\n\nwindow.handleDragLeave = handleDragLeave;",
              "type": "string"
            },
            {
              "id": "a58866bd-4819-4757-a196-97bab619db25",
              "name": "script.handleDragOver.js",
              "value": "=function handleDragOver(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='rgba(56,189,248,.6)';ev.currentTarget.style.background='rgba(56,189,248,.06)';}\n\n// Fungsi: handleDragOver (HandleDragOver)\n// Fungsi ini digunakan untuk menangani event saat file didrag over ke area upload\n// Nama fungsi: HandleDragOver\n// Singkatan: hDO\n\nwindow.handleDragOver = handleDragOver;",
              "type": "string"
            },
            {
              "id": "fd260616-cc93-4ba8-a453-fd7a37fad676",
              "name": "script.handleDrop.js",
              "value": "=function handleDrop(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='';ev.currentTarget.style.background='';pendingFiles=Array.from(ev.dataTransfer.files||[]);refreshPendingFilesUI();}\n\n// Fungsi: handleDrop (HandleDrop)\n// Fungsi ini digunakan untuk menangani event saat file didrop ke area upload\n// Nama fungsi: HandleDrop\n// Singkatan: hDr\n\nwindow.handleDrop = handleDrop;",
              "type": "string"
            },
            {
              "id": "fca57e87-4414-469f-8fd7-4231d43bbab4",
              "name": "script.handleFileInput.js",
              "value": "=function handleFileInput(e){\n  const files=e.target.files;\n  if(!files||!files.length) return;\n  pendingFiles.push(...files);\n  renderFiles({dokumen:pendingFiles});\n}\n\n// Fungsi: handleFileInput (HandleFileInput)\n// Fungsi ini digunakan untuk menangani input file dari elemen input file\n// Nama fungsi: HandleFileInput\n// Singkatan: hFI\n\nwindow.handleFileInput = handleFileInput;",
              "type": "string"
            },
            {
              "id": "0f5d72a2-de70-4a74-bf59-30712439ac63",
              "name": "script.handleFileSelect.js",
              "value": "=function handleFileSelect(ev){pendingFiles=Array.from(ev.target.files||[]);refreshPendingFilesUI();}\n\n// Fungsi: handleFileSelect (HandleFileSelect)\n// Fungsi ini digunakan untuk menangani pemilihan file oleh pengguna\n// Nama fungsi: HandleFileSelect\n// Singkatan: hFS\n\nwindow.handleFileSelect = handleFileSelect;",
              "type": "string"
            },
            {
              "id": "02b0c9dc-039c-49bf-9a2f-91312b08ada1",
              "name": "script.handleProgress.js",
              "value": "=function handleProgress(e){\n  if(!e.lengthComputable) return;\n  const percent=Math.round((e.loaded/e.total)*100);\n  elProg.style.display='flex';\n  elProgBar.style.width=percent+'%';\n}\n\n// Fungsi: handleProgress (HandleProgress)\n// Fungsi ini digunakan untuk menangani event kemajuan upload file\n// Nama fungsi: HandleProgress\n// Singkatan: hPr\n\nwindow.handleProgress = handleProgress;",
              "type": "string"
            },
            {
              "id": "4ab061b2-c4d9-489a-bc00-d02e49fa9df1",
              "name": "script.handleProgressEnd.js",
              "value": "=function handleProgressEnd(){\n  elProg.style.display='none';\n}\n\n// Fungsi: handleProgressEnd (HandleProgressEnd)\n// Fungsi ini digunakan untuk menangani akhir dari event kemajuan upload\n// Nama fungsi: HandleProgressEnd\n// Singkatan: hPE\n\nwindow.handleProgressEnd = handleProgressEnd;",
              "type": "string"
            },
            {
              "id": "77cece1b-4325-4d4b-a26c-b2416ea7e822",
              "name": "script.hideStatusMessage.js",
              "value": "=function hideStatusMessage() {\n  const existing = document.getElementById('statusMessage');\n  if (existing) {\n    existing.remove();\n  }\n}\n// Fungsi: hideStatusMessage (HideStatusMessage)\n// Fungsi ini digunakan untuk menyembunyikan pesan status dari antarmuka\n// Nama fungsi: HideStatusMessage\n// Singkatan: hSM\n\nwindow.hideStatusMessage = hideStatusMessage;",
              "type": "string"
            },
            {
              "id": "b70bc7ad-3a57-4b1f-8a43-4058413c1136",
              "name": "script.htmlTemplate.js",
              "value": "=const htmlTemplate = `\n  <div class=\"bg\" id=\"mainContent\"></div>\n\n  <div class=\"wrap\" id=\"mainAppContent\">\n    <div class=\"topbar\">\n      <div class=\"brand\">\n        <img class=\"logo\" id=\"Logo\" src=\"\" alt=\"Logo Pemda\">\n        <div>\n          <div class=\"title\" id=\"brandTitle\" data-id=\"brandTitleText\"></div>\n        </div>\n      </div>\n      <div class=\"pill\" id=\"statusPill\" data-id=\"statusPillText\"></div>\n    </div>\n\n    <section class=\"card\" role=\"region\" aria-label=\"Layanan SKTM\">\n      <header class=\"card-header\">\n        <div class=\"hgroup\" style=\"align-items: center; text-align: center;\">\n          <div style=\"text-align: center; margin-bottom: 20px; width: 100%;\">\n            <div style=\"font-weight: bold; font-size: 16px; margin-bottom: 2px;\" id=\"kopHeader1\"></div>\n            <div style=\"font-weight: bold; font-size: 16px; margin-bottom: 2px;\" id=\"kopHeader2\"></div>\n            <div style=\"font-size: 12px; margin-bottom: 1px;\" id=\"kopHeader3\"></div>\n            <div style=\"font-size: 12px; margin-bottom: 15px;\" id=\"kopHeader4\"></div>\n          </div>\n          <div class=\"h1\" style=\"text-align: center; width: 100%;\" id=\"suratHeader\"></div>\n          <div class=\"h2\" style=\"text-align: center; width: 100%;\" id=\"nomorSuratHeader\"></div>\n        </div>\n      </header>\n\n      <div class=\"\">\n        <div class=\"panel\">\n          <div class=\"stitle\" id=\"stitle\" data-id=\"stitleText\"></div>\n\n          <!-- BAR EDIT -->\n          <div class=\"editbar\">\n            <button class=\"btn ghost\" onclick=\"toggleEditMode()\" id=\"editBtn\" data-id=\"editBtnLabel\"></button>\n            <div class=\"edit-actions\">\n              <button class=\"btn success\" onclick=\"saveChanges()\" data-id=\"saveBtnLabel\"></button>\n              <button class=\"btn danger\" onclick=\"cancelEdit()\" data-id=\"cancelBtnLabel\"></button>\n            </div>\n          </div>\n\n          <div class=\"ident\" aria-label=\"Identitas Pemohon\">\n            <div class=\"lab\" data-id=\"labNama\"></div><div class=\"sep\"></div><div class=\"val\" id=\"nama\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editNama\" data-value=\"editNama\">\n\n            <div class=\"lab\" data-id=\"labNIK\"></div><div class=\"sep\"></div><div class=\"val mono\" id=\"nik\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editNIK\" data-value=\"editNIK\">\n\n            <div class=\"lab\" data-id=\"labTempatTglLahir\"></div><div class=\"sep\"></div><div class=\"val\" id=\"ttl\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editTTL\" data-value=\"editTTL\">\n\n            <div class=\"lab\" data-id=\"labAgama\"></div><div class=\"sep\"></div><div class=\"val\" id=\"agama\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editAgama\" data-value=\"editAgama\">\n\n            <div class=\"lab\" data-id=\"labJenisKelamin\"></div><div class=\"sep\"></div><div class=\"val\" id=\"jenis_kelamin\"></div>\n            <select class=\"edit-field\" id=\"editJenisKelamin\"></select>\n\n            <div class=\"lab\" data-id=\"labStatusPerkawinan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"status_perkawinan\"></div>\n            <select class=\"edit-field\" id=\"editStatusPerkawinan\"></select>\n\n            <div class=\"lab\" data-id=\"labPekerjaan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"pekerjaan\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editPekerjaan\" data-value=\"editPekerjaan\">\n\n            <div class=\"lab\" data-id=\"labAlamat\"></div><div class=\"sep\"></div><div class=\"val\" id=\"alamat\"></div>\n            <textarea class=\"edit-field\" id=\"editAlamat\" rows=\"2\" data-value=\"editAlamat\"></textarea>\n\n            <div class=\"lab\" data-id=\"labKelurahan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kelurahan\"></div>\n            <select class=\"edit-field\" id=\"editKelurahan\"></select>\n\n            <div class=\"lab\" data-id=\"labKecamatan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kecamatan\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editKecamatan\" data-value=\"editKecamatan\">\n\n            <div class=\"lab\" data-id=\"labKotaKab\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kota_kab\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editKotaKab\" data-value=\"editKotaKab\">\n\n            <div class=\"lab\" data-id=\"labProvinsi\"></div><div class=\"sep\"></div><div class=\"val\" id=\"provinsi\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editProvinsi\" data-value=\"editProvinsi\">\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleFile\"></div>\n          <div class=\"callout\" style=\"border-color:rgba(239,68,68,.45);background:rgba(239,68,68,.08);color:#fee2e2\">\n            <span data-id=\"stitleFile1\"></span>\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleFile2\"></div>\n          <div class=\"file-upload-container\" ondragover=\"handleDragOver(event)\" ondragleave=\"handleDragLeave(event)\" ondrop=\"handleDrop(event)\">\n            <input type=\"file\" id=\"fileInput\" accept=\"*\" multiple style=\"display:none\" onchange=\"handleFileSelect(event)\">\n            <button class=\"btn ghost\" onclick=\"document.getElementById('fileInput').click()\" style=\"width:100%;margin-bottom:8px\" data-id=\"stitleFile3\"></button>\n            <div style=\"font-size:11px;color:#9ca3af;text-align:center;margin-bottom:8px\" data-id=\"stitleFile4\"></div>\n            <div id=\"fileInfo\" style=\"display:none\"></div>\n            <div id=\"uploadProgress\" class=\"upload-progress\" style=\"display:none\"><div id=\"uploadProgressBar\" class=\"upload-progress-bar\"></div></div>\n            <button class=\"btn primary\" id=\"uploadBtn\" onclick=\"uploadFiles()\" style=\"width:100%;display:none\" data-id=\"stitleFile5\"></button>\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:16px\" data-id=\"stitleFile6\"></div>\n          <div class=\"uploaded-files-container\">\n            <div id=\"uploadedFilesList\"><div class=\"no-files-message\" data-id=\"noFilesMessage\"></div></div>\n          </div>\n\n          <div class=\"note\" data-id=\"note\"></div>\n          <br>\n          <aside class=\"\">\n            <div class=\"stitle\" data-id=\"stitleTindakan\"></div>\n            <div class=\"actions\">\n              <button class=\"btn primary\" id=\"createSendBtn\" onclick=\"confirmCreateAndSend()\" data-id=\"createSendBtn\"></button>\n              <button class=\"btn danger\" onclick=\"confirmDeleteAll()\" id=\"deleteAllBtn\" data-id=\"deleteAllBtn\"></button>\n            </div>\n            <div class=\"note\" id=\"submitNote\" style=\"display: none;\" data-id=\"submitNote\"></div>\n\n            <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleRingkasan\"></div>\n            <div class=\"callout\">\n              <div data-id=\"operator\"></div>\n              <div data-id=\"tanggal\"></div>\n              <div data-id=\"referensi\"></div>\n              <div data-id=\"from\"></div>\n            </div>\n          </aside>\n          <footer class=\"card-footer\">\n            <div data-id=\"footer\"></div>\n          </footer>\n        </div>\n      </div>\n    </section>\n  </div>\n\n  <!-- LOADING -->\n  <div class=\"loading-overlay\" id=\"loadingOverlay\" data-id=\"loadingOverlay\" aria-live=\"polite\" aria-busy=\"true\">\n    <div class=\"loading-box\">\n      <div class=\"spinner\" aria-hidden=\"true\"></div>\n      <div class=\"loading-text\" id=\"loadingText\" data-id=\"loadingText\"></div>\n    </div>\n  </div>\n\n  <!-- MODAL -->\n  <div class=\"modal-overlay\" id=\"modalOverlay\" data-id=\"modalOverlay\" role=\"dialog\" aria-modal=\"true\">\n    <div class=\"modal modal--info\" id=\"modalBox\" data-id=\"modalBox\" role=\"document\">\n      <div class=\"modal-header\">\n        <div class=\"modal-icon\" id=\"modalIcon\" data-id=\"modalIcon\"></div>\n        <div class=\"modal-title\" id=\"modalTitle\" data-id=\"modalTitle\"></div>\n      </div>\n      <div class=\"modal-message\" id=\"modalMessage\" data-id=\"modalMessage\"></div>\n      <div class=\"modal-actions\" id=\"modalActions\" data-id=\"modalActions\"></div>\n    </div>\n  </div>\n`;\nfunction renderTemplate() {\n   const targetElement = document.body;\n  if (targetElement) {\n    targetElement.innerHTML = htmlTemplate;\n  }\n}\n// Fungsi: htmlTemplate (HTMLTemplate)\n// Fungsi ini menyimpan template HTML dan menyediakan fungsi untuk merendernya\n// Nama fungsi: HTMLTemplate\n// Singkatan: hTmpl\n\nwindow.htmlTemplate = htmlTemplate;\nwindow.renderTemplate = renderTemplate;",
              "type": "string"
            },
            {
              "id": "a5beaab5-d126-495d-9f6c-5e2a592cd727",
              "name": "script.humanSize.js",
              "value": "=function humanSize(bytes){if(!bytes&&bytes!==0)return null; const u=['B','KB','MB','GB']; let i=0, n=Number(bytes); while(n>=1024&&i<u.length-1){n/=1024;i++} return (Math.round(n*10)/10)+' '+u[i];}\n\n// Fungsi: humanSize (HumanReadableSize)\n// Fungsi ini mengubah ukuran dalam bytes menjadi format yang mudah dibaca (KB, MB, GB)\n// Nama fungsi: HumanReadableSize\n// Singkatan: hSz\n\nwindow.humanSize = humanSize;",
              "type": "string"
            },
            {
              "id": "6467d9fc-ab55-417f-a9b9-59ac5a27696f",
              "name": "script.infoModal.js",
              "value": "=function infoModal(title,message,icon='‚ÑπÔ∏è'){\n  return showModal({icon,title,message,variant:'info',buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n}\n// Fungsi: infoModal (InfoModal)\n// Fungsi ini digunakan untuk menampilkan modal informasi\n// Nama fungsi: InfoModal\n// Singkatan: iMd\n\nwindow.infoModal = infoModal;\n",
              "type": "string"
            },
            {
              "id": "1c03e4ab-9bc1-4635-8e1b-e3eaaa99c742",
              "name": "script.init.js",
              "value": "=function init(){\n  loadOnce(true);\n  elFileInput.addEventListener('change',handleFileInput);\n  elUploadBtn.addEventListener('click',handleUploadBtn);\n  elProg.addEventListener('progress',handleProgress);\n  elProg.addEventListener('loadend',handleProgressEnd);\n}\n\n// Fungsi: init (Initialize)\n// Fungsi ini digunakan untuk menginisialisasi aplikasi saat pertama kali dimuat\n// Nama fungsi: Initialize\n// Singkatan: ini\n\nwindow.init = init;",
              "type": "string"
            },
            {
              "id": "96e7f572-ea54-4f27-a8b0-8b6309fabb46",
              "name": "script.loadOnce.js",
              "value": "=async function loadOnce(showLoader=true){\n  if (showLoader && showLoading) {\n    showLoading(true, 'Memuat data awal‚Ä¶ Mohon menunggu.');\n  }\n  const t = btoa(p + ':' + q);\n  fetch(s, {\n    headers: {\n      'Authorization': 'Basic ' + t,\n      'Accept': 'application/json'\n    },\n    credentials: 'same-origin'\n  })\n  .then(async u => {\n    const responseText = await u.text();\n    let parsedData = JSON.parse(responseText);\n    const decryptedData = dwk(parsedData.data, setTextConstants(56473829104756359));\n    const normalizedData = ndj(decryptedData || {});\n    window.a = normalizedData;\n    renderView();\n    updateCreateSendButton();\n\n    window.dispatchEvent(new CustomEvent('dataReady'));\n    if (showLoading) {\n      showLoading(false);\n    }\n\n    if(!firstLoadDone){\n      firstLoadDone=true;\n    }\n  })\n  .catch(x => {\n    if (showLoading) {\n      showLoading(false);\n    }\n    if (window.srm) {\n      window.srm({\n        title: 'Gagal Memuat Data',\n        message: 'Tidak dapat memuat data dari server. Silakan coba beberapa saat lagi atau periksa koneksi internet Anda.'\n      });\n    }\n  });\n    \n}\n\n// Fungsi: loadOnce (LoadOnce)\n// Fungsi ini digunakan untuk memuat data dari server sekali saja atau dengan polling\n// Nama fungsi: LoadOnce\n// Singkatan: lOc\n\nwindow.loadOnce = loadOnce;",
              "type": "string"
            },
            {
              "id": "c0e7c90a-e539-42da-9c5a-a60aa4908b75",
              "name": "script.modalElements.js",
              "value": "=// Functions to get modal elements dynamically when needed\nconst getModalOverlay = () => $(\"modalOverlay\");\nconst getModalBox = () => $(\"modalBox\");\nconst getModalIcon = () => $(\"modalIcon\");\nconst getModalTitle = () => $(\"modalTitle\");\nconst getModalMessage = () => $(\"modalMessage\");\nconst getModalActions = () => $(\"modalActions\");\n\n// Elemen-elemen DOM untuk modal dialog (fungsional)\n// Variabel: modalElements\n// Singkatan: mEl\n\nwindow.getModalOverlay = getModalOverlay;\nwindow.getModalBox = getModalBox;\nwindow.getModalIcon = getModalIcon;\nwindow.getModalTitle = getModalTitle;\nwindow.getModalMessage = getModalMessage;\nwindow.getModalActions = getModalActions;\n\n// Legacy compatibility - for backward compatibility with existing code\n// These will return null if called too early, but functions above can be used with safety checks\nwindow.modalOverlay = null;\nwindow.modalBox = null;\nwindow.modalIcon = null;\nwindow.modalTitle = null;\nwindow.modalMessage = null;\nwindow.modalActions = null;",
              "type": "string"
            },
            {
              "id": "6305a973-3fab-4bc9-a37e-019caf0696f8",
              "name": "script.normalizeDataJSON.js",
              "value": "=function ndj(data) {\n  if (!data) return {};\n  if (Array.isArray(data) && data.length > 0) {\n    return ndj(data[0]);\n  }\n  if (typeof data === 'string') {\n    try {\n      const parsed = JSON.parse(data);\n      return ndj(parsed);\n    } catch (e) {\n      return { error: 'Invalid JSON string', original: data };\n    }\n  }\n  if (data?.data_web) {\n    return data;\n  }\n  if (data?.data_surat) {\n    return {\n      data_web: {\n        user: data\n      }\n    };\n  }\n  return {\n    data_web: data\n  };\n}\n\n// Fungsi: normalizeDataJSON (NormalizeDataJSON)\n// Fungsi ini digunakan untuk menormalisasi data JSON dari berbagai format menjadi format standar\n// Nama fungsi: NormalizeDataJSON\n// Singkatan: nDJ\n\nwindow.ndj = ndj;",
              "type": "string"
            },
            {
              "id": "dde3bc08-2552-4cc3-86aa-527cd9bb1745",
              "name": "script.normalizeDocs.js",
              "value": "=function normalizeDocs(docs){\n  const arr=Array.isArray(docs)?docs.filter(Boolean):[];\n  const seen=new Set(); const out=[];\n  for(const d of arr){\n    // Handle File objects (pending files that haven't been uploaded yet)\n    if (d instanceof File) {\n      const fileSize = d.size || null;\n      const fileName = d.name || '-';\n      const fileKey = `name:${fileName.toLowerCase()}|size:${fileSize || 0}`;\n      if(seen.has(fileKey)) continue;\n      seen.add(fileKey);\n      out.push({\n        label: fileName,\n        name: fileName,\n        file_id: null,\n        view_url: null,\n        download_url: null,\n        size: fileSize,\n        mimeType: d.type || null\n      });\n      continue;\n    }\n  }\n  return out;\n}\n\n// Fungsi: normalizeDocs (NormalizeDocuments)\n// Fungsi ini digunakan untuk menormalkan struktur data dokumen dari berbagai format\n// Nama fungsi: NormalizeDocuments\n// Singkatan: nDc\n\nwindow.normalizeDocs = normalizeDocs;",
              "type": "string"
            },
            {
              "id": "48a02bc4-82ac-4d91-95b5-65a4713c9156",
              "name": "script.refreshPendingFilesUI.js",
              "value": "=function refreshPendingFilesUI(){\n  if(!elFileInfo||!elUploadBtn) return;\n  if(!pendingFiles.length){\n    elFileInfo.style.display='none';\n    elUploadBtn.style.display='none';\n    return;\n  }\n  elFileInfo.style.display='';\n  elUploadBtn.style.display='';\n  if(!window.systemDisabled) {\n    elUploadBtn.disabled = false;\n    elUploadBtn.classList.remove('disabled');\n  }\n  elFileInfo.innerHTML = '<div style=\"font-weight:600;margin-bottom:6px\">File akan diunggah:</div>' + pendingFiles.map(f => `<div style=\"font-size:12px; margin-bottom:8px\">‚Ä¢ ${f.name}</div>`).join('');\n  updateCreateSendButton();\n}\n// Fungsi: refreshPendingFilesUI (RefreshPendingFilesUI)\n// Fungsi ini digunakan untuk memperbarui tampilan antarmuka untuk file-file yang akan diunggah\n// Nama fungsi: RefreshPendingFilesUI\n// Singkatan: rPF\n\nwindow.refreshPendingFilesUI = refreshPendingFilesUI;",
              "type": "string"
            },
            {
              "id": "20198096-01fc-40fa-b999-4d13ecb42824",
              "name": "script.renderFiles.js",
              "value": "=function renderFiles(obj){\n  const wrap=VIEW.filesList; if(!wrap) return;\n  wrap.innerHTML='';\n  updateCreateSendButton(); \n  if(!obj.length){\n    const div=document.createElement('div'); div.className='no-files-message'; div.textContent='Belum Ada File Uploud';\n    wrap.appendChild(div);\n    return;\n  }\n  obj.forEach(d=>{\n    const row=document.createElement('div'); row.className='uploaded-file-item';\n    const nameEl=document.createElement('div'); nameEl.className='file-name'; nameEl.textContent=toStr(d.nama,'(tanpa nama)'); row.appendChild(nameEl);\n    const metaParts=[]; if(d.size!=null) metaParts.push('Ukuran: '+humanSize(d.size)); if(d.tipe) metaParts.push(d.tipe);\n    const metaEl=document.createElement('div'); metaEl.className='file-meta'; metaEl.textContent=metaParts.join(' ‚Ä¢ ')||'‚Äî'; row.appendChild(metaEl);\n    const act=document.createElement('div'); act.className='file-actions';\n    if(d.view){\n      const viewUrl = d.view;\n      const a=document.createElement('a'); a.href=viewUrl; a.target='_blank'; a.rel='noopener'; a.textContent='üëÅÔ∏è Lihat'; a.className='btn success'; act.appendChild(a);\n    }\n    if(d.id){\n      const fileId = d.id;\n      const b=document.createElement('button');\n      b.className='btn danger';\n      b.textContent='üóëÔ∏è Hapus';\n      if(window.systemDisabled) {\n        b.disabled = true;\n        b.classList.add('disabled');\n        b.onclick = function(e) {\n          e.preventDefault();\n          showModal({\n            icon: 'üîí',\n            title: 'Hapus Dokumen Tidak Tersedia',\n            message: 'Surat telah terkirim. Dokumen tidak dapat dihapus.',\n            variant: 'info',\n            buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n          });\n        };\n      } else {\n        const docCopy = {...d, file_id: fileId};\n        b.onclick=()=>confirmDeleteDocs([docCopy]);\n      }\n      act.appendChild(b);\n    }\n    row.appendChild(act);\n    wrap.appendChild(row);\n  });\n}\n\n// Fungsi: renderFiles (RenderFiles)\n// Fungsi ini digunakan untuk merender daftar file yang telah diunggah\n// Nama fungsi: RenderFiles\n// Singkatan: rFl\n\nwindow.renderFiles = renderFiles;",
              "type": "string"
            },
            {
              "id": "bed7e182-4e3b-4b7a-87e0-532410a9cfd3",
              "name": "script.renderView.js",
              "value": "=function renderView(){\n  VIEW.logo.src = getData('logo');\n  checkStatusAndDisableButtons(getData('status'));\n  const p = getData('pemohon');\n  // Set nilai edit form\n  VIEW.nama.textContent = toStr(p.nama);\n  VIEW.nik.textContent = toStr(p.nik);\n  VIEW.ttl.textContent = toStr(p.ttl);\n  VIEW.agama.textContent = toStr(p.agama);\n  VIEW.jenis_kelamin.textContent = toStr(p.jenis_kelamin);\n  VIEW.status_perkawinan.textContent = toStr(p.status_perkawinan);\n  VIEW.pekerjaan.textContent = toStr(p.pekerjaan);\n  VIEW.alamat.textContent = toStr(p.alamat);\n  VIEW.kampung_kelurahan.textContent = toStr(p.kampung_kelurahan);\n  VIEW.kecamatan.textContent = toStr(p.kecamatan);\n  VIEW.kota_kabupaten.textContent = toStr(p.kota_kabupaten);\n  VIEW.provinsi.textContent = toStr(p.provinsi);\n\n  // Set nilai edit form\n  EDIT.nama.value = toStr(p.nama);\n  EDIT.nik.value = toStr(p.nik);\n  EDIT.ttl.value = toStr(p.ttl);\n  EDIT.agama.value = toStr(p.agama);\n  EDIT.jenis_kelamin.value = toStr(p.jenis_kelamin);\n  EDIT.status_perkawinan.value = toStr(p.status_perkawinan);\n  EDIT.pekerjaan.value = toStr(p.pekerjaan);\n  EDIT.alamat.value = toStr(p.alamat);\n  EDIT.kampung_kelurahan.value = toStr(p.kampung_kelurahan);\n  EDIT.kecamatan.value = toStr(p.kecamatan);\n  EDIT.kota_kabupaten.value = toStr(p.kota_kabupaten);\n  EDIT.provinsi.value = toStr(p.provinsi);\n\n\n  // Render file dan update tombol\n  renderFiles(getData('dokumen'));\n  updateCreateSendButton();\n}\n\n// Fungsi: renderView (RenderView)\n// Fungsi ini digunakan untuk merender tampilan antarmuka berdasarkan data yang diberikan\n// Nama fungsi: RenderView\n// Singkatan: rVw\n\nwindow.renderView = renderView;",
              "type": "string"
            },
            {
              "id": "a24d3f19-0154-49b5-80b9-42cc5ef03c5f",
              "name": "script.saveChanges.js",
              "value": "=async function saveChanges(){\n  try{\n    const new_data = getData('data');\n    const oldData = JSON.parse(JSON.stringify(new_data));\n    const p = getData('pemohon');\n    p.nama              = EDIT.nama?.value              || p.nama;\n    p.nik               = EDIT.nik?.value               || p.nik;\n    p.ttl               = EDIT.ttl?.value               || p.ttl;\n    p.agama             = EDIT.agama?.value             || p.agama;\n    p.jenis_kelamin     = EDIT.jenis_kelamin?.value     || p.jenis_kelamin;\n    p.status_perkawinan = EDIT.status_perkawinan?.value || p.status_perkawinan;\n    p.pekerjaan         = EDIT.pekerjaan?.value         || p.pekerjaan;\n    p.alamat            = EDIT.alamat?.value            || p.alamat;\n    p.kecamatan         = EDIT.kecamatan?.value         || p.kecamatan;\n    p.kota_kabupaten    = EDIT.kota_kabupaten?.value    || p.kota_kabupaten;\n    p.provinsi          = EDIT.provinsi?.value          || p.provinsi;\n    p.kampung_kelurahan = EDIT.kampung_kelurahan?.value || p.kampung_kelurahan;\n    const rawData = {\n      new_data: new_data, \n      old_data: oldData  \n    };\n    showLoading(true,'Memperbarui data...');\n    await sendJSON('UPDATE_ONLY', rawData);\n    await loadOnce(false);\n    renderView(); if(editMode) toggleEditMode();\n  }finally{ showLoading(false); }\n}\n\n// Fungsi: saveChanges (SaveChanges)\n// Fungsi ini digunakan untuk menyimpan perubahan data yang telah diedit ke server\n// Nama fungsi: SaveChanges\n// Singkatan: sCh\n\nwindow.saveChanges = saveChanges;",
              "type": "string"
            },
            {
              "id": "1538a745-bd6d-4569-a129-de6cbffb9852",
              "name": "script.sendJSON.js",
              "value": "=async function sendJSON(action, rawData){\n  const targetUrl = getWebhookUrl(action);\n  if(!targetUrl){\n    throw new Error('Tidak ada URL tombol untuk tindakan ' + action + '. Silakan periksa pengaturan konfigurasi.');\n  }\n  const B = setTextConstants(1357924680135791);\n  const A = setTextConstants(56473829104756359);\n  const encryptedData = ewk(rawData, A);\n  const payload = {\n    data: encryptedData,\n    key: B\n  };\n  const resp = await fetch(targetUrl,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });\n  const text = await resp.text();\n  if(!resp.ok) throw new Error('HTTP '+resp.status+' ‚Äî '+text.slice(0,200));\n  return text;\n}\n\n// Fungsi: sendJSON (SendJSON)\n// Fungsi ini digunakan untuk mengirim data JSON ke server melalui webhook\n// Nama fungsi: SendJSON\n// Singkatan: sJS\n\nwindow.sendJSON = sendJSON;",
              "type": "string"
            },
            {
              "id": "162aa531-cffe-4845-b899-478e3d4a26e6",
              "name": "script.setHeaderData.js",
              "value": "=function setHeaderData() {\n    const a = getData('kop') || {};\n    const b = getData('nomor_surat') || '';\n    document.getElementById('kopHeader1').textContent = a.pemerintah_kabupaten || '';\n    document.getElementById('kopHeader2').textContent = a.distrik || '';\n    document.getElementById('kopHeader3').textContent = `${a.alamat || ''} - ${a.provinsi || ''} ${a.kode_pos || ''}`;\n    document.getElementById('kopHeader4').textContent = a.email || '';\n    document.getElementById('suratHeader').textContent = 'SURAT KETERANGAN TIDAK MAMPU';\n    document.getElementById('nomorSuratHeader').textContent = `Nomor : ${b}`;\n}\n// Fungsi: setHeaderData (SetHeaderData)\n// Fungsi ini digunakan untuk mengisi data header kop surat dari data JSON\n// Nama fungsi: SetHeaderData\n// Singkatan: sHD\n\nwindow.setHeaderData = setHeaderData;",
              "type": "string"
            },
            {
              "id": "6295392e-0640-4512-9b39-9a8522d64d39",
              "name": "script.showLoading.js",
              "value": "=function showLoading(show, text) {\n    if(text) {\n        loadingText.setAttribute('data-temp-text', text);\n        loadingText.textContent = text;\n    }\n    loadingOverlay.style.display = show ? 'flex' : 'none';\n\n    if(!show) {\n        loadingText.removeAttribute('data-temp-text');\n    }\n}\n\n// Fungsi: showLoading (ShowLoading)\n// Fungsi ini digunakan untuk menampilkan atau menyembunyikan overlay loading dengan pesan opsional\n// Nama fungsi: ShowLoading\n// Singkatan: sLd\n\nwindow.showLoading = showLoading;",
              "type": "string"
            },
            {
              "id": "a13518a9-c9b5-4252-b54e-89e142ca5971",
              "name": "script.showModal.js",
              "value": "=// Variabel untuk melacak apakah modal sedang ditampilkan\nlet isModalShowing = false;\nwindow.isModalShowing = isModalShowing;\nfunction showModal(config) {\n  if (isModalShowing) {\n    console.warn('Modal is already showing. New modal will not be displayed until the current one is closed.');\n    return Promise.resolve(null);\n  }\n  return new Promise(resolve => {\n    if (typeof config === 'undefined' || config === null) {\n      console.warn('showModal called without parameters. Modal will not be displayed.');\n      resolve(null);\n      return;\n    }\n    let icon = '';\n    let title = '';\n    let message = '';\n    let buttons = [{label:'Tutup', variant:'secondary', value:true}];\n    let variant = 'info';\n    let closable = true;\n    if (typeof config === 'object' && config !== null) {\n      icon = config.icon !== undefined ? config.icon : icon;\n      title = config.title !== undefined ? config.title : title;\n      message = config.message !== undefined ? config.message : message;\n      buttons = config.buttons !== undefined ? config.buttons : buttons;\n      variant = config.variant !== undefined ? config.variant : variant;\n      closable = config.closable !== undefined ? config.closable : closable;\n    } else {\n      console.warn('showModal called with unexpected parameter type. Please use showModal({title, message, ...}) format.');\n      resolve(null);\n      return;\n    }\n    isModalShowing = true;\n    window.isModalShowing = isModalShowing;  \n    const show = () => {\n      const modalIconEl = getModalIcon();\n      const modalTitleEl = getModalTitle();\n      const modalMessageEl = getModalMessage();\n      const modalActionsEl = getModalActions();\n      const modalOverlayEl = getModalOverlay();\n      const modalBoxEl = getModalBox();\n\n      if (!modalIconEl || !modalTitleEl || !modalMessageEl || !modalActionsEl || !modalOverlayEl) {\n        console.error('Modal elements not found. Make sure htmlTemplate is loaded and renderTemplate() has been called.');\n        isModalShowing = false;\n        window.isModalShowing = isModalShowing;  \n        resolve(null);\n        return;\n      }\n      if (isModalShowing) {\n        modalIconEl.textContent = icon;\n        modalTitleEl.textContent = title;\n        modalMessageEl.innerHTML = message;\n      }\n      modalActionsEl.innerHTML = '';\n      modalBoxEl.className = 'modal modal--' + variant;\n      buttons.forEach((btn) => {\n        const el = document.createElement('button');\n        el.className = 'btn ' + (btn.primary ? 'primary' : btn.danger ? 'danger' : btn.variant || 'secondary');\n        el.textContent = btn.label || 'OK';\n        const btnCopy = {...btn}; \n        el.onclick = async () => {\n          if (typeof btnCopy.callback === 'function') {\n            await btnCopy.callback();\n          }\n          hide();\n          resolve(btnCopy.value);\n        };\n        modalActionsEl.appendChild(el);\n      });\n      function onEsc(e) {\n        if (e.key === 'Escape' && closable) {\n          hide();\n          resolve(null);\n        }\n      }\n      function hide() {\n        modalOverlayEl.style.display = 'none';\n        document.removeEventListener('keydown', onEsc);\n        isModalShowing = false;\n        window.isModalShowing = isModalShowing;  \n      }\n      modalOverlayEl.style.display = 'flex';\n      document.addEventListener('keydown', onEsc);\n    };\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', show);\n    } else {\n      const modalIconEl = getModalIcon();\n      const modalTitleEl = getModalTitle();\n      const modalMessageEl = getModalMessage();\n      const modalActionsEl = getModalActions();\n      const modalOverlayEl = getModalOverlay();\n      if (modalIconEl && modalTitleEl && modalMessageEl && modalActionsEl && modalOverlayEl) {\n        show();\n      } else {\n        setTimeout(() => {\n          const modalIconEl = getModalIcon();\n          const modalTitleEl = getModalTitle();\n          const modalMessageEl = getModalMessage();\n          const modalActionsEl = getModalActions();\n          const modalOverlayEl = getModalOverlay();\n          if (modalIconEl && modalTitleEl && modalMessageEl && modalActionsEl && modalOverlayEl) {\n            show();\n          } else {\n            console.error('Modal elements are still not available after DOM loaded. Please ensure renderTemplate() has been called.');\n            isModalShowing = false;\n            window.isModalShowing = isModalShowing;  \n            resolve(null);\n          }\n        }, 100);\n      }\n    }\n  });\n}\n\n// Fungsi: showModal (ShowModal)\n// Fungsi ini digunakan untuk menampilkan modal dialog dengan konfigurasi yang ditentukan\n// Nama fungsi: ShowModal\n// Singkatan: sMd\n\nwindow.showModal = showModal;",
              "type": "string"
            },
            {
              "id": "2f05227f-d481-4148-83f0-bc5eeb699b62",
              "name": "script.showStatusMessage.js",
              "value": "=function showStatusMessage(message) {\n  hideStatusMessage();\n  const statusDiv = document.createElement('div');\n  statusDiv.id = 'statusMessage';\n  statusDiv.className = 'callout';\n  statusDiv.style.cssText = `\n    border: 1px solid rgba(34,197,94,.35);\n    background: rgba(34,197,94,.1);\n    border-radius: 14px;\n    padding: 12px 14px;\n    font-size: 13px;\n    color: #d1fae5;\n    margin: 14px 0;\n    text-align: center;\n    font-weight: 700;\n  `;\n  statusDiv.innerHTML = `üü¢ ${message}`;\n  const topbar = document.querySelector('.topbar');\n  if (topbar && topbar.nextSibling) {\n    topbar.parentNode.insertBefore(statusDiv, topbar.nextSibling);\n  } else {\n    const wrap = document.querySelector('.wrap');\n    if (wrap && wrap.firstChild) {\n      wrap.insertBefore(statusDiv, wrap.firstChild.nextSibling);\n    }\n  }\n}\n// Fungsi: showStatusMessage (ShowStatusMessage)\n// Fungsi ini digunakan untuk menampilkan pesan status di antarmuka\n// Nama fungsi: ShowStatusMessage\n// Singkatan: sSM\n\nwindow.showStatusMessage = showStatusMessage;",
              "type": "string"
            },
            {
              "id": "67d58936-d334-4a57-867f-ae0b878d98cf",
              "name": "script.srm.js",
              "value": "=function srm({title='Gagal',message='Terjadi kesalahan',icon='‚ùå',variant='danger'}={}){\n  if(window.showModal) {\n    return showModal({icon,title,message,variant,buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n  } else {\n    alert(`${title}: ${message}`);\n  }\n}\n// Fungsi: srm (SystemResponseMessage)\n// Fungsi ini digunakan untuk menampilkan pesan respons dari sistem\n// Nama fungsi: SystemResponseMessage\n// Singkatan: srm\n\nwindow.srm = srm;",
              "type": "string"
            },
            {
              "id": "a816f856-d24e-432e-8c16-a819e3270b5a",
              "name": "script.state.js",
              "value": "=/* ================= 4) STATE ================= */\n// let lastJSON=null,lastObj={},lastHash=null;\nlet editMode=false,pollHandle=null,pendingFiles=[];\nlet firstLoadDone=false;\nwindow.a = null;  // Ditambahkan dari script.js asli\n\n// Variabel state untuk menyimpan data dan status aplikasi\n// Variabel: state\n// Singkatan: st\n\n// window.lastJSON = lastJSON;\n// window.lastObj = lastObj;\n// window.lastHash = lastHash;\nwindow.editMode = editMode;\nwindow.pollHandle = pollHandle;\nwindow.pendingFiles = pendingFiles;\nwindow.firstLoadDone = firstLoadDone;\n// window.a sudah diinisialisasi di atas",
              "type": "string"
            },
            {
              "id": "27a568d8-4fe7-481e-a182-deb4c584adc6",
              "name": "script.successModal.js",
              "value": "=function successModal(title, message, options = {}){\n  const defaultButtons = [{label:'Tutup',variant:'secondary',value:true}];\n  const buttons = options.buttons || defaultButtons;\n  return showModal({icon:'‚úÖ',title,message,variant:'success',buttons});\n}\n// Fungsi: successModal (SuccessModal)\n// Fungsi ini digunakan untuk menampilkan modal sukses\n// Nama fungsi: SuccessModal\n// Singkatan: sMl\n\nwindow.successModal = successModal;",
              "type": "string"
            },
            {
              "id": "d84f9d2d-2e35-4b70-ae72-1753b2c57b09",
              "name": "script.textConstants.js",
              "value": "=function headConstants(a) {\n    document.querySelector('title').textContent = 'Kawe Nia ‚Ä¢ Layanan SKTM';\n    const b = document.querySelector('link');\n    const c = b.href.split('/').pop() ;\n    const f = enk(c);\n    return a % 2 === 0 ? c : f;\n}\n\nfunction bodyConstants() {\n\n    const brandTitleDiv = document.querySelector('[data-id=\"brandTitleText\"]');\n    brandTitleDiv.textContent = 'Kawe Nia ‚Ä¢ Pelayanan Masyarakat';\n\n    const statusPillDiv = document.querySelector('[data-id=\"statusPillText\"]');\n    statusPillDiv.textContent = 'üü¢ Layanan aktif ‚Ä¢ 24/7';\n\n    const stitleDiv = document.querySelector('[data-id=\"stitleText\"]');\n    stitleDiv.textContent = 'Data Pemohon';\n\n    const editBtnElement = document.querySelector('[data-id=\"editBtnLabel\"]');\n    editBtnElement.textContent = '‚úèÔ∏è Masuk Mode Edit';\n\n    const saveBtnElement = document.querySelector('[data-id=\"saveBtnLabel\"]');\n    saveBtnElement.textContent = 'üíæ Simpan Perubahan';\n\n    const cancelBtnElement = document.querySelector('[data-id=\"cancelBtnLabel\"]');\n    cancelBtnElement.textContent = '‚úñÔ∏è Batal';\n\n    const labNama = document.querySelector('[data-id=\"labNama\"]');\n    labNama.textContent = 'Nama';\n\n    const labNIK = document.querySelector('[data-id=\"labNIK\"]');\n    labNIK.textContent = 'NIK';\n\n    const labTempatTglLahir = document.querySelector('[data-id=\"labTempatTglLahir\"]');\n    labTempatTglLahir.textContent = 'Tempat/Tgl Lahir';\n\n    const labAgama = document.querySelector('[data-id=\"labAgama\"]');\n    labAgama.textContent = 'Agama';\n\n    const labJenisKelamin = document.querySelector('[data-id=\"labJenisKelamin\"]');\n    labJenisKelamin.textContent = 'Jenis Kelamin';\n\n    const labStatusPerkawinan = document.querySelector('[data-id=\"labStatusPerkawinan\"]');\n    labStatusPerkawinan.textContent = 'Status Perkawinan';\n\n    const labPekerjaan = document.querySelector('[data-id=\"labPekerjaan\"]');\n    labPekerjaan.textContent = 'Pekerjaan';\n\n    const labAlamat = document.querySelector('[data-id=\"labAlamat\"]');\n    labAlamat.textContent = 'Alamat';\n\n    const labKelurahan = document.querySelector('[data-id=\"labKelurahan\"]');\n    labKelurahan.textContent = 'Kelurahan/Kampung';\n\n    const labKecamatan = document.querySelector('[data-id=\"labKecamatan\"]');\n    labKecamatan.textContent = 'Kecamatan';\n\n    const labKotaKab = document.querySelector('[data-id=\"labKotaKab\"]');\n    labKotaKab.textContent = 'Kota/Kabupaten';\n\n    const labProvinsi = document.querySelector('[data-id=\"labProvinsi\"]');\n    labProvinsi.textContent = 'Provinsi';\n\n    const stitleFile = document.querySelector('[data-id=\"stitleFile\"]');\n    stitleFile.textContent = 'Lampiran Wajib';\n\n    const stitleFile1 = document.querySelector('[data-id=\"stitleFile1\"]');\n    stitleFile1.innerHTML = 'üìé WAJIB LAMPIRKAN : Kartu KTP dan Surat pengantar dari RT harus dilampirkan sebelum mengirim surat.';\n\n    const stitleFile2 = document.querySelector('[data-id=\"stitleFile2\"]');\n    stitleFile2.textContent = 'Upload File';\n\n    const stitleFile3 = document.querySelector('[data-id=\"stitleFile3\"]');\n    stitleFile3.textContent = 'üìÅ Pilih File';\n\n    const stitleFile4 = document.querySelector('[data-id=\"stitleFile4\"]');\n    stitleFile4.textContent = '(PDF, JPG, PNG, DOC, XLS, PPT, ZIP, RAR, dll)';\n\n    const stitleFile5 = document.querySelector('[data-id=\"stitleFile5\"]');\n    stitleFile5.textContent = 'üì§ Upload File';\n\n    const stitleFile6 = document.querySelector('[data-id=\"stitleFile6\"]');\n    stitleFile6.textContent = 'File Terupload';\n\n    const note = document.querySelector('[data-id=\"note\"]');\n    note.innerHTML = '‚ÑπÔ∏è <b>Catatan:</b> Periksa kembali kebenaran data sebelum membuat surat.';\n  \n    const stitleTindakan = document.querySelector('[data-id=\"stitleTindakan\"]');\n    stitleTindakan.textContent = 'Tindakan';\n\n    const createSendBtn = document.querySelector('[data-id=\"createSendBtn\"]');\n    createSendBtn.innerHTML = 'üì® Buat Surat &amp; Kirim Data';\n\n    const deleteAllBtn = document.querySelector('[data-id=\"deleteAllBtn\"]');\n    deleteAllBtn.innerHTML = 'üóëÔ∏è Hapus Surat &amp; Hapus Data';\n\n    const submitNote = document.querySelector('[data-id=\"submitNote\"]');\n    submitNote.innerHTML = '‚ÑπÔ∏è <b>Catatan:</b> Tombol Kirim hanya dapat digunakan apabila seluruh data dan persyaratan telah dilengkapi dengan benar.';\n\n    const stitleRingkasan = document.querySelector('[data-id=\"stitleRingkasan\"]');\n    stitleRingkasan.textContent = 'Ringkasan';\n\n    const operator = document.querySelector('[data-id=\"operator\"]');\n    operator.innerHTML = '<b>üë§ Operator:</b> KaweNia';\n\n    const loadingText = document.querySelector('[data-id=\"loadingText\"]');\n    if (loadingText) {\n        if (!loadingText.getAttribute('data-temp-text')) {\n            loadingText.textContent = 'Memuat data‚Ä¶tess Mohon menunggu.';\n        }\n    }\n    if (!window.isModalShowing) {\n        const modalIcon = document.querySelector('[data-id=\"modalIcon\"]');\n        if (modalIcon) {\n            modalIcon.textContent = '‚ÑπÔ∏è';\n        }\n\n        const modalTitle = document.querySelector('[data-id=\"modalTitle\"]');\n        if (modalTitle) {\n            modalTitle.textContent = 'Informasi';\n        }\n\n        const modalMessage = document.querySelector('[data-id=\"modalMessage\"]');\n        if (modalMessage) {\n            modalMessage.textContent = 'Pesan‚Ä¶';\n        }\n    }\n}\n\n// Fungsi: setTextConstants (SetTextConstants)\n// Fungsi ini digunakan untuk mengisi teks konstan ke elemen-elemen di halaman\n// Nama fungsi: SetTextConstants\n// Singkatan: sTC\n\n// Fungsi untuk kompatibilitas - panggil head dan body constants\nfunction setTextConstants(a) {\n    const b = headConstants(a);\n    bodyConstants();\n    return b;\n}\n\nwindow.headConstants = headConstants;\nwindow.bodyConstants = bodyConstants;\nwindow.setTextConstants = setTextConstants;",
              "type": "string"
            },
            {
              "id": "387416d3-668d-4392-bf13-3e82eb7a8b78",
              "name": "script.textConstantsEdit.js",
              "value": "=\nfunction editConstants() {\n    const p = getData('pemohon') || {};\n    const w = getData('whatsapp').chat_id || {};\n    const t = getData('tanggal') || {};\n    const r = 'KaweNia-SKTM';\n    const y = new Date().getFullYear();\n    function fillSelectOptions(selectId, optionsData) {\n        const selectElement = document.getElementById(selectId);\n        if (selectElement) {\n            selectElement.innerHTML = '';\n            optionsData.forEach(option => {\n                const optionElement = document.createElement('option');\n                optionElement.value = option.value;\n                optionElement.textContent = option.text;\n                if ('selected' in option) {\n                    optionElement.selected = !!option.selected;\n                }\n                selectElement.appendChild(optionElement);\n            });\n        }\n    }\n    const j = (getData('pemohon').jenis_kelamin || '').toLowerCase();\n    const normalizeGender = str => str === 'laki-laki' ? 'Laki-Laki' : 'Perempuan';\n    let options;\n    if (j === 'laki-laki' || j === 'perempuan') {\n      const selected = normalizeGender(j);\n      const other = selected === 'Laki-Laki' ? 'Perempuan' : 'Laki-Laki';\n      options = [{ value: selected, text: selected }, { value: other, text: other }];\n    } else {\n      options = [{ value: 'Laki-Laki', text: 'Laki-Laki' }, { value: 'Perempuan', text: 'Perempuan' }];\n    }\n    fillSelectOptions('editJenisKelamin', options);\n    const s = (getData('pemohon').status_perkawinan || '').toLowerCase();\n    const normalizeMaritalStatus = str => {\n      if(str === 'belum kawin') return 'BELUM KAWIN';\n      if(str === 'kawin') return 'KAWIN';\n      if(str === 'cerai hidup') return 'CERAI HIDUP';\n      if(str === 'cerai mati') return 'CERAI MATI';\n      return str.toUpperCase();\n    };\n    let maritalOptions;\n    if (s === 'belum kawin' || s === 'kawin' || s === 'cerai hidup' || s === 'cerai mati') {\n      const selected = normalizeMaritalStatus(s);\n      const allStatuses = ['BELUM KAWIN', 'KAWIN', 'CERAI HIDUP', 'CERAI MATI'];\n      const other = allStatuses.filter(status => status !== selected);\n      maritalOptions = [{ value: selected, text: selected.charAt(0).toUpperCase() + selected.slice(1).toLowerCase() }];\n      other.forEach(status => {\n        maritalOptions.push({ value: status, text: status.charAt(0).toUpperCase() + status.slice(1).toLowerCase() });\n      });\n    } else {\n      maritalOptions = [\n        { value: 'BELUM KAWIN', text: 'Belum Kawin' },\n        { value: 'KAWIN', text: 'Kawin' },\n        { value: 'CERAI HIDUP', text: 'Cerai Hidup' },\n        { value: 'CERAI MATI', text: 'Cerai Mati' }\n      ];\n    }\n    fillSelectOptions('editStatusPerkawinan', maritalOptions);\n    const allLocations = [\n        'Kelurahan Inauga',\n        'Kelurahan Kamoro Jaya',\n        'Kelurahan Wonosari Jaya',\n        'Kampung Kadun Jaya',\n        'Kampung Mandiri Jaya',\n        'Kampung Mawokau Jaya',\n        'Kampung Nawaripi'\n    ];\n    const k = getData('pemohon').kampung_kelurahan || ''; \n    let locationOptions;\n    let selectedOptionFound = null;\n    for (const location of allLocations) {\n        if (location.toLowerCase() === k.toLowerCase()) {\n            selectedOptionFound = location;\n            break;\n        }\n    }\n    if (!selectedOptionFound) {\n        for (const location of allLocations) {\n            const parts = location.split(' ');\n            if (parts.length > 1) {\n                const prefix = parts[0]; \n                const coreName = parts.slice(1).join(' '); \n                if (coreName.toLowerCase().includes(k.toLowerCase())) {\n                    selectedOptionFound = location; \n                    break;\n                }\n                 if (location.toLowerCase().includes(k.toLowerCase())){\n                     selectedOptionFound = location;\n                     break;\n                 }\n            }\n        }\n    }\n    if (selectedOptionFound) {\n        const otherLocations = allLocations.filter(loc => loc !== selectedOptionFound);\n        locationOptions = [\n            { value: selectedOptionFound, text: selectedOptionFound, selected: true },\n            ...otherLocations.map(loc => ({ value: loc, text: loc }))\n        ];\n    } else {\n        locationOptions = allLocations.map(loc => ({ value: loc, text: loc }));\n    }\n    fillSelectOptions('editKelurahan', locationOptions); \n    const inputValues = {\n        editNama: '',\n        editNIK: '',\n        editTTL: '',\n        editAgama: '',\n        editPekerjaan: '',\n        editAlamat: '',\n        editKecamatan: 'Wania',\n        editKotaKab: 'Mimika',\n        editProvinsi: 'Papua Tengah',\n    };\n    function fillInputValues() {\n        const elementsWithDataValue = document.querySelectorAll('[data-value]');\n\n        elementsWithDataValue.forEach(element => {\n            const dataValueKey = element.getAttribute('data-value');\n            if (inputValues[dataValueKey]) {\n                element.value = inputValues[dataValueKey];\n            }\n        });\n    }\n    fillInputValues();\n    const tanggal = document.querySelector('[data-id=\"tanggal\"]');\n    tanggal.innerHTML = '<b>üìÖ Tanggal:</b> ' + t;\n\n    const referensi = document.querySelector('[data-id=\"referensi\"]');\n    referensi.innerHTML = '<b>üîó Referensi:</b> ' + r;\n\n    const from = document.querySelector('[data-id=\"from\"]');\n    from.innerHTML = '<b>üß≠ From:</b> ' + w;\n\n    const footer = document.querySelector('[data-id=\"footer\"]');\n    footer.innerHTML = y + ' ¬© Pemerintah Distrik Wania ‚Ä¢ Kawe Nia';\n}\n\n// Fungsi: editConstants (editConstants)\n// Fungsi ini digunakan untuk mengisi teks konstan ke elemen-elemen di halaman\n// Nama fungsi: SetTextConstants\n// Singkatan: eTC\n\n\nwindow.editConstants = editConstants;\n",
              "type": "string"
            },
            {
              "id": "a45e3591-5688-4e95-9dc5-42bb3e87769c",
              "name": "script.toggleEditMode.js",
              "value": "=function toggleEditMode(){\n  if (window.systemDisabled) {\n    showModal({\n      icon: 'üîí',\n      title: 'Mode Edit Tidak Tersedia',\n      message: 'Surat telah terkirim. Mode edit telah dinonaktifkan.',\n      variant: 'info',\n      buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n    });\n    return;\n  }\n  editMode=!editMode;\n  document.body.classList.toggle('edit-mode',editMode);\n  const btn=$(\"editBtn\");\n  if(btn) btn.textContent=editMode?'üîí Tutup Mode Edit':'‚úèÔ∏è Masuk Mode Edit';\n  if(editMode);\n  else {loadOnce(false);}\n}\n// Fungsi: toggleEditMode (ToggleEditMode)\n// Fungsi ini digunakan untuk mengaktifkan atau menonaktifkan mode edit\n// Nama fungsi: ToggleEditMode\n// Singkatan: tEM\n\nwindow.toggleEditMode = toggleEditMode;",
              "type": "string"
            },
            {
              "id": "5ba601b8-a9af-48be-9b41-27032ae1c2ac",
              "name": "script.updateCreateSendButton.js",
              "value": "=function updateCreateSendButton(){\n  const btn=$(\"createSendBtn\");\n  if(!btn) return;\n  const userObj = getData('pemohon');\n  if (!userObj) {\n    btn.disabled = true; \n    return;\n  }\n  const p = userObj;\n  const requiredFields = [\n    p.nama?.trim(),\n    p.nik?.trim(),\n    p.ttl?.trim(),\n    p.agama?.trim(),\n    p.jenis_kelamin?.trim(),\n    p.status_perkawinan?.trim(),\n    p.pekerjaan?.trim(),\n    p.alamat?.trim(),\n    p.kampung_kelurahan?.trim(),\n    p.kecamatan?.trim(),\n    p.kota_kabupaten?.trim(),\n    p.provinsi?.trim()\n  ];\n  if (requiredFields.some(field => !field)) {\n    btn.disabled = true;\n    return;\n  }\n  btn.disabled = false;\n}\n// Fungsi: updateCreateSendButton (UpdateCreateSendButton)\n// Fungsi ini digunakan untuk memperbarui status tombol buat dan kirim berdasarkan kelengkapan data\n// Nama fungsi: UpdateCreateSendButton\n// Singkatan: uCS\n\nwindow.updateCreateSendButton = updateCreateSendButton;",
              "type": "string"
            },
            {
              "id": "5462b9af-eb13-494a-9cc9-b76eb8778e67",
              "name": "script.updateSubmitNote.js",
              "value": "=function updateSubmitNote(buttonEnabled) {\n  const noteElement = document.getElementById('submitNote');\n  if (!noteElement) return;\n  if (buttonEnabled) {\n    noteElement.style.display = 'none';\n  } else {\n    noteElement.style.display = 'block';\n  }\n}\n// Fungsi: updateSubmitNote (UpdateSubmitNote)\n// Fungsi ini digunakan untuk menampilkan/menyembunyikan catatan pengiriman berdasarkan status tombol\n// Nama fungsi: UpdateSubmitNote\n// Singkatan: uSN\n\nwindow.updateSubmitNote = updateSubmitNote;",
              "type": "string"
            },
            {
              "id": "4e712d80-058c-4999-ba4b-0c4bb9f5e664",
              "name": "script.uploadFiles.js",
              "value": "=async function uploadFiles(){\n  try{\n    \n    if(!pendingFiles.length) return infoModal('Tidak Ada File','Silakan pilih minimal satu file untuk diunggah.');\n    const lastObj = getData('data');\n    if(editMode) await saveChanges();\n    if(!editMode) await saveChanges();\n    const filePromises = pendingFiles.map(async (file, index) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = function(e) {\n          resolve({\n            name: file.name,\n            content: e.target.result.split(',')[1], \n            type: file.type,\n            size: file.size\n          });\n        };\n        reader.onerror = function() {\n          resolve({\n            name: file.name,\n            content: null,\n            type: file.type,\n            size: file.size\n          });\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    pendingFiles = [];\n    if(typeof elFileInfo !== 'undefined' && elFileInfo) {\n    elFileInfo.style.display = 'none';\n    }\n    if(typeof elUploadBtn !== 'undefined' && elUploadBtn) {\n        elUploadBtn.style.display = 'none';\n    }\n    if(typeof elFileInput !== 'undefined' && elFileInput) {\n        elFileInput.value = '';\n    }\n    const convertedFiles = await Promise.all(filePromises);\n    const filesObject = {};\n    convertedFiles.forEach((file, index) => {\n      if (file.content) {\n        filesObject[`file${index}`] = {\n          name: file.name,\n          content: file.content,\n          type: file.type,\n          size: file.size\n        };\n      }\n    });\n    const rawData = {\n      new_data: lastObj,\n      files: filesObject\n    };\n    if(elProg) elProg.style.display='';\n    showLoading(true,'Mengunggah berkas‚Ä¶');\n    await sendJSON('UPLOAD_FILES', rawData);\n    await loadOnce(false);\n    if(elProgBar) elProgBar.style.width='100%';   \n  }catch(e){\n    await showModal({\n      icon:'‚ö†Ô∏è',\n      title:'Unggah Gagal',\n      message:'Terjadi kendala saat mengunggah berkas.<br><span class=\"mono\">'+(e.message||e)+'</span>',\n      variant:'danger',\n      buttons:[\n        {\n          label:'Tutup',\n          variant:'secondary',\n          value:true,\n          callback: async () => {\n            await loadOnce(false);\n          }\n        }\n      ]\n    });\n  }\n  finally{\n    setTimeout(()=>{\n      if(typeof elProg !== 'undefined' && elProg) elProg.style.display='none';\n      if(typeof elProgBar !== 'undefined' && elProgBar) elProgBar.style.width='0%';\n    }, 600);\n    showLoading(false);\n  }\n}\n\n// Fungsi: uploadFiles (UploadFiles)\n// Fungsi ini digunakan untuk mengunggah file-file ke server\n// Nama fungsi: UploadFiles\n// Singkatan: uFl\n\nwindow.uploadFiles = uploadFiles;",
              "type": "string"
            },
            {
              "id": "68a044a7-e97c-4228-a3c3-f60960a1323d",
              "name": "script.utils.js",
              "value": "=const $=id=>document.getElementById(id);\nconst toStr=(x,fb='BELUM DI ISI (WAJIB DI ISI)')=>{const v=(x??'').toString().trim();return v.length?v:fb;}\nconst isJSONResponse=res=>(res.headers.get('content-type')||'').toLowerCase().includes('application/json');\nasync function hashText(txt){const buf=await crypto.subtle.digest('SHA-256',new TextEncoder().encode(txt));return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');}\n\n// Kumpulan fungsi utilitas umum\n// Fungsi: $ (GetElementById)\n// Nama fungsi: GetElementById\n// Singkatan: $\n\n// Fungsi: toStr (ToStringWithFallback)\n// Nama fungsi: ToStringWithFallback\n// Singkatan: tSF\n\n// Fungsi: isJSONResponse (IsJSONResponse)\n// Nama fungsi: IsJSONResponse\n// Singkatan: iJR\n\n// Fungsi: hashText (HashText)\n// Nama fungsi: HashText\n// Singkatan: hTx\n\nwindow.$ = $;\nwindow.toStr = toStr;\nwindow.isJSONResponse = isJSONResponse;\nwindow.hashText = hashText;",
              "type": "string"
            },
            {
              "id": "0808dd57-c875-4278-a6d1-b55a6b56ea2e",
              "name": "script.validateApplicantData.js",
              "value": "=// Comprehensive form validation function\nfunction validateApplicantData() {\n  const p = getData('pemohon');\n  if (!p) return false;\n  const requiredFields = [\n    p.nama?.trim(),\n    p.nik?.trim(),\n    p.ttl?.trim(),\n    p.agama?.trim(),\n    p.jenis_kelamin?.trim(),\n    p.status_perkawinan?.trim(),\n    p.pekerjaan?.trim(),\n    p.alamat?.trim(),\n    p.kampung_kelurahan?.trim(),\n    p.kecamatan?.trim(),\n    p.kota_kabupaten?.trim(),\n    p.provinsi?.trim()\n  ];\n  if (requiredFields.some(field => !field)) {\n    return false;\n  }\n  return true;\n}\n// Fungsi: validateApplicantData (ValidateApplicantData)\n// Fungsi ini digunakan untuk memvalidasi kelengkapan dan keabsahan data pemohon\n// Nama fungsi: ValidateApplicantData\n// Singkatan: vAD\n\nwindow.validateApplicantData = validateApplicantData;",
              "type": "string"
            },
            {
              "id": "5ff0ff1e-61a0-4866-9ff9-c6553b4a85af",
              "name": "script.viewMap.js",
              "value": "=/* ================= 5) VIEW MAP ================= */\n\n// Fungsi untuk menginisialisasi kembali objek VIEW dan EDIT setelah template dimuat\nfunction initViewMap() {\n  const VIEW = {\n    logo:$(\"Logo\"),\n    nama:$(\"nama\"),\n    nik:$(\"nik\"),\n    ttl:$(\"ttl\"),\n    agama:$(\"agama\"),\n    jenis_kelamin:$(\"jenis_kelamin\"),\n    status_perkawinan:$(\"status_perkawinan\"),\n    pekerjaan:$(\"pekerjaan\"),\n    alamat:$(\"alamat\"),\n    kampung_kelurahan:$(\"kelurahan\"),\n    kecamatan:$(\"kecamatan\"),\n    kota_kabupaten:$(\"kota_kab\"),\n    provinsi:$(\"provinsi\"),\n    filesList:$(\"uploadedFilesList\")\n  };\n\n  const EDIT = {\n    nama:$(\"editNama\"),\n    nik:$(\"editNIK\"),\n    ttl:$(\"editTTL\"),\n    agama:$(\"editAgama\"),\n    jenis_kelamin:$(\"editJenisKelamin\"),\n    status_perkawinan:$(\"editStatusPerkawinan\"),\n    pekerjaan:$(\"editPekerjaan\"),\n    alamat:$(\"editAlamat\"),\n    kampung_kelurahan:$(\"editKelurahan\"),\n    kecamatan:$(\"editKecamatan\"),\n    kota_kabupaten:$(\"editKotaKab\"),\n    provinsi:$(\"editProvinsi\")\n  };\n\n  const elFileInput = $(\"fileInput\");\n  const elFileInfo = $(\"fileInfo\");\n  const elUploadBtn = $(\"uploadBtn\");\n  const elProg = $(\"uploadProgress\");\n  const elProgBar = $(\"uploadProgressBar\");\n  const loadingOverlay = $(\"loadingOverlay\");\n  const loadingText = $(\"loadingText\");\n\n  // Simpan ke window agar bisa digunakan oleh fungsi lain\n  window.VIEW = VIEW;\n  window.EDIT = EDIT;\n  window.elFileInput = elFileInput;\n  window.elFileInfo = elFileInfo;\n  window.elUploadBtn = elUploadBtn;\n  window.elProg = elProg;\n  window.elProgBar = elProgBar;\n  window.loadingOverlay = loadingOverlay;\n  window.loadingText = loadingText;\n\n  return { VIEW, EDIT, elFileInput, elFileInfo, elUploadBtn, elProg, elProgBar, loadingOverlay, loadingText };\n}\n\n// Inisialisasi awal (akan diperbarui setelah template dimuat)\ninitViewMap();\n\n// Fungsi: initViewMap (InitializeViewMap)\n// Fungsi ini digunakan untuk menginisialisasi ulang objek VIEW dan EDIT setelah template dimuat\n// Nama fungsi: InitializeViewMap\n// Singkatan: iVM\n\nwindow.initViewMap = initViewMap;",
              "type": "string"
            },
            {
              "id": "392bfb6c-2311-40ea-95df-914157e092d6",
              "name": "script.decryption.js",
              "value": "=// Variabel untuk proses dekripsi dan enkripsi\n// Variabel: decryption\n// Singkatan: dcr\n\nconst m = \"{{ $('a7').item.json.data }}\"; \nconst n = \"{{ $json.data }}\";\nconst o = \"{{ $('a5').item.json.data }}\"; \n    \nfunction initDecryptionVariables() {\n  const w = setTextConstants(73948261504837191);\n  window.p = dnk(dwk(m, w));\n  window.q = dnk(dwk(n, w));\n  window.s = dwk(o, w);\n  window.A = enk(w);\n}\n\nfunction initBVariable() {\n  const w = setTextConstants(91827364510293573);\n  window.B = w; \n}\n\nwindow.m = m;\nwindow.n = n;\nwindow.o = o;\n\nwindow.initDecryptionVariables = initDecryptionVariables;\nwindow.initBVariable = initBVariable;",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2144,
        48
      ],
      "id": "d3e4705e-2192-4dc3-b404-3cf9e455edec",
      "name": "a9",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Kode JS Web",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2064,
        0
      ],
      "typeVersion": 1,
      "id": "51c82b88-26aa-4d28-a001-62901a4e0693",
      "name": "Sticky Note35"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "data",
              "value": "={{ $('a6').item.json.Password }}"
            },
            {
              "name": "key",
              "value": "={{ $('a4').item.json.Short_Id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1936,
        48
      ],
      "id": "4dea91da-6f21-4359-819a-5ba76b52b4da",
      "name": "a8",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tool Encript Auth Password\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1824,
        0
      ],
      "typeVersion": 1,
      "id": "3eeb2e96-178a-4157-a830-c00a2b62316b",
      "name": "Sticky Note20"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "data",
              "value": "={{ $json.User }}"
            },
            {
              "name": "key",
              "value": "={{ $('a4').item.json.Short_Id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1680,
        48
      ],
      "id": "9c7a30c4-0353-457c-9f5a-3720621be547",
      "name": "a7",
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "### Tool Encript Auth User\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1584,
        0
      ],
      "typeVersion": 1,
      "id": "53d7bb68-0397-42e6-96c9-4baac1137911",
      "name": "Sticky Note19"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "PR8F3oNl3mF1UXp9",
          "mode": "list",
          "cachedResultName": "Data Auth",
          "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/PR8F3oNl3mF1UXp9"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "Nama",
              "keyValue": "Api_Json"
            }
          ]
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1456,
        48
      ],
      "id": "1a8e812f-1b4b-43d9-8e6d-1aa8819fd6dc",
      "name": "a6"
    },
    {
      "parameters": {
        "content": "### Tabel Data Auth\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/PR8F3oNl3mF1UXp9",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1344,
        0
      ],
      "typeVersion": 1,
      "id": "2bb17462-63a9-4639-8b7e-81116e5c5ecc",
      "name": "Sticky Note18"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "data",
              "value": "=https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/5ac5e306-4655-4f62-a225-61216757bd813?id={{ $('a1').item.json.data_web.user.id.json }}"
            },
            {
              "name": "key",
              "value": "={{ $json.Short_Id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1216,
        48
      ],
      "id": "acaa19ea-624e-495a-b8b3-c874693b70d5",
      "name": "a5",
      "notesInFlow": true
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "6W3on0nN3Gmmij5S",
          "mode": "list",
          "cachedResultName": "Data Id",
          "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Short_Id": "={{$json.data.substring(3)}}",
            "Full_Id": "={{ $json.data }}",
            "Url": "=https://distrikwania.com/css/{{ $json.data }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Short_Id",
              "displayName": "Short_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Full_Id",
              "displayName": "Full_Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Url",
              "displayName": "Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        976,
        48
      ],
      "id": "2e2b2b9a-b339-4a91-84ae-c0e46b699692",
      "name": "a4"
    },
    {
      "parameters": {
        "content": "### Tool Encript Url\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1104,
        0
      ],
      "typeVersion": 1,
      "id": "f697c7e5-cc6b-4dd9-bcce-faa8a5a7ee71",
      "name": "Sticky Note17"
    },
    {
      "parameters": {
        "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        864,
        0
      ],
      "typeVersion": 1,
      "id": "03117578-c5db-4058-a307-d72677f34f35",
      "name": "Sticky Note16"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "File Name",
              "value": "={{ $json['Nama File'] }}"
            },
            {
              "name": "Parent Folder",
              "value": "={{ $json['Lokasi File'] }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "=text/css; charset=utf-8",
        "body": "={{ $json['Isi File'] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        736,
        48
      ],
      "id": "23742c0f-b25e-4771-8580-506ccf4905c7",
      "name": "a3",
      "alwaysOutputData": false,
      "executeOnce": false,
      "notesInFlow": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0e5ed211-7817-4ac8-a33a-b4f4ac4faaba",
              "name": "Nama File",
              "value": "Style.css",
              "type": "string"
            },
            {
              "id": "1df4e9d1-f6ef-41a2-87bc-f7a3faeae4e9",
              "name": "Isi File",
              "value": "=\n:root{\n    --bg:#0b1020; --panel:#0f172a; --ink:#e5e7eb; --muted:#9ca3af;\n    --accent:#22c55e; --accent-2:#38bdf8; --line:#1f2937;\n    --danger:#ef4444; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);\n    --space:clamp(14px,2.4vw,22px);\n    --modal-radius:10px;\n    --modal-bg:#111827;\n    --modal-border:rgba(148,163,184,.45);\n    --overlay:rgba(0,0,0,.72);\n}\n*{box-sizing:border-box} html,body{height:100%}\n\n/* ===== FULL BACKGROUND ===== */\nbody{\n    margin:0; color:var(--ink);\n    font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,\"Apple Color Emoji\",\"Segoe UI Emoji\";\n    background:#0a0e1a;\n    min-height:100svh;\n}\n.bg{\n    position:fixed; inset:0; z-index:-1; pointer-events:none;\n    background:\n    radial-gradient(1400px 800px at 20% -10%, #16223f 0%, transparent 60%),\n    radial-gradient(1200px 700px at 90% -20%, rgba(56,189,248,.15) 0%, transparent 60%),\n    linear-gradient(145deg,#0a0e1a,#0f1933 55%,#0a0e1a);\n    background-attachment:fixed,fixed,fixed;\n}\n\nbody,body *{min-width:0; overflow-wrap:anywhere; word-break:break-word; white-space:normal}\n.wrap{max-width:1100px;margin:40px auto;padding:0 20px}\n\n.topbar{display:flex;align-items:center;gap:16px;margin-bottom:18px}\n.brand{display:flex;align-items:center;gap:12px;min-width:0}\n/* ==== Logo responsif & konsisten (tanpa wrapper tambahan) ==== */\n.brand img.logo{\n    width: 120px; /* atau angka yang Anda mau */\n    aspect-ratio: 1 / 1;\n    object-fit: contain;\n    background:#0f172a;\n    border-radius:12px;\n    display:block;\n    /* Garis stroke di dalam */\n    box-shadow:\n    inset 0 0 0 1px rgba(148,163,184,.35), /* border tipis */\n    0 0 6px rgba(0,0,0,.35);               /* glow shadow merata */\n}\n\n.brand .title{font-weight:700;font-size:clamp(16px,2.4vw,20px)}\n.brand .sub{font-size:12px;color:var(--muted)}\n.pill{margin-left:auto;display:flex;gap:8px;align-items:center;font-size:12px;color:#cbd5e1;\n    background:linear-gradient(180deg,rgba(56,189,248,.2),rgba(34,197,94,.15));\n    border:1px solid rgba(148,163,184,.3);padding:6px 10px;border-radius:999px;flex-shrink:0;}\n\n.card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));\n    border:1px solid rgba(148,163,184,.2); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}\n.card-header{display:flex;flex-wrap:wrap;gap:14px;align-items:center;justify-content:center;\n    padding:clamp(14px,2.2vw,20px) var(--space);\n    background:radial-gradient(800px 300px at 10% -20%, rgba(56,189,248,.15), transparent 60%),\n                radial-gradient(600px 300px at 90% -30%, rgba(34,197,94,.18), transparent 55%);\n    border-bottom:1px solid rgba(148,163,184,.2)}\n.hgroup{display:flex;flex-direction:column;gap:8px;min-width:0;margin-bottom:4px;width:100%;text-align:center}\n.h1{font-size:clamp(18px,2.8vw,26px);font-weight:800;letter-spacing:.3px;margin-bottom:2px}\n.h2{font-size:13px;color:var(--muted);margin-top:2px}\n.badges{display:flex;gap:8px;flex-wrap:wrap;min-width:0;margin-top:6px}\n.badge{font-size:12px;padding:6px 10px;border-radius:999px;background:#0b1224;border:1px solid rgba(148,163,184,.26)}\n.badge.info{border-color:rgba(56,189,248,.45);background:rgba(56,189,248,.12);color:#cffafe}\n\n.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:0;min-height:360px}\n@media (max-width:960px){.grid{grid-template-columns:1fr}.side{background:transparent}.panel{border-right:none}}\n\n.panel{padding:var(--space);border-right:1px solid rgba(148,163,184,.16)} .panel:last-child{border-right:none}\n.stitle{font-size:13px;letter-spacing:.4px;text-transform:uppercase;color:#a5b4fc;font-weight:700;margin-bottom:10px}\n\n/* ===== BAR AKSI EDIT ===== */\n.editbar{display:flex;gap:10px;align-items:center;margin-bottom:12px}\n.edit-actions{display:none;gap:10px}\n.edit-mode .edit-actions{display:flex}\n\n/* ===== Data Pemohon ===== */\n.ident{\n    display:grid; grid-template-columns:160px 10px 1fr; gap:6px 10px; align-items:start; font-size:14px;\n    background:rgba(15,23,42,.55); border:1px solid rgba(148,163,184,.15); border-radius:14px; padding:10px 12px;\n}\n@media (max-width:560px){ .ident{grid-template-columns:110px 8px 1fr} }\n.lab{color:#cbd5e1} .sep{color:#475569} .val{color:#e5e7eb;font-weight:600;line-height:1.45}\n.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace}\n\n.note{margin-top:12px;font-size:12.5px;color:#a5b4fc;background:rgba(99,102,241,.1);\n    border:1px dashed rgba(99,102,241,.35);border-radius:12px;padding:10px 12px}\n\n.side{display:flex;flex-direction:column;gap:14px;padding:var(--space);\n    background:linear-gradient(180deg,rgba(2,6,23,.35),rgba(2,6,23,.15))}\n.callout{border:1px solid rgba(56,189,248,.35);background:rgba(56,189,248,.1);border-radius:14px;padding:12px 14px;font-size:13px;color:#e0f2fe}\n.actions{display:flex;flex-wrap:wrap;gap:10px}\n\n/* ===== Buttons ===== */\n.btn{appearance:none;border:none;cursor:pointer;font-weight:700;letter-spacing:.3px;\n    background:#0b1224;color:var(--ink);padding:10px 14px;border-radius:12px; border:1px solid rgba(148,163,184,.3);\n    display:inline-flex; align-items:center; gap:8px; justify-content:center;}\na.btn, a.btn:link, a.btn:visited { text-decoration:none; color:inherit; }\na.btn:hover, a.btn:focus { text-decoration:none; }\n.btn.primary,.btn.success{ background:linear-gradient(180deg,rgba(34,197,94,.95),rgba(16,185,129,.95)); border-color:rgba(16,185,129,.95); color:#052e1a !important; }\n.btn.secondary{ background:linear-gradient(180deg,rgba(56,189,248,.9),rgba(59,130,246,.9)); border-color:rgba(96,165,250,.95); color:#06293a !important; }\n.btn.ghost{background:transparent}\n.btn.danger{ background:linear-gradient(180deg,rgba(239,68,68,.95),rgba(220,38,38,.95)); border-color:rgba(220,38,38,.95); color:#fef2f2 !important; }\n.btn:active{transform:translateY(1px)}\n.btn:disabled, .btn.disabled{\n    opacity: 0.4 !important;\n    cursor: not-allowed !important;\n    pointer-events: none !important;\n    background: #1f2937 !important;\n    border-color: #374151 !important;\n    color: #6b7280 !important;\n    transform: none !important;\n}\n.btn:disabled:hover, .btn.disabled:hover{\n    background: #1f2937 !important;\n    border-color: #374151 !important;\n    color: #6b7280 !important;\n}\n\n.edit-mode .val{display:none}.edit-mode .edit-field{display:block}\n.edit-field{display:none;width:100%;background:rgba(15,23,42,.8);border:1px solid rgba(56,189,248,.4);border-radius:8px;padding:8px 10px;color:#e5e7eb;font-size:14px;font-weight:600}\n.edit-field:focus{outline:none;border-color:rgba(56,189,248,.8);box-shadow:0 0 0 2px rgba(56,189,248,.2)}\n\n.file-upload-container{background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:14px}\n.upload-progress{width:100%;height:4px;background:rgba(148,163,184,.2);border-radius:2px;overflow:hidden;margin:8px 0}\n.upload-progress-bar{height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);width:0%;transition:width .3s ease}\n\n.uploaded-files-container{background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:14px;min-height:60px}\n.no-files-message{color:#9ca3af;font-size:13px;text-align:center;font-style:italic}\n\n.uploaded-file-item{display:flex;flex-direction:column;gap:8px;padding:10px 12px;background:rgba(34,197,94,.06);\n    border:1px solid rgba(34,197,94,.25);border-radius:12px;margin-bottom:8px}\n.file-name{color:#d1fae5;font-weight:700;line-height:1.35}\n.file-meta{color:#a5b4fc;font-size:12px}\n.file-id{font-size:12px;color:#94a3b8}\n.file-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:4px}\n.file-actions .btn{padding:6px 10px;border-radius:10px}\n\n.card-footer{display:flex;gap:14px;justify-content:space-between;align-items:center;\n    padding:12px var(--space);border-top:1px solid rgba(148,163,184,.2);color:var(--muted);font-size:12px}\n\n/* ===== MODAL ===== */\n.modal-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1000;background:var(--overlay)}\n.modal{width:min(480px,92vw);border-radius:var(--modal-radius);background:var(--modal-bg);\n    border:1px solid var(--modal-border);box-shadow:0 18px 50px rgba(0,0,0,.55);padding:18px 18px}\n.modal-header{display:flex;gap:10px;align-items:center;margin-bottom:8px}\n.modal-icon{font-size:28px}\n.modal-title{font-weight:800;font-size:18px;letter-spacing:.3px}\n.modal-message{color:#cbd5e1;line-height:1.7;margin:8px 0 16px;font-size:14px}\n.modal-actions{display:flex;gap:10px;justify-content:flex-end}\n.modal .btn{border-radius:10px;padding:10px 14px}\n.modal--info{box-shadow:inset 4px 0 0 0 #38bdf8, 0 18px 50px rgba(0,0,0,.55)}\n.modal--success{box-shadow:inset 4px 0 0 0 #22c55e, 0 18px 50px rgba(0,0,0,.55)}\n.modal--confirm{box-shadow:inset 4px 0 0 0 #f59e0b, 0 18px 50px rgba(0,0,0,.55)}\n.modal--danger{box-shadow:inset 4px 0 0 0 #ef4444, 0 18px 50px rgba(0,0,0,.55)}\n\n/* ===== LOADING ===== */\n.loading-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:900;background:rgba(2,6,23,.75)}\n.loading-box{display:flex;flex-direction:column;align-items:center;gap:14px;padding:22px;border-radius:12px;border:1px solid rgba(148,163,184,.35);background:#0f172a}\n.spinner{width:52px;height:52px;border-radius:50%;border:4px solid rgba(148,163,184,.35);border-top-color:#22c55e;animation:spin 1s linear infinite}\n@keyframes spin{to{transform:rotate(360deg)}}\n.loading-text{font-size:14px;color:#e5e7eb}\n\n@media print{.side{display:none} body{background:#fff} .card{border:none;box-shadow:none} .pill,.modal-overlay,.loading-overlay{display:none!important}}",
              "type": "string"
            },
            {
              "id": "2c858bc8-bb3a-497c-bb2e-d90ffb227c40",
              "name": "Catatan File",
              "value": "=kode Css untuk HTML",
              "type": "string"
            },
            {
              "id": "03f89783-a9af-4230-86e1-3652d440711f",
              "name": "Lokasi File",
              "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        464,
        48
      ],
      "id": "e359f8a1-26cb-4ca5-bf7d-aabd88a681fa",
      "name": "a2",
      "notesInFlow": true
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={{ $json.body }}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        208,
        48
      ],
      "id": "e3815cf6-9f23-4ff1-9f7c-f4ebcd14c0c4",
      "name": "a1",
      "notesInFlow": true
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "67379661-2458-45d3-8bce-3dc149f95ca9-web-sktm-user",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -16,
        48
      ],
      "id": "6a790a7b-8f5d-4af6-bac5-c8dcee4036af",
      "name": "a",
      "webhookId": "67379661-2458-45d3-8bce-3dc149f95ca9"
    },
    {
      "parameters": {
        "content": "### Kode CSS Web ",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        384,
        0
      ],
      "typeVersion": 1,
      "id": "edd4bf66-e146-4d76-b572-8d7ed3f54931",
      "name": "Sticky Note34"
    },
    {
      "parameters": {
        "content": "### Format Json ",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        144,
        0
      ],
      "typeVersion": 1,
      "id": "d1458bbc-3f77-423d-b338-9765ec035e30",
      "name": "Sticky Note33"
    },
    {
      "parameters": {
        "content": "### Webhook Input SKTM User\n",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -96,
        0
      ],
      "typeVersion": 1,
      "id": "0f552200-7a17-48ce-9e2d-e73747a676a7",
      "name": "Sticky Note32"
    },
    {
      "parameters": {
        "content": "### Tool Uploud Kode CSS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
        "height": 192
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        624,
        0
      ],
      "typeVersion": 1,
      "id": "b0fe87bb-3af4-43f3-a94e-3f493263fd30",
      "name": "Sticky Note15"
    }
  ],
  "connections": {
    "a21": {
      "main": [
        [
          {
            "node": "a22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a20": {
      "main": [
        [
          {
            "node": "a21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a19": {
      "main": [
        [
          {
            "node": "a20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a18": {
      "main": [
        [
          {
            "node": "a19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a17": {
      "main": [
        [
          {
            "node": "a18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a16": {
      "main": [
        [
          {
            "node": "a17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a15": {
      "main": [
        [
          {
            "node": "a16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a14": {
      "main": [
        [
          {
            "node": "a15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a13": {
      "main": [
        [
          {
            "node": "a14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a12": {
      "main": [
        [
          {
            "node": "a13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a11": {
      "main": [
        [
          {
            "node": "a12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a10": {
      "main": [
        [
          {
            "node": "a11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a9": {
      "main": [
        [
          {
            "node": "a10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a8": {
      "main": [
        [
          {
            "node": "a9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a7": {
      "main": [
        [
          {
            "node": "a8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a6": {
      "main": [
        [
          {
            "node": "a7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a5": {
      "main": [
        [
          {
            "node": "a6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a4": {
      "main": [
        [
          {
            "node": "a5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a3": {
      "main": [
        [
          {
            "node": "a4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a2": {
      "main": [
        [
          {
            "node": "a3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a1": {
      "main": [
        [
          {
            "node": "a2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "a": {
      "main": [
        [
          {
            "node": "a1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "df43824a-7e2a-4947-8a1b-6324c11f9b20",
  "activeVersionId": "df43824a-7e2a-4947-8a1b-6324c11f9b20",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2025-12-28T08:09:44.879Z",
      "createdAt": "2025-12-28T08:09:44.879Z",
      "role": "workflow:owner",
      "workflowId": "Z47ZyULxxBvqmbqI",
      "projectId": "MsnmAoT3kpqQYaku"
    }
  ],
  "activeVersion": {
    "updatedAt": "2025-12-28T08:10:35.779Z",
    "createdAt": "2025-12-28T08:10:35.779Z",
    "versionId": "df43824a-7e2a-4947-8a1b-6324c11f9b20",
    "workflowId": "Z47ZyULxxBvqmbqI",
    "nodes": [
      {
        "parameters": {
          "content": "",
          "height": 656,
          "width": 2960
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -288,
          -144
        ],
        "typeVersion": 1,
        "id": "81ec2a07-38f9-4f29-af96-987c22048f66",
        "name": "Sticky Note2"
      },
      {
        "parameters": {
          "content": "# SKTM Web User\n",
          "height": 80,
          "width": 304
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          960,
          -112
        ],
        "typeVersion": 1,
        "id": "376b9aaa-28e8-4223-859f-a979ccac231d",
        "name": "Sticky Note31"
      },
      {
        "parameters": {
          "respondWith": "allIncomingItems",
          "options": {}
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.4,
        "position": [
          2448,
          288
        ],
        "id": "fa583098-b119-4998-869b-6eef5b298000",
        "name": "a22"
      },
      {
        "parameters": {
          "content": "### Webhook Respon SKTM User",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2400,
          240
        ],
        "typeVersion": 1,
        "id": "198a97a2-b8b9-4bc8-aa85-a9913b6551d8",
        "name": "Sticky Note43"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "63abb96e-2834-4094-b950-36a2ad7c4302",
                "name": "Id HTML",
                "value": "={{ $('a19').item.json.data }}",
                "type": "string"
              },
              {
                "id": "143bb8cf-9195-43b5-84cf-d40909831b47",
                "name": "Id CSS",
                "value": "={{ $('a4').item.json.Full_Id }}",
                "type": "string"
              },
              {
                "id": "f455dd1c-fa8e-4f81-9810-e8e5744fffac",
                "name": "Id JS",
                "value": "={{ $('a16').item.json.Full_Id }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          2224,
          288
        ],
        "id": "f2bcbf26-0253-42fa-8883-937da8885050",
        "name": "a21",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Format Respon Json",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2160,
          240
        ],
        "typeVersion": 1,
        "id": "4f1ad2dd-0fec-4337-afec-0812c5f8c40d",
        "name": "Sticky Note42"
      },
      {
        "parameters": {
          "dataTableId": {
            "__rl": true,
            "value": "6W3on0nN3Gmmij5S",
            "mode": "list",
            "cachedResultName": "Data Id",
            "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
          },
          "columns": {
            "mappingMode": "defineBelow",
            "value": {
              "Short_Id": "={{$json.data.substring(3)}}",
              "Full_Id": "={{ $json.data }}",
              "Url": "=https://distrikwania.com/data/{{ $json.data }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "id": "Short_Id",
                "displayName": "Short_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Full_Id",
                "displayName": "Full_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Url",
                "displayName": "Url",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {}
        },
        "type": "n8n-nodes-base.dataTable",
        "typeVersion": 1,
        "position": [
          2016,
          288
        ],
        "id": "310a188f-79f3-4a5b-8096-a8f6d19dd13b",
        "name": "a20",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1920,
          240
        ],
        "typeVersion": 1,
        "id": "4dea9094-9011-49f4-869d-f56923e80a72",
        "name": "Sticky Note25"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
          "sendQuery": true,
          "queryParameters": {
            "parameters": [
              {
                "name": "File Name",
                "value": "=Index.html"
              },
              {
                "name": "Parent Folder",
                "value": "={{ $('a1').item.json.data_web.user.id.folder }}"
              }
            ]
          },
          "sendBody": true,
          "contentType": "raw",
          "rawContentType": "=text/html; charset=utf-8",
          "body": "={{ $json.html }}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          1776,
          288
        ],
        "id": "f068dd6e-4cde-47ee-b4f3-d970b3d20798",
        "name": "a19",
        "alwaysOutputData": false,
        "executeOnce": false,
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tool Uploud Kode HTML\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1680,
          240
        ],
        "typeVersion": 1,
        "id": "f93b1276-3c61-488f-95ca-a6b6cf36ccac",
        "name": "Sticky Note24"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "7e80eca0-0f2d-4e97-a821-bc7a4b1b0f5f",
                "name": "html",
                "value": "=<!doctype html>\n<html lang=\"id\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title></title>\n  <link rel=\"stylesheet\" href=\"{{ $json.css }}\">\n  <script type=\"module\" src=\"{{ $json.script }}\"></script>\n</head>\n<body>\n</body>\n</html>",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          1520,
          288
        ],
        "id": "7af624fa-1fa7-4413-a58d-e79b79c1a113",
        "name": "a18",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Kode HTML Web",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1440,
          240
        ],
        "typeVersion": 1,
        "id": "8cb94d77-e3c8-4cdb-bd74-86beb3ab19ff",
        "name": "Sticky Note41"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "e74cefab-5944-4e0c-a432-af5c939ca70e",
                "name": "css",
                "value": "=https://distrikwania.com/css/{{ $('a4').item.json.Short_Id }}",
                "type": "string"
              },
              {
                "id": "e5819852-8057-473e-82a4-c245ceae9dad",
                "name": "script",
                "value": "=https://distrikwania.com/js/{{ $json.Short_Id }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          1280,
          288
        ],
        "id": "feaf8c31-c9ce-4af1-afdd-39ee3176e548",
        "name": "a17",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Link CSS Dan JS",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1200,
          240
        ],
        "typeVersion": 1,
        "id": "55adf59b-40d6-4b6d-9082-8fe4bf6b5ed8",
        "name": "Sticky Note40"
      },
      {
        "parameters": {
          "dataTableId": {
            "__rl": true,
            "value": "6W3on0nN3Gmmij5S",
            "mode": "list",
            "cachedResultName": "Data Id",
            "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
          },
          "columns": {
            "mappingMode": "defineBelow",
            "value": {
              "Short_Id": "={{$json.data.substring(3)}}",
              "Full_Id": "={{ $json.data }}",
              "Url": "=https://distrikwania.com/js/{{ $json.data }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "id": "Short_Id",
                "displayName": "Short_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Full_Id",
                "displayName": "Full_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Url",
                "displayName": "Url",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {}
        },
        "type": "n8n-nodes-base.dataTable",
        "typeVersion": 1,
        "position": [
          1056,
          288
        ],
        "id": "5088466f-5f14-4a85-8069-2cb0161a311d",
        "name": "a16",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          960,
          240
        ],
        "typeVersion": 1,
        "id": "f5e97d03-9ee0-4398-8043-d457623d43c3",
        "name": "Sticky Note23"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
          "sendQuery": true,
          "queryParameters": {
            "parameters": [
              {
                "name": "File Name",
                "value": "={{ $json[\"Nama File\"] }}"
              },
              {
                "name": "Parent Folder",
                "value": "={{ $json['Lokasi File'] }}"
              }
            ]
          },
          "sendBody": true,
          "contentType": "raw",
          "rawContentType": "=text/js; charset=utf-8",
          "body": "={{ $json.script.main.js }}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          816,
          288
        ],
        "id": "ce9fd78c-8a9f-4dee-ae11-494f3a33b4f6",
        "name": "a15",
        "alwaysOutputData": false,
        "executeOnce": false,
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tool Uploud Kode JS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          720,
          240
        ],
        "typeVersion": 1,
        "id": "3fa6affd-a102-4a8f-a7c3-f1620f1e1602",
        "name": "Sticky Note22"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "c04bdd4f-4187-4ea9-8452-73b24ce88d26",
                "name": "Nama File",
                "value": "Script.Js",
                "type": "string"
              },
              {
                "id": "b0ad9943-1c44-4bed-971a-28fa72b37fed",
                "name": "Lokasi File",
                "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
                "type": "string"
              },
              {
                "id": "169c5718-3507-47bc-b17e-2f99def03107",
                "name": "script.main.js",
                "value": "={{ $json.url.join('\\n') }}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  renderTemplate();            \n  initViewMap();                \n  initDecryptionVariables();    \n  initBVariable();              \n  loadOnce(true); \n  headConstants();\n  bodyConstants();  \n  setHeaderData();              \n  updateCreateSendButton();     \n});\nwindow.toggleEditMode=toggleEditMode;\nwindow.saveChanges=saveChanges;\nwindow.cancelEdit=cancelEdit;\nwindow.uploadFiles=uploadFiles;\nwindow.confirmCreateAndSend=confirmCreateAndSend;\nwindow.confirmDeleteAll=confirmDeleteAll;\nwindow.handleFileSelect=handleFileSelect;\nwindow.handleDragOver=handleDragOver;\nwindow.handleDragLeave=handleDragLeave;\nwindow.handleDrop=handleDrop;\nwindow.checkStatusAndDisableButtons=checkStatusAndDisableButtons;\nwindow.addEventListener('dataReady', function() {\n  if (typeof initViewMap === 'function') {\n    initViewMap();           \n  }\n  if (typeof setHeaderData === 'function') {\n    setHeaderData();          \n  }\n  if (typeof bodyConstants === 'function') {\n    bodyConstants();       \n  }\n  if (typeof editConstants === 'function') {\n    editConstants();       \n  }\n  if (typeof updateCreateSendButton === 'function') {\n    updateCreateSendButton();\n  }\n});",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          544,
          288
        ],
        "id": "1d445bf8-278c-4c67-95ca-0ee39111b24c",
        "name": "a14",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Main Kode JS",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          480,
          240
        ],
        "typeVersion": 1,
        "id": "28547525-9975-442c-b5d6-f4804e8cd5a5",
        "name": "Sticky Note39"
      },
      {
        "parameters": {
          "fieldsToAggregate": {
            "fieldToAggregate": [
              {
                "fieldToAggregate": "url"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.aggregate",
        "typeVersion": 1,
        "position": [
          304,
          288
        ],
        "id": "3e5b6f2d-9701-448f-8dba-3011d5ab6355",
        "name": "a13"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "e5819852-8057-473e-82a4-c245ceae9dad",
                "name": "url",
                "value": "=import \"https://distrikwania.com/js/{{ $json.data }}\";",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          80,
          288
        ],
        "id": "e998b95a-25fb-427b-8d4e-18dd64883855",
        "name": "a12",
        "notesInFlow": true
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
          "sendQuery": true,
          "queryParameters": {
            "parameters": [
              {
                "name": "File Name",
                "value": "={{ $json[\"Nama File\"] }}"
              },
              {
                "name": "Parent Folder",
                "value": "={{ $json['Lokasi File'] }}"
              }
            ]
          },
          "sendBody": true,
          "contentType": "raw",
          "rawContentType": "=text/js; charset=utf-8",
          "body": "={{ $json.script.js }}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          -128,
          288
        ],
        "id": "9d302381-40d1-45d5-8d13-83422d1221f1",
        "name": "a11",
        "alwaysOutputData": false,
        "executeOnce": false,
        "notesInFlow": true
      },
      {
        "parameters": {
          "fieldToSplitOut": "script",
          "include": "selectedOtherFields",
          "fieldsToInclude": "Lokasi File, Nama File",
          "options": {}
        },
        "type": "n8n-nodes-base.splitOut",
        "typeVersion": 1,
        "position": [
          2368,
          48
        ],
        "id": "c23d1694-d0fb-4622-9dd3-6f0ce1ca8e5b",
        "name": "a10"
      },
      {
        "parameters": {
          "content": "### Join Kode JS Web",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          240,
          240
        ],
        "typeVersion": 1,
        "id": "9fc846fb-13ce-4e5f-b3d5-7897a509cdb3",
        "name": "Sticky Note38"
      },
      {
        "parameters": {
          "content": "### Format import Kode JS Web",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          0,
          240
        ],
        "typeVersion": 1,
        "id": "3c2a2c72-499c-42a0-aaab-c9000584b14e",
        "name": "Sticky Note37"
      },
      {
        "parameters": {
          "content": "### Tool Uploud Kode JS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -240,
          240
        ],
        "typeVersion": 1,
        "id": "8f196390-6852-4b57-ac5e-71ff3a2090e3",
        "name": "Sticky Note21"
      },
      {
        "parameters": {
          "content": "### Split Out Kode JS ",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2304,
          0
        ],
        "typeVersion": 1,
        "id": "e31afd50-1806-47d0-b348-512dc056d6db",
        "name": "Sticky Note36"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "c04bdd4f-4187-4ea9-8452-73b24ce88d26",
                "name": "Nama File",
                "value": "Script.Js",
                "type": "string"
              },
              {
                "id": "b0ad9943-1c44-4bed-971a-28fa72b37fed",
                "name": "Lokasi File",
                "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
                "type": "string"
              },
              {
                "id": "1df4e9d1-f6ef-41a2-87bc-f7a3faeae4e9",
                "name": "script.cancelEdit.js",
                "value": "=function cancelEdit(){renderView(lastObj||{}); if(editMode) toggleEditMode();}\nwindow.cancelEdit = cancelEdit;\n// Fungsi: cancelEdit (CancelEdit)\n// Fungsi ini digunakan untuk membatalkan perubahan yang sedang diedit dan kembali ke tampilan awal\n// Nama fungsi: CancelEdit\n// Singkatan: cEd\n",
                "type": "string"
              },
              {
                "id": "9950bbfd-eb6b-4494-b33c-0bea6fee6f32",
                "name": "script.checkStatusAndDisableButtons.js",
                "value": "=function checkStatusAndDisableButtons() {\n  const status = getData('status');\n  const isLetterSent = status.toLowerCase().includes('terkirim');\n  if (isLetterSent) {\n    disableAllButtons();\n    showStatusMessage('Surat telah terkirim');\n  } else {\n    enableAllButtons();\n    hideStatusMessage();\n    setTimeout(() => {\n      const editBtn = document.getElementById('editBtn');\n      if (editBtn) {\n        editBtn.disabled = false;\n        editBtn.classList.remove('disabled');\n        editBtn.onclick = toggleEditMode;\n      }\n    }, 10);\n  }\n}\n// Fungsi: checkStatusAndDisableButtons (CheckStatusAndDisableButtons)\n// Fungsi ini digunakan untuk memeriksa status dan menonaktifkan tombol-tombol jika surat telah dikirim\n// Nama fungsi: CheckStatusAndDisableButtons\n// Singkatan: cSD\n\nwindow.checkStatusAndDisableButtons = checkStatusAndDisableButtons;",
                "type": "string"
              },
              {
                "id": "20ee595f-45af-4e56-9232-ad390d8ec419",
                "name": "script.confirmCreateAndSend.js",
                "value": "=async function confirmCreateAndSend(){\n  if(!validateApplicantData()){\n    await showModal({ icon:'‚ö†Ô∏è', title:'Data Pemohon Belum Lengkap', message:'Pastikan semua data pemohon telah diisi dengan benar dan sesuai dengan pilihan yang tersedia untuk Jenis Kelamin, Status Perkawinan, dan Kelurahan/Kampung.', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n    return;\n  }\n  const docs = getData('dokumen');\n  if(!docs || docs.length === 0){\n    await showModal({ icon:'‚ö†Ô∏è', title:'Belum Ada File yang Dilampirkan', message:'Silakan upload minimal satu file pendukung sebelum membuat surat.', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n    return;\n  }\n  const ok = await confirmModal('Konfirmasi Pembuatan Surat','Dengan menekan <b>Setujui & Proses</b>, sistem akan membuat dokumen berdasarkan data saat ini dan mengirimkannya.',{okLabel:'Setujui & Proses',cancelLabel:'Tinjau Kembali',icon:'üì®'});\n  if(!ok) return;\n  await generateAndSendLetter();\n}\n\n// Fungsi: confirmCreateAndSend (ConfirmCreateAndSend)\n// Fungsi ini digunakan untuk mengkonfirmasi pembuatan dan pengiriman surat\n// Nama fungsi: ConfirmCreateAndSend\n// Singkatan: cCS\n\nwindow.confirmCreateAndSend = confirmCreateAndSend;",
                "type": "string"
              },
              {
                "id": "169c5718-3507-47bc-b17e-2f99def03107",
                "name": "script.confirmDeleteAll.js",
                "value": "=async function confirmDeleteAll(){\n  const ok = await showModal({ icon:'üóëÔ∏è',title:'Konfirmasi Penghapusan', message:'Tindakan ini akan <b>menghapus seluruh data dan surat</b> terkait referensi ini. Lanjutkan?', variant:'confirm', buttons:[ {label:'Batal',variant:'secondary',value:false}, {label:'Ya, Hapus Semua',danger:true,value:true} ] });\n  if(!ok) return; await deleteLetterAndData();\n}\n// Fungsi: confirmDeleteAll (ConfirmDeleteAll)\n// Fungsi ini digunakan untuk mengkonfirmasi penghapusan semua data dan surat\n// Nama fungsi: ConfirmDeleteAll\n// Singkatan: cDA\n\nwindow.confirmDeleteAll = confirmDeleteAll;",
                "type": "string"
              },
              {
                "id": "6cb67047-924d-4dea-a8b7-48d467240b8c",
                "name": "script.confirmDeleteDocs.js",
                "value": "=function confirmDeleteDocs(docs){\n  if(!docs||!docs.length) return;\n  confirmModal('Hapus Dokumen','Apakah Anda yakin ingin menghapus dokumen yang dipilih?').then(ok=>{\n    if(ok) deleteDocs(docs);\n  });\n}\n\n// Fungsi: confirmDeleteDocs1 (ConfirmDeleteDocs)\n// Fungsi ini digunakan untuk mengkonfirmasi penghapusan dokumen sebelum benar-benar dihapus\n// Nama fungsi: ConfirmDeleteDocs\n// Singkatan: cDD\n\nwindow.confirmDeleteDocs = confirmDeleteDocs;\n\n\n// async function confirmDeleteDocs1(docs=[]){\n//   if(!docs.length) return;\n//   const listHtml=docs.map(d=>{ const sizeTxt = d.size!=null ? humanSize(d.size) : '‚Äî'; return `üìÑ <b>${toStr(d.nama,'(tanpa nama)')}</b><br>Ukuran: ${sizeTxt}${d.tipe?(' ‚Ä¢ '+d.tipe):''}<br>ID: <span class=\"mono\">${toStr(d.id,'‚Äî')}</span>`; }).join('<hr style=\"border:0;border-top:1px solid rgba(148,163,184,.25);margin:8px 0\">');\n//   const ok = await showModal({ icon:'üóÇÔ∏è', title:'Konfirmasi Penghapusan Dokumen', message:`Dokumen berikut akan dihapus dari sistem:<br><br>${listHtml}<br><br>Tindakan ini tidak dapat dibatalkan. Lanjutkan?`, variant:'confirm', buttons:[ {label:'Batal',variant:'secondary',value:false}, {label:'Hapus Dokumen',danger:true,value:true} ] });\n//   if(!ok) return; await deleteDocumentsByFileIds(docs);\n// }\n\n// // Fungsi: confirmDeleteDocs (ConfirmDeleteDocuments)\n// // Fungsi ini digunakan untuk mengkonfirmasi penghapusan dokumen dengan detail yang lebih lengkap\n// // Nama fungsi: ConfirmDeleteDocuments\n// // Singkatan: cDD\n\n// window.confirmDeleteDocs = confirmDeleteDocs;",
                "type": "string"
              },
              {
                "id": "eed3f371-5a6e-42b0-bf7e-f8e188d2d232",
                "name": "script.confirmModal.js",
                "value": "=function confirmModal(title,message,{okLabel='Lanjutkan',cancelLabel='Batal',icon='‚ùì',danger=false}={}){\n  return showModal({\n    icon,title,message,variant:'confirm',\n    buttons:[\n      {label:cancelLabel,variant:'secondary',value:false},\n      {label:okLabel,primary:!danger,danger:danger,value:true}\n    ]\n  });\n}\n// Fungsi: confirmModal (ConfirmModal)\n// Fungsi ini digunakan untuk menampilkan modal konfirmasi dengan tombol ya/tidak\n// Nama fungsi: ConfirmModal\n// Singkatan: cMd\n\nwindow.confirmModal = confirmModal;",
                "type": "string"
              },
              {
                "id": "91a7d0fb-23e8-4e5b-a880-56b033573413",
                "name": "script.deleteDocs.js",
                "value": "=async function deleteDocs(docs){\n  const lastObj = getData('data')\n  if(!docs||!docs.length) return;\n  const ids = docs.map(d=>d.file_id).filter(Boolean);\n  if(!ids.length) return;\n  try{\n    showLoading(true,'Menghapus dokumen terpilih‚Ä¶');\n    const docDetails = docs.map(doc => ({\n      id: doc.file_id,\n      nama: doc.nama,\n      size: doc.size,\n      tipe: doc.tipe,\n    }));\n    const rawData = {\n      new_data: lastObj, \n      document_details: docDetails\n    };\n    await sendJSON('DELETE_DOCS', rawData);\n    await loadOnce(false);\n  }catch(e){\n    await loadOnce(false);\n    await showModal({\n      icon:'‚ö†Ô∏è',\n      title:'Gagal Menghapus Dokumen',\n      message:'Terjadi kendala saat menghapus dokumen.<br><span class=\"mono\">'+(e.message||e)+'</span>',\n      variant:'danger',\n      buttons:[{label:'Tutup',variant:'secondary',value:true}]\n    });\n  }finally{\n    showLoading(false);\n  }\n}\n// Fungsi: deleteDocs (DeleteDocuments)\n// Fungsi ini digunakan untuk menghapus dokumen dari server berdasarkan ID dengan pendekatan baru\n// Nama fungsi: DeleteDocuments\n// Singkatan: dDc\n\nwindow.deleteDocs = deleteDocs;",
                "type": "string"
              },
              {
                "id": "c9133d23-47d5-4248-a7a0-7bb11899e8ce",
                "name": "script.deleteLetterAndData.js",
                "value": "=async function deleteLetterAndData(){\n  try{\n    const lastObj = getData('data');\n    showLoading(true,'Menghapus surat dan seluruh data terkait‚Ä¶');\n    const rawData = {\n      new_data: lastObj,  \n    };\n    await sendJSON('DELETE_ALL', rawData);\n    await loadOnce(false);\n    await successModal('Penghapusan Berhasil','Surat dan seluruh data terkait telah dihapus dari sistem.');\n  }catch(e){\n    await loadOnce(false);\n    await showModal({ icon:'‚ö†Ô∏è', title:'Gagal Menghapus', message:'Terjadi kendala saat menghapus surat atau data.<br><span class=\"mono\">'+(e.message||e)+'</span>', variant:'danger', buttons:[{label:'Tutup',variant:'secondary',value:true}] });\n  }finally{ showLoading(false); }\n}\n// Fungsi: deleteLetterAndData (DeleteLetterAndData)\n// Fungsi ini digunakan untuk menghapus surat dan semua data terkait dari server\n// Nama fungsi: DeleteLetterAndData\n// Singkatan: dLD\n\nwindow.deleteLetterAndData = deleteLetterAndData;",
                "type": "string"
              },
              {
                "id": "560704d5-b1df-4cc1-8c6c-9e2c5b6da0b1",
                "name": "script.disableAllButtons.js",
                "value": "=function disableAllButtons() {\n  if (!window.originalButtonStates) {\n    window.originalButtonStates = new Map();\n  }\n  const specificButtons = [\n    'createSendBtn',    \n    'editBtn',          \n    'uploadBtn'        \n  ];\n  specificButtons.forEach(buttonId => {\n    const button = document.getElementById(buttonId);\n    if (button) {\n      window.originalButtonStates.set(buttonId, {\n        disabled: button.disabled,\n        onclick: button.onclick\n      });\n      button.disabled = true;\n      button.classList.add('disabled');\n    }\n  });\n  const noteElement = document.getElementById('submitNote');\n  if (noteElement) {\n    noteElement.style.display = 'none';\n  }\n  const functionalButtons = document.querySelectorAll('button[onclick], .btn[onclick]');\n  functionalButtons.forEach((button, index) => {\n    const buttonKey = `functional_${index}`;\n    window.originalButtonStates.set(buttonKey, {\n      disabled: button.disabled,\n      onclick: button.onclick,\n      element: button\n    });\n    button.disabled = true;\n    button.classList.add('disabled');\n    button.onclick = function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      showModal({\n        icon: 'üîí',\n        title: 'Aksi Tidak Tersedia',\n        message: 'Surat telah terkirim. Semua tombol telah dinonaktifkan.',\n        variant: 'info',\n        buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n      });\n      return false;\n    };\n  });\n  const fileInput = document.getElementById('fileInput');\n  if (fileInput) {\n    window.originalButtonStates.set('fileInput', {\n      disabled: fileInput.disabled\n    });\n    fileInput.disabled = true;\n  }\n  const uploadContainer = document.querySelector('.file-upload-container');\n  if (uploadContainer) {\n    window.originalButtonStates.set('uploadContainer', {\n      pointerEvents: uploadContainer.style.pointerEvents,\n      opacity: uploadContainer.style.opacity,\n      ondragover: uploadContainer.ondragover,\n      ondragleave: uploadContainer.ondragleave,\n      ondrop: uploadContainer.ondrop\n    });\n    uploadContainer.style.pointerEvents = 'none';\n    uploadContainer.style.opacity = '0.5';\n    uploadContainer.ondragover = null;\n    uploadContainer.ondragleave = null;\n    uploadContainer.ondrop = null;\n  }\n  if (editMode) {\n    document.body.classList.remove('edit-mode');\n    editMode = false;\n  }\n  window.systemDisabled = true;\n}\n// Fungsi: disableAllButtons (DisableAllButtons)\n// Fungsi ini digunakan untuk menonaktifkan semua tombol saat surat telah dikirim\n// Nama fungsi: DisableAllButtons\n// Singkatan: dAB\n\nwindow.disableAllButtons = disableAllButtons;",
                "type": "string"
              },
              {
                "id": "a4cddc7c-d79b-4fbd-9db8-01b3cafda898",
                "name": "script.dnk.js",
                "value": "=function dnk(A) {\n    if (!A) {\n      console.error('Data harus disediakan');\n      return null;\n    }\n    try {\n      const a = A.split('_');\n      if (a.length < 2) {\n        console.error('Format data tidak valid');\n        return null;\n      }\n      const b = a.slice(1).join('_');\n      let c = atob(b);\n      try {\n        return JSON.parse(c);\n      } catch (e) {\n        return c;\n      }\n    } catch (e) {\n      console.error('Dekripsi tanpa key gagal:', e);\n      return null;\n    }\n  };\n\n// Fungsi: dnk (DecriptNoKey)\n// Fungsi ini digunakan untuk mendekripsi data tanpa menggunakan kunci\n// Nama fungsi: DecriptNoKey\n// Singkatan: dnk\n\nwindow.dnk = dnk;",
                "type": "string"
              },
              {
                "id": "e6ee7e52-14d1-4616-803d-21803f628f5b",
                "name": "script.dwk.js",
                "value": "=function dwk(A, B) {\n    if (!A || !B) {\n      return null;\n    }\n    const a = A.split('_');\n    if (a.length < 3) {\n      return null;\n    }\n    const b = a[2];\n\n    let c = [];\n    for (let i = 0; i < b.length; i += 2) {\n      c.push(parseInt(b.substr(i, 2), 16));\n    }\n\n    let d = '';\n    for (let i = 0; i < c.length; i++) {\n      let e = B.charCodeAt(i % B.length);\n      let f = c[i] ^ e;\n      d += String.fromCharCode(f);\n    }\n\n    try {\n      const g = atob(d);\n      try {\n        return JSON.parse(g);\n      } catch (e) {\n        return g;\n      }\n    } catch (e) {\n      return null;\n    }\n  };\n\n// Fungsi: dwk (DecriptWithKey)\n// Fungsi ini digunakan untuk mendekripsi data menggunakan kunci yang disediakan\n// Nama fungsi: DecriptWithKey\n// Singkatan: dwk\n\nwindow.dwk = dwk;",
                "type": "string"
              },
              {
                "id": "30cc1945-10c4-4623-9b70-fa468bcc6c7b",
                "name": "script.enableAllButtons.js",
                "value": "=function enableAllButtons() {\n  if (window.originalButtonStates) {\n    const specificButtons = ['createSendBtn', 'editBtn', 'uploadBtn'];\n    specificButtons.forEach(buttonId => {\n      const button = document.getElementById(buttonId);\n      if (button) {\n        const originalState = window.originalButtonStates.get(buttonId);\n        if (originalState) {\n          button.disabled = originalState.disabled || false;\n          button.onclick = originalState.onclick;\n          button.classList.remove('disabled');\n        } else {\n          button.disabled = false;\n          button.classList.remove('disabled');\n        }\n      }\n    });\n    for (const [key, originalState] of window.originalButtonStates) {\n      if (key.startsWith('functional_') && originalState.element) {\n        const button = originalState.element;\n        button.disabled = originalState.disabled || false;\n        button.onclick = originalState.onclick;\n        button.classList.remove('disabled');\n      }\n    }\n    const fileInput = document.getElementById('fileInput');\n    if (fileInput) {\n      const originalState = window.originalButtonStates.get('fileInput');\n      if (originalState) {\n        fileInput.disabled = originalState.disabled || false;\n      } else {\n        fileInput.disabled = false;\n      }\n    }\n    const uploadContainer = document.querySelector('.file-upload-container');\n    if (uploadContainer) {\n      const originalState = window.originalButtonStates.get('uploadContainer');\n      if (originalState) {\n        uploadContainer.style.pointerEvents = originalState.pointerEvents || '';\n        uploadContainer.style.opacity = originalState.opacity || '';\n        uploadContainer.ondragover = originalState.ondragover;\n        uploadContainer.ondragleave = originalState.ondragleave;\n        uploadContainer.ondrop = originalState.ondrop;\n      } else {\n        uploadContainer.style.pointerEvents = '';\n        uploadContainer.style.opacity = '';\n        uploadContainer.ondragover = handleDragOver;\n        uploadContainer.ondragleave = handleDragLeave;\n        uploadContainer.ondrop = handleDrop;\n      }\n    }\n    window.originalButtonStates.clear();\n  } else {\n    const allButtons = document.querySelectorAll('button, .btn');\n    allButtons.forEach(button => {\n      if (button.tagName === 'BUTTON') {\n        button.disabled = false;\n        button.classList.remove('disabled');\n      }\n    });\n    const fileInput = document.getElementById('fileInput');\n    if (fileInput) {\n      fileInput.disabled = false;\n    }\n    const uploadContainer = document.querySelector('.file-upload-container');\n    if (uploadContainer) {\n      uploadContainer.style.pointerEvents = '';\n      uploadContainer.style.opacity = '';\n      uploadContainer.ondragover = handleDragOver;\n      uploadContainer.ondragleave = handleDragLeave;\n      uploadContainer.ondrop = handleDrop;\n    }\n  }\n  window.systemDisabled = false;\n  updateCreateSendButton();\n  refreshPendingFilesUI();\n  const editBtn = document.getElementById('editBtn');\n  if (editBtn) {\n    editBtn.disabled = false;\n    editBtn.classList.remove('disabled');\n    if (!editBtn.onclick) {\n      editBtn.onclick = toggleEditMode;\n    }\n  }\n}\n// Fungsi: enableAllButtons (EnableAllButtons)\n// Fungsi ini digunakan untuk mengaktifkan kembali semua tombol setelah sebelumnya dinonaktifkan\n// Nama fungsi: EnableAllButtons\n// Singkatan: eAB\n\nwindow.enableAllButtons = enableAllButtons;",
                "type": "string"
              },
              {
                "id": "838c2113-b8f7-4d31-9761-32fbab7bf109",
                "name": "script.enk.js",
                "value": "=function enk(A) {\n    let a = btoa(JSON.stringify(A));\n    const b = (Math.random() + 1).toString(36).substring(2, 8);\n    const c = b + \"_\" + a;\n    return c;\n  };\n\n// Fungsi: enk (EncriptNoKey)\n// Fungsi ini digunakan untuk mengenkripsi data tanpa menggunakan kunci\n// Nama fungsi: EncriptNoKey\n// Singkatan: enk\n\nwindow.enk = enk;",
                "type": "string"
              },
              {
                "id": "e57e5cb7-6b56-467c-ab67-b7ef5eac4bc0",
                "name": "script.ewk.js",
                "value": "=function ewk(A, B) {\n    let a = btoa(JSON.stringify(A));\n    let b = [];\n    for (let i = 0; i < a.length; i++) {\n      let c = a.charCodeAt(i);\n      let d = B.charCodeAt(i % B.length);\n      b.push(c ^ d);\n    }\n    let e = b.map(v => v.toString(16).padStart(2, \"0\")).join(\"\");\n    const f = (Math.random() + 1).toString(36).substring(2, 8);\n    const g = f + \"_\" + B.length.toString(16) + \"_\" + e;\n    return g;\n  };\n\n// Fungsi: ewk (EncriptWithKey)\n// Fungsi ini digunakan untuk mengenkripsi data menggunakan kunci yang disediakan\n// Nama fungsi: EncriptWithKey\n// Singkatan: ewk\n\nwindow.ewk = ewk;",
                "type": "string"
              },
              {
                "id": "3c9d4d8d-b559-4cda-886c-00050b2286d4",
                "name": "script.formatProperCase.js",
                "value": "=// Helper function to format text with proper capitalization (only first letter capitalized)\nfunction formatProperCase(text) {\n  if (!text) return '';\n  return text.toLowerCase().replace(/\\b\\w/g, letter => letter.toUpperCase());\n}\n// Fungsi: formatProperCase (FormatProperCase)\n// Fungsi ini digunakan untuk memformat teks dengan kapitalisasi yang benar (hanya huruf pertama yang besar)\n// Nama fungsi: FormatProperCase\n// Singkatan: fPC\n\nwindow.formatProperCase = formatProperCase;",
                "type": "string"
              },
              {
                "id": "26a60d97-3971-4d8a-a01e-ca14acaabaa3",
                "name": "script.generateAndSendLetter.js",
                "value": "=async function generateAndSendLetter(){\n  try{\n    const lastObj = getData('data');\n    if(editMode) await saveChanges();\n    showLoading(true,'Memproses pembuatan surat dan pengiriman data‚Ä¶');\n    // Siapkan struktur data sebelum dienkripsi\n    const rawData = {\n      new_data: lastObj, \n    };\n    await sendJSON('CREATE_AND_SEND', rawData);\n    loadOnce(false);\n\n    await successModal('Surat Berhasil Dibuat','Data dan surat telah dikirim untuk verifikasi.');\n  }catch(e){\n\n    await showModal({icon:'‚ö†Ô∏è',title:'Gagal Membuat Surat',message:'Terjadi kendala saat membuat atau mengirim surat.<br><span class=\"mono\">'+(e.message||e)+'</span>',variant:'danger',buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n  }finally{ showLoading(false); }\n}\n\n// Fungsi: generateAndSendLetter (GenerateAndSendLetter)\n// Fungsi ini digunakan untuk membuat dan mengirim surat ke server\n// Nama fungsi: GenerateAndSendLetter\n// Singkatan: gSL\n\nwindow.generateAndSendLetter = generateAndSendLetter;",
                "type": "string"
              },
              {
                "id": "6e193a5d-8acb-4d78-9806-d29d878e90bd",
                "name": "script.getData.js",
                "value": "=// Fungsi TUNGGAL untuk mengambil semua jenis data dari lastJSON\nfunction getData(request) {\n  switch(request) {\n\n    case 'data':\n      return window.a;\n\n    case 'data_web':\n      return window.a.data_web;\n\n    case 'user':\n      return window.a.data_web.user;\n    \n    case 'status':\n      return window.a.data_web.user.status;\n\n    case 'tanggal':\n      return window.a.data_web.user.tanggal;\n\n    case 'data_surat':\n      return window.a.data_web.user.data_surat;\n      \n    case 'pemohon':\n      return window.a.data_web.user.data_surat.pemohon;\n\n    case 'perihal':\n      return window.a.data_web.user.data_surat.perihal;\n\n    case 'dokumen':\n      return window.a.data_web.user.data_surat.dokumen;\n\n    case 'whatsapp':\n      return window.a.data_web.user.whatsapp;\n\n    case 'logo':\n      return window.a.data_web.user.logo;\n\n    case 'tombol':\n      return window.a.data_web.user.tombol;\n\n    case 'admin2':\n      return window.a.data_web.admin2;\n\n    case 'nomor_surat':\n      return window.a.data_web.admin2.nomor_surat;\n\n    case 'kop':\n      return window.a.data_web.admin2.data_surat.kop;\n\n\n    default:\n      console.warn(`Permintaan data '${request}' tidak dikenali`);\n      return null;\n  }\n}\n\n// Ekspos fungsi ke window\nwindow.getData = getData;",
                "type": "string"
              },
              {
                "id": "683c1260-bb87-4d7d-84cd-7060128ff1ae",
                "name": "script.getWebhookUrl.js",
                "value": "=function getWebhookUrl(action){\n  const tombol = getData('tombol');\n  if (tombol) {\n    switch(action) {\n      case 'CREATE_AND_SEND':\n        return tombol.kirim_surat || null;\n      case 'UPDATE_ONLY':\n        return tombol.edit_data || null;\n      case 'UPLOAD_FILES':\n        return tombol.kirim_file || null;\n      case 'DELETE_DOCS':\n        return tombol.hapus_file || null;\n      case 'DELETE_ALL':\n        return tombol.hapus_surat || null;\n      default:\n        if (tombol.kirim_surat) return tombol.kirim_surat;\n        if (tombol.edit_data) return tombol.edit_data;\n        if (tombol.kirim_file) return tombol.kirim_file;\n        if (tombol.hapus_file) return tombol.hapus_file;\n        if (tombol.hapus_surat) return tombol.hapus_surat;\n    }\n  }\n  return null;\n}\n\n// Fungsi: getWebhookUrl (GetWebhookUrl)\n// Fungsi ini digunakan untuk mendapatkan URL webhook berdasarkan aksi yang diminta\n// Nama fungsi: GetWebhookUrl\n// Singkatan: gWU\n\nwindow.getWebhookUrl = getWebhookUrl;",
                "type": "string"
              },
              {
                "id": "f04bf3ba-236f-4846-b029-762bb18ad439",
                "name": "script.handleDragLeave.js",
                "value": "=function handleDragLeave(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='';ev.currentTarget.style.background='';}\n\n// Fungsi: handleDragLeave (HandleDragLeave)\n// Fungsi ini digunakan untuk menangani event saat file didrag leave dari area upload\n// Nama fungsi: HandleDragLeave\n// Singkatan: hDL\n\nwindow.handleDragLeave = handleDragLeave;",
                "type": "string"
              },
              {
                "id": "a58866bd-4819-4757-a196-97bab619db25",
                "name": "script.handleDragOver.js",
                "value": "=function handleDragOver(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='rgba(56,189,248,.6)';ev.currentTarget.style.background='rgba(56,189,248,.06)';}\n\n// Fungsi: handleDragOver (HandleDragOver)\n// Fungsi ini digunakan untuk menangani event saat file didrag over ke area upload\n// Nama fungsi: HandleDragOver\n// Singkatan: hDO\n\nwindow.handleDragOver = handleDragOver;",
                "type": "string"
              },
              {
                "id": "fd260616-cc93-4ba8-a453-fd7a37fad676",
                "name": "script.handleDrop.js",
                "value": "=function handleDrop(ev){ev.preventDefault();ev.stopPropagation();ev.currentTarget.style.borderColor='';ev.currentTarget.style.background='';pendingFiles=Array.from(ev.dataTransfer.files||[]);refreshPendingFilesUI();}\n\n// Fungsi: handleDrop (HandleDrop)\n// Fungsi ini digunakan untuk menangani event saat file didrop ke area upload\n// Nama fungsi: HandleDrop\n// Singkatan: hDr\n\nwindow.handleDrop = handleDrop;",
                "type": "string"
              },
              {
                "id": "fca57e87-4414-469f-8fd7-4231d43bbab4",
                "name": "script.handleFileInput.js",
                "value": "=function handleFileInput(e){\n  const files=e.target.files;\n  if(!files||!files.length) return;\n  pendingFiles.push(...files);\n  renderFiles({dokumen:pendingFiles});\n}\n\n// Fungsi: handleFileInput (HandleFileInput)\n// Fungsi ini digunakan untuk menangani input file dari elemen input file\n// Nama fungsi: HandleFileInput\n// Singkatan: hFI\n\nwindow.handleFileInput = handleFileInput;",
                "type": "string"
              },
              {
                "id": "0f5d72a2-de70-4a74-bf59-30712439ac63",
                "name": "script.handleFileSelect.js",
                "value": "=function handleFileSelect(ev){pendingFiles=Array.from(ev.target.files||[]);refreshPendingFilesUI();}\n\n// Fungsi: handleFileSelect (HandleFileSelect)\n// Fungsi ini digunakan untuk menangani pemilihan file oleh pengguna\n// Nama fungsi: HandleFileSelect\n// Singkatan: hFS\n\nwindow.handleFileSelect = handleFileSelect;",
                "type": "string"
              },
              {
                "id": "02b0c9dc-039c-49bf-9a2f-91312b08ada1",
                "name": "script.handleProgress.js",
                "value": "=function handleProgress(e){\n  if(!e.lengthComputable) return;\n  const percent=Math.round((e.loaded/e.total)*100);\n  elProg.style.display='flex';\n  elProgBar.style.width=percent+'%';\n}\n\n// Fungsi: handleProgress (HandleProgress)\n// Fungsi ini digunakan untuk menangani event kemajuan upload file\n// Nama fungsi: HandleProgress\n// Singkatan: hPr\n\nwindow.handleProgress = handleProgress;",
                "type": "string"
              },
              {
                "id": "4ab061b2-c4d9-489a-bc00-d02e49fa9df1",
                "name": "script.handleProgressEnd.js",
                "value": "=function handleProgressEnd(){\n  elProg.style.display='none';\n}\n\n// Fungsi: handleProgressEnd (HandleProgressEnd)\n// Fungsi ini digunakan untuk menangani akhir dari event kemajuan upload\n// Nama fungsi: HandleProgressEnd\n// Singkatan: hPE\n\nwindow.handleProgressEnd = handleProgressEnd;",
                "type": "string"
              },
              {
                "id": "77cece1b-4325-4d4b-a26c-b2416ea7e822",
                "name": "script.hideStatusMessage.js",
                "value": "=function hideStatusMessage() {\n  const existing = document.getElementById('statusMessage');\n  if (existing) {\n    existing.remove();\n  }\n}\n// Fungsi: hideStatusMessage (HideStatusMessage)\n// Fungsi ini digunakan untuk menyembunyikan pesan status dari antarmuka\n// Nama fungsi: HideStatusMessage\n// Singkatan: hSM\n\nwindow.hideStatusMessage = hideStatusMessage;",
                "type": "string"
              },
              {
                "id": "b70bc7ad-3a57-4b1f-8a43-4058413c1136",
                "name": "script.htmlTemplate.js",
                "value": "=const htmlTemplate = `\n  <div class=\"bg\" id=\"mainContent\"></div>\n\n  <div class=\"wrap\" id=\"mainAppContent\">\n    <div class=\"topbar\">\n      <div class=\"brand\">\n        <img class=\"logo\" id=\"Logo\" src=\"\" alt=\"Logo Pemda\">\n        <div>\n          <div class=\"title\" id=\"brandTitle\" data-id=\"brandTitleText\"></div>\n        </div>\n      </div>\n      <div class=\"pill\" id=\"statusPill\" data-id=\"statusPillText\"></div>\n    </div>\n\n    <section class=\"card\" role=\"region\" aria-label=\"Layanan SKTM\">\n      <header class=\"card-header\">\n        <div class=\"hgroup\" style=\"align-items: center; text-align: center;\">\n          <div style=\"text-align: center; margin-bottom: 20px; width: 100%;\">\n            <div style=\"font-weight: bold; font-size: 16px; margin-bottom: 2px;\" id=\"kopHeader1\"></div>\n            <div style=\"font-weight: bold; font-size: 16px; margin-bottom: 2px;\" id=\"kopHeader2\"></div>\n            <div style=\"font-size: 12px; margin-bottom: 1px;\" id=\"kopHeader3\"></div>\n            <div style=\"font-size: 12px; margin-bottom: 15px;\" id=\"kopHeader4\"></div>\n          </div>\n          <div class=\"h1\" style=\"text-align: center; width: 100%;\" id=\"suratHeader\"></div>\n          <div class=\"h2\" style=\"text-align: center; width: 100%;\" id=\"nomorSuratHeader\"></div>\n        </div>\n      </header>\n\n      <div class=\"\">\n        <div class=\"panel\">\n          <div class=\"stitle\" id=\"stitle\" data-id=\"stitleText\"></div>\n\n          <!-- BAR EDIT -->\n          <div class=\"editbar\">\n            <button class=\"btn ghost\" onclick=\"toggleEditMode()\" id=\"editBtn\" data-id=\"editBtnLabel\"></button>\n            <div class=\"edit-actions\">\n              <button class=\"btn success\" onclick=\"saveChanges()\" data-id=\"saveBtnLabel\"></button>\n              <button class=\"btn danger\" onclick=\"cancelEdit()\" data-id=\"cancelBtnLabel\"></button>\n            </div>\n          </div>\n\n          <div class=\"ident\" aria-label=\"Identitas Pemohon\">\n            <div class=\"lab\" data-id=\"labNama\"></div><div class=\"sep\"></div><div class=\"val\" id=\"nama\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editNama\" data-value=\"editNama\">\n\n            <div class=\"lab\" data-id=\"labNIK\"></div><div class=\"sep\"></div><div class=\"val mono\" id=\"nik\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editNIK\" data-value=\"editNIK\">\n\n            <div class=\"lab\" data-id=\"labTempatTglLahir\"></div><div class=\"sep\"></div><div class=\"val\" id=\"ttl\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editTTL\" data-value=\"editTTL\">\n\n            <div class=\"lab\" data-id=\"labAgama\"></div><div class=\"sep\"></div><div class=\"val\" id=\"agama\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editAgama\" data-value=\"editAgama\">\n\n            <div class=\"lab\" data-id=\"labJenisKelamin\"></div><div class=\"sep\"></div><div class=\"val\" id=\"jenis_kelamin\"></div>\n            <select class=\"edit-field\" id=\"editJenisKelamin\"></select>\n\n            <div class=\"lab\" data-id=\"labStatusPerkawinan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"status_perkawinan\"></div>\n            <select class=\"edit-field\" id=\"editStatusPerkawinan\"></select>\n\n            <div class=\"lab\" data-id=\"labPekerjaan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"pekerjaan\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editPekerjaan\" data-value=\"editPekerjaan\">\n\n            <div class=\"lab\" data-id=\"labAlamat\"></div><div class=\"sep\"></div><div class=\"val\" id=\"alamat\"></div>\n            <textarea class=\"edit-field\" id=\"editAlamat\" rows=\"2\" data-value=\"editAlamat\"></textarea>\n\n            <div class=\"lab\" data-id=\"labKelurahan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kelurahan\"></div>\n            <select class=\"edit-field\" id=\"editKelurahan\"></select>\n\n            <div class=\"lab\" data-id=\"labKecamatan\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kecamatan\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editKecamatan\" data-value=\"editKecamatan\">\n\n            <div class=\"lab\" data-id=\"labKotaKab\"></div><div class=\"sep\"></div><div class=\"val\" id=\"kota_kab\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editKotaKab\" data-value=\"editKotaKab\">\n\n            <div class=\"lab\" data-id=\"labProvinsi\"></div><div class=\"sep\"></div><div class=\"val\" id=\"provinsi\"></div>\n            <input type=\"text\" class=\"edit-field\" id=\"editProvinsi\" data-value=\"editProvinsi\">\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleFile\"></div>\n          <div class=\"callout\" style=\"border-color:rgba(239,68,68,.45);background:rgba(239,68,68,.08);color:#fee2e2\">\n            <span data-id=\"stitleFile1\"></span>\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleFile2\"></div>\n          <div class=\"file-upload-container\" ondragover=\"handleDragOver(event)\" ondragleave=\"handleDragLeave(event)\" ondrop=\"handleDrop(event)\">\n            <input type=\"file\" id=\"fileInput\" accept=\"*\" multiple style=\"display:none\" onchange=\"handleFileSelect(event)\">\n            <button class=\"btn ghost\" onclick=\"document.getElementById('fileInput').click()\" style=\"width:100%;margin-bottom:8px\" data-id=\"stitleFile3\"></button>\n            <div style=\"font-size:11px;color:#9ca3af;text-align:center;margin-bottom:8px\" data-id=\"stitleFile4\"></div>\n            <div id=\"fileInfo\" style=\"display:none\"></div>\n            <div id=\"uploadProgress\" class=\"upload-progress\" style=\"display:none\"><div id=\"uploadProgressBar\" class=\"upload-progress-bar\"></div></div>\n            <button class=\"btn primary\" id=\"uploadBtn\" onclick=\"uploadFiles()\" style=\"width:100%;display:none\" data-id=\"stitleFile5\"></button>\n          </div>\n\n          <div class=\"stitle\" style=\"margin-top:16px\" data-id=\"stitleFile6\"></div>\n          <div class=\"uploaded-files-container\">\n            <div id=\"uploadedFilesList\"><div class=\"no-files-message\" data-id=\"noFilesMessage\"></div></div>\n          </div>\n\n          <div class=\"note\" data-id=\"note\"></div>\n          <br>\n          <aside class=\"\">\n            <div class=\"stitle\" data-id=\"stitleTindakan\"></div>\n            <div class=\"actions\">\n              <button class=\"btn primary\" id=\"createSendBtn\" onclick=\"confirmCreateAndSend()\" data-id=\"createSendBtn\"></button>\n              <button class=\"btn danger\" onclick=\"confirmDeleteAll()\" id=\"deleteAllBtn\" data-id=\"deleteAllBtn\"></button>\n            </div>\n            <div class=\"note\" id=\"submitNote\" style=\"display: none;\" data-id=\"submitNote\"></div>\n\n            <div class=\"stitle\" style=\"margin-top:10px\" data-id=\"stitleRingkasan\"></div>\n            <div class=\"callout\">\n              <div data-id=\"operator\"></div>\n              <div data-id=\"tanggal\"></div>\n              <div data-id=\"referensi\"></div>\n              <div data-id=\"from\"></div>\n            </div>\n          </aside>\n          <footer class=\"card-footer\">\n            <div data-id=\"footer\"></div>\n          </footer>\n        </div>\n      </div>\n    </section>\n  </div>\n\n  <!-- LOADING -->\n  <div class=\"loading-overlay\" id=\"loadingOverlay\" data-id=\"loadingOverlay\" aria-live=\"polite\" aria-busy=\"true\">\n    <div class=\"loading-box\">\n      <div class=\"spinner\" aria-hidden=\"true\"></div>\n      <div class=\"loading-text\" id=\"loadingText\" data-id=\"loadingText\"></div>\n    </div>\n  </div>\n\n  <!-- MODAL -->\n  <div class=\"modal-overlay\" id=\"modalOverlay\" data-id=\"modalOverlay\" role=\"dialog\" aria-modal=\"true\">\n    <div class=\"modal modal--info\" id=\"modalBox\" data-id=\"modalBox\" role=\"document\">\n      <div class=\"modal-header\">\n        <div class=\"modal-icon\" id=\"modalIcon\" data-id=\"modalIcon\"></div>\n        <div class=\"modal-title\" id=\"modalTitle\" data-id=\"modalTitle\"></div>\n      </div>\n      <div class=\"modal-message\" id=\"modalMessage\" data-id=\"modalMessage\"></div>\n      <div class=\"modal-actions\" id=\"modalActions\" data-id=\"modalActions\"></div>\n    </div>\n  </div>\n`;\nfunction renderTemplate() {\n   const targetElement = document.body;\n  if (targetElement) {\n    targetElement.innerHTML = htmlTemplate;\n  }\n}\n// Fungsi: htmlTemplate (HTMLTemplate)\n// Fungsi ini menyimpan template HTML dan menyediakan fungsi untuk merendernya\n// Nama fungsi: HTMLTemplate\n// Singkatan: hTmpl\n\nwindow.htmlTemplate = htmlTemplate;\nwindow.renderTemplate = renderTemplate;",
                "type": "string"
              },
              {
                "id": "a5beaab5-d126-495d-9f6c-5e2a592cd727",
                "name": "script.humanSize.js",
                "value": "=function humanSize(bytes){if(!bytes&&bytes!==0)return null; const u=['B','KB','MB','GB']; let i=0, n=Number(bytes); while(n>=1024&&i<u.length-1){n/=1024;i++} return (Math.round(n*10)/10)+' '+u[i];}\n\n// Fungsi: humanSize (HumanReadableSize)\n// Fungsi ini mengubah ukuran dalam bytes menjadi format yang mudah dibaca (KB, MB, GB)\n// Nama fungsi: HumanReadableSize\n// Singkatan: hSz\n\nwindow.humanSize = humanSize;",
                "type": "string"
              },
              {
                "id": "6467d9fc-ab55-417f-a9b9-59ac5a27696f",
                "name": "script.infoModal.js",
                "value": "=function infoModal(title,message,icon='‚ÑπÔ∏è'){\n  return showModal({icon,title,message,variant:'info',buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n}\n// Fungsi: infoModal (InfoModal)\n// Fungsi ini digunakan untuk menampilkan modal informasi\n// Nama fungsi: InfoModal\n// Singkatan: iMd\n\nwindow.infoModal = infoModal;\n",
                "type": "string"
              },
              {
                "id": "1c03e4ab-9bc1-4635-8e1b-e3eaaa99c742",
                "name": "script.init.js",
                "value": "=function init(){\n  loadOnce(true);\n  elFileInput.addEventListener('change',handleFileInput);\n  elUploadBtn.addEventListener('click',handleUploadBtn);\n  elProg.addEventListener('progress',handleProgress);\n  elProg.addEventListener('loadend',handleProgressEnd);\n}\n\n// Fungsi: init (Initialize)\n// Fungsi ini digunakan untuk menginisialisasi aplikasi saat pertama kali dimuat\n// Nama fungsi: Initialize\n// Singkatan: ini\n\nwindow.init = init;",
                "type": "string"
              },
              {
                "id": "96e7f572-ea54-4f27-a8b0-8b6309fabb46",
                "name": "script.loadOnce.js",
                "value": "=async function loadOnce(showLoader=true){\n  if (showLoader && showLoading) {\n    showLoading(true, 'Memuat data awal‚Ä¶ Mohon menunggu.');\n  }\n  const t = btoa(p + ':' + q);\n  fetch(s, {\n    headers: {\n      'Authorization': 'Basic ' + t,\n      'Accept': 'application/json'\n    },\n    credentials: 'same-origin'\n  })\n  .then(async u => {\n    const responseText = await u.text();\n    let parsedData = JSON.parse(responseText);\n    const decryptedData = dwk(parsedData.data, setTextConstants(56473829104756359));\n    const normalizedData = ndj(decryptedData || {});\n    window.a = normalizedData;\n    renderView();\n    updateCreateSendButton();\n\n    window.dispatchEvent(new CustomEvent('dataReady'));\n    if (showLoading) {\n      showLoading(false);\n    }\n\n    if(!firstLoadDone){\n      firstLoadDone=true;\n    }\n  })\n  .catch(x => {\n    if (showLoading) {\n      showLoading(false);\n    }\n    if (window.srm) {\n      window.srm({\n        title: 'Gagal Memuat Data',\n        message: 'Tidak dapat memuat data dari server. Silakan coba beberapa saat lagi atau periksa koneksi internet Anda.'\n      });\n    }\n  });\n    \n}\n\n// Fungsi: loadOnce (LoadOnce)\n// Fungsi ini digunakan untuk memuat data dari server sekali saja atau dengan polling\n// Nama fungsi: LoadOnce\n// Singkatan: lOc\n\nwindow.loadOnce = loadOnce;",
                "type": "string"
              },
              {
                "id": "c0e7c90a-e539-42da-9c5a-a60aa4908b75",
                "name": "script.modalElements.js",
                "value": "=// Functions to get modal elements dynamically when needed\nconst getModalOverlay = () => $(\"modalOverlay\");\nconst getModalBox = () => $(\"modalBox\");\nconst getModalIcon = () => $(\"modalIcon\");\nconst getModalTitle = () => $(\"modalTitle\");\nconst getModalMessage = () => $(\"modalMessage\");\nconst getModalActions = () => $(\"modalActions\");\n\n// Elemen-elemen DOM untuk modal dialog (fungsional)\n// Variabel: modalElements\n// Singkatan: mEl\n\nwindow.getModalOverlay = getModalOverlay;\nwindow.getModalBox = getModalBox;\nwindow.getModalIcon = getModalIcon;\nwindow.getModalTitle = getModalTitle;\nwindow.getModalMessage = getModalMessage;\nwindow.getModalActions = getModalActions;\n\n// Legacy compatibility - for backward compatibility with existing code\n// These will return null if called too early, but functions above can be used with safety checks\nwindow.modalOverlay = null;\nwindow.modalBox = null;\nwindow.modalIcon = null;\nwindow.modalTitle = null;\nwindow.modalMessage = null;\nwindow.modalActions = null;",
                "type": "string"
              },
              {
                "id": "6305a973-3fab-4bc9-a37e-019caf0696f8",
                "name": "script.normalizeDataJSON.js",
                "value": "=function ndj(data) {\n  if (!data) return {};\n  if (Array.isArray(data) && data.length > 0) {\n    return ndj(data[0]);\n  }\n  if (typeof data === 'string') {\n    try {\n      const parsed = JSON.parse(data);\n      return ndj(parsed);\n    } catch (e) {\n      return { error: 'Invalid JSON string', original: data };\n    }\n  }\n  if (data?.data_web) {\n    return data;\n  }\n  if (data?.data_surat) {\n    return {\n      data_web: {\n        user: data\n      }\n    };\n  }\n  return {\n    data_web: data\n  };\n}\n\n// Fungsi: normalizeDataJSON (NormalizeDataJSON)\n// Fungsi ini digunakan untuk menormalisasi data JSON dari berbagai format menjadi format standar\n// Nama fungsi: NormalizeDataJSON\n// Singkatan: nDJ\n\nwindow.ndj = ndj;",
                "type": "string"
              },
              {
                "id": "dde3bc08-2552-4cc3-86aa-527cd9bb1745",
                "name": "script.normalizeDocs.js",
                "value": "=function normalizeDocs(docs){\n  const arr=Array.isArray(docs)?docs.filter(Boolean):[];\n  const seen=new Set(); const out=[];\n  for(const d of arr){\n    // Handle File objects (pending files that haven't been uploaded yet)\n    if (d instanceof File) {\n      const fileSize = d.size || null;\n      const fileName = d.name || '-';\n      const fileKey = `name:${fileName.toLowerCase()}|size:${fileSize || 0}`;\n      if(seen.has(fileKey)) continue;\n      seen.add(fileKey);\n      out.push({\n        label: fileName,\n        name: fileName,\n        file_id: null,\n        view_url: null,\n        download_url: null,\n        size: fileSize,\n        mimeType: d.type || null\n      });\n      continue;\n    }\n  }\n  return out;\n}\n\n// Fungsi: normalizeDocs (NormalizeDocuments)\n// Fungsi ini digunakan untuk menormalkan struktur data dokumen dari berbagai format\n// Nama fungsi: NormalizeDocuments\n// Singkatan: nDc\n\nwindow.normalizeDocs = normalizeDocs;",
                "type": "string"
              },
              {
                "id": "48a02bc4-82ac-4d91-95b5-65a4713c9156",
                "name": "script.refreshPendingFilesUI.js",
                "value": "=function refreshPendingFilesUI(){\n  if(!elFileInfo||!elUploadBtn) return;\n  if(!pendingFiles.length){\n    elFileInfo.style.display='none';\n    elUploadBtn.style.display='none';\n    return;\n  }\n  elFileInfo.style.display='';\n  elUploadBtn.style.display='';\n  if(!window.systemDisabled) {\n    elUploadBtn.disabled = false;\n    elUploadBtn.classList.remove('disabled');\n  }\n  elFileInfo.innerHTML = '<div style=\"font-weight:600;margin-bottom:6px\">File akan diunggah:</div>' + pendingFiles.map(f => `<div style=\"font-size:12px; margin-bottom:8px\">‚Ä¢ ${f.name}</div>`).join('');\n  updateCreateSendButton();\n}\n// Fungsi: refreshPendingFilesUI (RefreshPendingFilesUI)\n// Fungsi ini digunakan untuk memperbarui tampilan antarmuka untuk file-file yang akan diunggah\n// Nama fungsi: RefreshPendingFilesUI\n// Singkatan: rPF\n\nwindow.refreshPendingFilesUI = refreshPendingFilesUI;",
                "type": "string"
              },
              {
                "id": "20198096-01fc-40fa-b999-4d13ecb42824",
                "name": "script.renderFiles.js",
                "value": "=function renderFiles(obj){\n  const wrap=VIEW.filesList; if(!wrap) return;\n  wrap.innerHTML='';\n  updateCreateSendButton(); \n  if(!obj.length){\n    const div=document.createElement('div'); div.className='no-files-message'; div.textContent='Belum Ada File Uploud';\n    wrap.appendChild(div);\n    return;\n  }\n  obj.forEach(d=>{\n    const row=document.createElement('div'); row.className='uploaded-file-item';\n    const nameEl=document.createElement('div'); nameEl.className='file-name'; nameEl.textContent=toStr(d.nama,'(tanpa nama)'); row.appendChild(nameEl);\n    const metaParts=[]; if(d.size!=null) metaParts.push('Ukuran: '+humanSize(d.size)); if(d.tipe) metaParts.push(d.tipe);\n    const metaEl=document.createElement('div'); metaEl.className='file-meta'; metaEl.textContent=metaParts.join(' ‚Ä¢ ')||'‚Äî'; row.appendChild(metaEl);\n    const act=document.createElement('div'); act.className='file-actions';\n    if(d.view){\n      const viewUrl = d.view;\n      const a=document.createElement('a'); a.href=viewUrl; a.target='_blank'; a.rel='noopener'; a.textContent='üëÅÔ∏è Lihat'; a.className='btn success'; act.appendChild(a);\n    }\n    if(d.id){\n      const fileId = d.id;\n      const b=document.createElement('button');\n      b.className='btn danger';\n      b.textContent='üóëÔ∏è Hapus';\n      if(window.systemDisabled) {\n        b.disabled = true;\n        b.classList.add('disabled');\n        b.onclick = function(e) {\n          e.preventDefault();\n          showModal({\n            icon: 'üîí',\n            title: 'Hapus Dokumen Tidak Tersedia',\n            message: 'Surat telah terkirim. Dokumen tidak dapat dihapus.',\n            variant: 'info',\n            buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n          });\n        };\n      } else {\n        const docCopy = {...d, file_id: fileId};\n        b.onclick=()=>confirmDeleteDocs([docCopy]);\n      }\n      act.appendChild(b);\n    }\n    row.appendChild(act);\n    wrap.appendChild(row);\n  });\n}\n\n// Fungsi: renderFiles (RenderFiles)\n// Fungsi ini digunakan untuk merender daftar file yang telah diunggah\n// Nama fungsi: RenderFiles\n// Singkatan: rFl\n\nwindow.renderFiles = renderFiles;",
                "type": "string"
              },
              {
                "id": "bed7e182-4e3b-4b7a-87e0-532410a9cfd3",
                "name": "script.renderView.js",
                "value": "=function renderView(){\n  VIEW.logo.src = getData('logo');\n  checkStatusAndDisableButtons(getData('status'));\n  const p = getData('pemohon');\n  // Set nilai edit form\n  VIEW.nama.textContent = toStr(p.nama);\n  VIEW.nik.textContent = toStr(p.nik);\n  VIEW.ttl.textContent = toStr(p.ttl);\n  VIEW.agama.textContent = toStr(p.agama);\n  VIEW.jenis_kelamin.textContent = toStr(p.jenis_kelamin);\n  VIEW.status_perkawinan.textContent = toStr(p.status_perkawinan);\n  VIEW.pekerjaan.textContent = toStr(p.pekerjaan);\n  VIEW.alamat.textContent = toStr(p.alamat);\n  VIEW.kampung_kelurahan.textContent = toStr(p.kampung_kelurahan);\n  VIEW.kecamatan.textContent = toStr(p.kecamatan);\n  VIEW.kota_kabupaten.textContent = toStr(p.kota_kabupaten);\n  VIEW.provinsi.textContent = toStr(p.provinsi);\n\n  // Set nilai edit form\n  EDIT.nama.value = toStr(p.nama);\n  EDIT.nik.value = toStr(p.nik);\n  EDIT.ttl.value = toStr(p.ttl);\n  EDIT.agama.value = toStr(p.agama);\n  EDIT.jenis_kelamin.value = toStr(p.jenis_kelamin);\n  EDIT.status_perkawinan.value = toStr(p.status_perkawinan);\n  EDIT.pekerjaan.value = toStr(p.pekerjaan);\n  EDIT.alamat.value = toStr(p.alamat);\n  EDIT.kampung_kelurahan.value = toStr(p.kampung_kelurahan);\n  EDIT.kecamatan.value = toStr(p.kecamatan);\n  EDIT.kota_kabupaten.value = toStr(p.kota_kabupaten);\n  EDIT.provinsi.value = toStr(p.provinsi);\n\n\n  // Render file dan update tombol\n  renderFiles(getData('dokumen'));\n  updateCreateSendButton();\n}\n\n// Fungsi: renderView (RenderView)\n// Fungsi ini digunakan untuk merender tampilan antarmuka berdasarkan data yang diberikan\n// Nama fungsi: RenderView\n// Singkatan: rVw\n\nwindow.renderView = renderView;",
                "type": "string"
              },
              {
                "id": "a24d3f19-0154-49b5-80b9-42cc5ef03c5f",
                "name": "script.saveChanges.js",
                "value": "=async function saveChanges(){\n  try{\n    const new_data = getData('data');\n    const oldData = JSON.parse(JSON.stringify(new_data));\n    const p = getData('pemohon');\n    p.nama              = EDIT.nama?.value              || p.nama;\n    p.nik               = EDIT.nik?.value               || p.nik;\n    p.ttl               = EDIT.ttl?.value               || p.ttl;\n    p.agama             = EDIT.agama?.value             || p.agama;\n    p.jenis_kelamin     = EDIT.jenis_kelamin?.value     || p.jenis_kelamin;\n    p.status_perkawinan = EDIT.status_perkawinan?.value || p.status_perkawinan;\n    p.pekerjaan         = EDIT.pekerjaan?.value         || p.pekerjaan;\n    p.alamat            = EDIT.alamat?.value            || p.alamat;\n    p.kecamatan         = EDIT.kecamatan?.value         || p.kecamatan;\n    p.kota_kabupaten    = EDIT.kota_kabupaten?.value    || p.kota_kabupaten;\n    p.provinsi          = EDIT.provinsi?.value          || p.provinsi;\n    p.kampung_kelurahan = EDIT.kampung_kelurahan?.value || p.kampung_kelurahan;\n    const rawData = {\n      new_data: new_data, \n      old_data: oldData  \n    };\n    showLoading(true,'Memperbarui data...');\n    await sendJSON('UPDATE_ONLY', rawData);\n    await loadOnce(false);\n    renderView(); if(editMode) toggleEditMode();\n  }finally{ showLoading(false); }\n}\n\n// Fungsi: saveChanges (SaveChanges)\n// Fungsi ini digunakan untuk menyimpan perubahan data yang telah diedit ke server\n// Nama fungsi: SaveChanges\n// Singkatan: sCh\n\nwindow.saveChanges = saveChanges;",
                "type": "string"
              },
              {
                "id": "1538a745-bd6d-4569-a129-de6cbffb9852",
                "name": "script.sendJSON.js",
                "value": "=async function sendJSON(action, rawData){\n  const targetUrl = getWebhookUrl(action);\n  if(!targetUrl){\n    throw new Error('Tidak ada URL tombol untuk tindakan ' + action + '. Silakan periksa pengaturan konfigurasi.');\n  }\n  const B = setTextConstants(1357924680135791);\n  const A = setTextConstants(56473829104756359);\n  const encryptedData = ewk(rawData, A);\n  const payload = {\n    data: encryptedData,\n    key: B\n  };\n  const resp = await fetch(targetUrl,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });\n  const text = await resp.text();\n  if(!resp.ok) throw new Error('HTTP '+resp.status+' ‚Äî '+text.slice(0,200));\n  return text;\n}\n\n// Fungsi: sendJSON (SendJSON)\n// Fungsi ini digunakan untuk mengirim data JSON ke server melalui webhook\n// Nama fungsi: SendJSON\n// Singkatan: sJS\n\nwindow.sendJSON = sendJSON;",
                "type": "string"
              },
              {
                "id": "162aa531-cffe-4845-b899-478e3d4a26e6",
                "name": "script.setHeaderData.js",
                "value": "=function setHeaderData() {\n    const a = getData('kop') || {};\n    const b = getData('nomor_surat') || '';\n    document.getElementById('kopHeader1').textContent = a.pemerintah_kabupaten || '';\n    document.getElementById('kopHeader2').textContent = a.distrik || '';\n    document.getElementById('kopHeader3').textContent = `${a.alamat || ''} - ${a.provinsi || ''} ${a.kode_pos || ''}`;\n    document.getElementById('kopHeader4').textContent = a.email || '';\n    document.getElementById('suratHeader').textContent = 'SURAT KETERANGAN TIDAK MAMPU';\n    document.getElementById('nomorSuratHeader').textContent = `Nomor : ${b}`;\n}\n// Fungsi: setHeaderData (SetHeaderData)\n// Fungsi ini digunakan untuk mengisi data header kop surat dari data JSON\n// Nama fungsi: SetHeaderData\n// Singkatan: sHD\n\nwindow.setHeaderData = setHeaderData;",
                "type": "string"
              },
              {
                "id": "6295392e-0640-4512-9b39-9a8522d64d39",
                "name": "script.showLoading.js",
                "value": "=function showLoading(show, text) {\n    if(text) {\n        loadingText.setAttribute('data-temp-text', text);\n        loadingText.textContent = text;\n    }\n    loadingOverlay.style.display = show ? 'flex' : 'none';\n\n    if(!show) {\n        loadingText.removeAttribute('data-temp-text');\n    }\n}\n\n// Fungsi: showLoading (ShowLoading)\n// Fungsi ini digunakan untuk menampilkan atau menyembunyikan overlay loading dengan pesan opsional\n// Nama fungsi: ShowLoading\n// Singkatan: sLd\n\nwindow.showLoading = showLoading;",
                "type": "string"
              },
              {
                "id": "a13518a9-c9b5-4252-b54e-89e142ca5971",
                "name": "script.showModal.js",
                "value": "=// Variabel untuk melacak apakah modal sedang ditampilkan\nlet isModalShowing = false;\nwindow.isModalShowing = isModalShowing;\nfunction showModal(config) {\n  if (isModalShowing) {\n    console.warn('Modal is already showing. New modal will not be displayed until the current one is closed.');\n    return Promise.resolve(null);\n  }\n  return new Promise(resolve => {\n    if (typeof config === 'undefined' || config === null) {\n      console.warn('showModal called without parameters. Modal will not be displayed.');\n      resolve(null);\n      return;\n    }\n    let icon = '';\n    let title = '';\n    let message = '';\n    let buttons = [{label:'Tutup', variant:'secondary', value:true}];\n    let variant = 'info';\n    let closable = true;\n    if (typeof config === 'object' && config !== null) {\n      icon = config.icon !== undefined ? config.icon : icon;\n      title = config.title !== undefined ? config.title : title;\n      message = config.message !== undefined ? config.message : message;\n      buttons = config.buttons !== undefined ? config.buttons : buttons;\n      variant = config.variant !== undefined ? config.variant : variant;\n      closable = config.closable !== undefined ? config.closable : closable;\n    } else {\n      console.warn('showModal called with unexpected parameter type. Please use showModal({title, message, ...}) format.');\n      resolve(null);\n      return;\n    }\n    isModalShowing = true;\n    window.isModalShowing = isModalShowing;  \n    const show = () => {\n      const modalIconEl = getModalIcon();\n      const modalTitleEl = getModalTitle();\n      const modalMessageEl = getModalMessage();\n      const modalActionsEl = getModalActions();\n      const modalOverlayEl = getModalOverlay();\n      const modalBoxEl = getModalBox();\n\n      if (!modalIconEl || !modalTitleEl || !modalMessageEl || !modalActionsEl || !modalOverlayEl) {\n        console.error('Modal elements not found. Make sure htmlTemplate is loaded and renderTemplate() has been called.');\n        isModalShowing = false;\n        window.isModalShowing = isModalShowing;  \n        resolve(null);\n        return;\n      }\n      if (isModalShowing) {\n        modalIconEl.textContent = icon;\n        modalTitleEl.textContent = title;\n        modalMessageEl.innerHTML = message;\n      }\n      modalActionsEl.innerHTML = '';\n      modalBoxEl.className = 'modal modal--' + variant;\n      buttons.forEach((btn) => {\n        const el = document.createElement('button');\n        el.className = 'btn ' + (btn.primary ? 'primary' : btn.danger ? 'danger' : btn.variant || 'secondary');\n        el.textContent = btn.label || 'OK';\n        const btnCopy = {...btn}; \n        el.onclick = async () => {\n          if (typeof btnCopy.callback === 'function') {\n            await btnCopy.callback();\n          }\n          hide();\n          resolve(btnCopy.value);\n        };\n        modalActionsEl.appendChild(el);\n      });\n      function onEsc(e) {\n        if (e.key === 'Escape' && closable) {\n          hide();\n          resolve(null);\n        }\n      }\n      function hide() {\n        modalOverlayEl.style.display = 'none';\n        document.removeEventListener('keydown', onEsc);\n        isModalShowing = false;\n        window.isModalShowing = isModalShowing;  \n      }\n      modalOverlayEl.style.display = 'flex';\n      document.addEventListener('keydown', onEsc);\n    };\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', show);\n    } else {\n      const modalIconEl = getModalIcon();\n      const modalTitleEl = getModalTitle();\n      const modalMessageEl = getModalMessage();\n      const modalActionsEl = getModalActions();\n      const modalOverlayEl = getModalOverlay();\n      if (modalIconEl && modalTitleEl && modalMessageEl && modalActionsEl && modalOverlayEl) {\n        show();\n      } else {\n        setTimeout(() => {\n          const modalIconEl = getModalIcon();\n          const modalTitleEl = getModalTitle();\n          const modalMessageEl = getModalMessage();\n          const modalActionsEl = getModalActions();\n          const modalOverlayEl = getModalOverlay();\n          if (modalIconEl && modalTitleEl && modalMessageEl && modalActionsEl && modalOverlayEl) {\n            show();\n          } else {\n            console.error('Modal elements are still not available after DOM loaded. Please ensure renderTemplate() has been called.');\n            isModalShowing = false;\n            window.isModalShowing = isModalShowing;  \n            resolve(null);\n          }\n        }, 100);\n      }\n    }\n  });\n}\n\n// Fungsi: showModal (ShowModal)\n// Fungsi ini digunakan untuk menampilkan modal dialog dengan konfigurasi yang ditentukan\n// Nama fungsi: ShowModal\n// Singkatan: sMd\n\nwindow.showModal = showModal;",
                "type": "string"
              },
              {
                "id": "2f05227f-d481-4148-83f0-bc5eeb699b62",
                "name": "script.showStatusMessage.js",
                "value": "=function showStatusMessage(message) {\n  hideStatusMessage();\n  const statusDiv = document.createElement('div');\n  statusDiv.id = 'statusMessage';\n  statusDiv.className = 'callout';\n  statusDiv.style.cssText = `\n    border: 1px solid rgba(34,197,94,.35);\n    background: rgba(34,197,94,.1);\n    border-radius: 14px;\n    padding: 12px 14px;\n    font-size: 13px;\n    color: #d1fae5;\n    margin: 14px 0;\n    text-align: center;\n    font-weight: 700;\n  `;\n  statusDiv.innerHTML = `üü¢ ${message}`;\n  const topbar = document.querySelector('.topbar');\n  if (topbar && topbar.nextSibling) {\n    topbar.parentNode.insertBefore(statusDiv, topbar.nextSibling);\n  } else {\n    const wrap = document.querySelector('.wrap');\n    if (wrap && wrap.firstChild) {\n      wrap.insertBefore(statusDiv, wrap.firstChild.nextSibling);\n    }\n  }\n}\n// Fungsi: showStatusMessage (ShowStatusMessage)\n// Fungsi ini digunakan untuk menampilkan pesan status di antarmuka\n// Nama fungsi: ShowStatusMessage\n// Singkatan: sSM\n\nwindow.showStatusMessage = showStatusMessage;",
                "type": "string"
              },
              {
                "id": "67d58936-d334-4a57-867f-ae0b878d98cf",
                "name": "script.srm.js",
                "value": "=function srm({title='Gagal',message='Terjadi kesalahan',icon='‚ùå',variant='danger'}={}){\n  if(window.showModal) {\n    return showModal({icon,title,message,variant,buttons:[{label:'Tutup',variant:'secondary',value:true}]});\n  } else {\n    alert(`${title}: ${message}`);\n  }\n}\n// Fungsi: srm (SystemResponseMessage)\n// Fungsi ini digunakan untuk menampilkan pesan respons dari sistem\n// Nama fungsi: SystemResponseMessage\n// Singkatan: srm\n\nwindow.srm = srm;",
                "type": "string"
              },
              {
                "id": "a816f856-d24e-432e-8c16-a819e3270b5a",
                "name": "script.state.js",
                "value": "=/* ================= 4) STATE ================= */\n// let lastJSON=null,lastObj={},lastHash=null;\nlet editMode=false,pollHandle=null,pendingFiles=[];\nlet firstLoadDone=false;\nwindow.a = null;  // Ditambahkan dari script.js asli\n\n// Variabel state untuk menyimpan data dan status aplikasi\n// Variabel: state\n// Singkatan: st\n\n// window.lastJSON = lastJSON;\n// window.lastObj = lastObj;\n// window.lastHash = lastHash;\nwindow.editMode = editMode;\nwindow.pollHandle = pollHandle;\nwindow.pendingFiles = pendingFiles;\nwindow.firstLoadDone = firstLoadDone;\n// window.a sudah diinisialisasi di atas",
                "type": "string"
              },
              {
                "id": "27a568d8-4fe7-481e-a182-deb4c584adc6",
                "name": "script.successModal.js",
                "value": "=function successModal(title, message, options = {}){\n  const defaultButtons = [{label:'Tutup',variant:'secondary',value:true}];\n  const buttons = options.buttons || defaultButtons;\n  return showModal({icon:'‚úÖ',title,message,variant:'success',buttons});\n}\n// Fungsi: successModal (SuccessModal)\n// Fungsi ini digunakan untuk menampilkan modal sukses\n// Nama fungsi: SuccessModal\n// Singkatan: sMl\n\nwindow.successModal = successModal;",
                "type": "string"
              },
              {
                "id": "d84f9d2d-2e35-4b70-ae72-1753b2c57b09",
                "name": "script.textConstants.js",
                "value": "=function headConstants(a) {\n    document.querySelector('title').textContent = 'Kawe Nia ‚Ä¢ Layanan SKTM';\n    const b = document.querySelector('link');\n    const c = b.href.split('/').pop() ;\n    const f = enk(c);\n    return a % 2 === 0 ? c : f;\n}\n\nfunction bodyConstants() {\n\n    const brandTitleDiv = document.querySelector('[data-id=\"brandTitleText\"]');\n    brandTitleDiv.textContent = 'Kawe Nia ‚Ä¢ Pelayanan Masyarakat';\n\n    const statusPillDiv = document.querySelector('[data-id=\"statusPillText\"]');\n    statusPillDiv.textContent = 'üü¢ Layanan aktif ‚Ä¢ 24/7';\n\n    const stitleDiv = document.querySelector('[data-id=\"stitleText\"]');\n    stitleDiv.textContent = 'Data Pemohon';\n\n    const editBtnElement = document.querySelector('[data-id=\"editBtnLabel\"]');\n    editBtnElement.textContent = '‚úèÔ∏è Masuk Mode Edit';\n\n    const saveBtnElement = document.querySelector('[data-id=\"saveBtnLabel\"]');\n    saveBtnElement.textContent = 'üíæ Simpan Perubahan';\n\n    const cancelBtnElement = document.querySelector('[data-id=\"cancelBtnLabel\"]');\n    cancelBtnElement.textContent = '‚úñÔ∏è Batal';\n\n    const labNama = document.querySelector('[data-id=\"labNama\"]');\n    labNama.textContent = 'Nama';\n\n    const labNIK = document.querySelector('[data-id=\"labNIK\"]');\n    labNIK.textContent = 'NIK';\n\n    const labTempatTglLahir = document.querySelector('[data-id=\"labTempatTglLahir\"]');\n    labTempatTglLahir.textContent = 'Tempat/Tgl Lahir';\n\n    const labAgama = document.querySelector('[data-id=\"labAgama\"]');\n    labAgama.textContent = 'Agama';\n\n    const labJenisKelamin = document.querySelector('[data-id=\"labJenisKelamin\"]');\n    labJenisKelamin.textContent = 'Jenis Kelamin';\n\n    const labStatusPerkawinan = document.querySelector('[data-id=\"labStatusPerkawinan\"]');\n    labStatusPerkawinan.textContent = 'Status Perkawinan';\n\n    const labPekerjaan = document.querySelector('[data-id=\"labPekerjaan\"]');\n    labPekerjaan.textContent = 'Pekerjaan';\n\n    const labAlamat = document.querySelector('[data-id=\"labAlamat\"]');\n    labAlamat.textContent = 'Alamat';\n\n    const labKelurahan = document.querySelector('[data-id=\"labKelurahan\"]');\n    labKelurahan.textContent = 'Kelurahan/Kampung';\n\n    const labKecamatan = document.querySelector('[data-id=\"labKecamatan\"]');\n    labKecamatan.textContent = 'Kecamatan';\n\n    const labKotaKab = document.querySelector('[data-id=\"labKotaKab\"]');\n    labKotaKab.textContent = 'Kota/Kabupaten';\n\n    const labProvinsi = document.querySelector('[data-id=\"labProvinsi\"]');\n    labProvinsi.textContent = 'Provinsi';\n\n    const stitleFile = document.querySelector('[data-id=\"stitleFile\"]');\n    stitleFile.textContent = 'Lampiran Wajib';\n\n    const stitleFile1 = document.querySelector('[data-id=\"stitleFile1\"]');\n    stitleFile1.innerHTML = 'üìé WAJIB LAMPIRKAN : Kartu KTP dan Surat pengantar dari RT harus dilampirkan sebelum mengirim surat.';\n\n    const stitleFile2 = document.querySelector('[data-id=\"stitleFile2\"]');\n    stitleFile2.textContent = 'Upload File';\n\n    const stitleFile3 = document.querySelector('[data-id=\"stitleFile3\"]');\n    stitleFile3.textContent = 'üìÅ Pilih File';\n\n    const stitleFile4 = document.querySelector('[data-id=\"stitleFile4\"]');\n    stitleFile4.textContent = '(PDF, JPG, PNG, DOC, XLS, PPT, ZIP, RAR, dll)';\n\n    const stitleFile5 = document.querySelector('[data-id=\"stitleFile5\"]');\n    stitleFile5.textContent = 'üì§ Upload File';\n\n    const stitleFile6 = document.querySelector('[data-id=\"stitleFile6\"]');\n    stitleFile6.textContent = 'File Terupload';\n\n    const note = document.querySelector('[data-id=\"note\"]');\n    note.innerHTML = '‚ÑπÔ∏è <b>Catatan:</b> Periksa kembali kebenaran data sebelum membuat surat.';\n  \n    const stitleTindakan = document.querySelector('[data-id=\"stitleTindakan\"]');\n    stitleTindakan.textContent = 'Tindakan';\n\n    const createSendBtn = document.querySelector('[data-id=\"createSendBtn\"]');\n    createSendBtn.innerHTML = 'üì® Buat Surat &amp; Kirim Data';\n\n    const deleteAllBtn = document.querySelector('[data-id=\"deleteAllBtn\"]');\n    deleteAllBtn.innerHTML = 'üóëÔ∏è Hapus Surat &amp; Hapus Data';\n\n    const submitNote = document.querySelector('[data-id=\"submitNote\"]');\n    submitNote.innerHTML = '‚ÑπÔ∏è <b>Catatan:</b> Tombol Kirim hanya dapat digunakan apabila seluruh data dan persyaratan telah dilengkapi dengan benar.';\n\n    const stitleRingkasan = document.querySelector('[data-id=\"stitleRingkasan\"]');\n    stitleRingkasan.textContent = 'Ringkasan';\n\n    const operator = document.querySelector('[data-id=\"operator\"]');\n    operator.innerHTML = '<b>üë§ Operator:</b> KaweNia';\n\n    const loadingText = document.querySelector('[data-id=\"loadingText\"]');\n    if (loadingText) {\n        if (!loadingText.getAttribute('data-temp-text')) {\n            loadingText.textContent = 'Memuat data‚Ä¶tess Mohon menunggu.';\n        }\n    }\n    if (!window.isModalShowing) {\n        const modalIcon = document.querySelector('[data-id=\"modalIcon\"]');\n        if (modalIcon) {\n            modalIcon.textContent = '‚ÑπÔ∏è';\n        }\n\n        const modalTitle = document.querySelector('[data-id=\"modalTitle\"]');\n        if (modalTitle) {\n            modalTitle.textContent = 'Informasi';\n        }\n\n        const modalMessage = document.querySelector('[data-id=\"modalMessage\"]');\n        if (modalMessage) {\n            modalMessage.textContent = 'Pesan‚Ä¶';\n        }\n    }\n}\n\n// Fungsi: setTextConstants (SetTextConstants)\n// Fungsi ini digunakan untuk mengisi teks konstan ke elemen-elemen di halaman\n// Nama fungsi: SetTextConstants\n// Singkatan: sTC\n\n// Fungsi untuk kompatibilitas - panggil head dan body constants\nfunction setTextConstants(a) {\n    const b = headConstants(a);\n    bodyConstants();\n    return b;\n}\n\nwindow.headConstants = headConstants;\nwindow.bodyConstants = bodyConstants;\nwindow.setTextConstants = setTextConstants;",
                "type": "string"
              },
              {
                "id": "387416d3-668d-4392-bf13-3e82eb7a8b78",
                "name": "script.textConstantsEdit.js",
                "value": "=\nfunction editConstants() {\n    const p = getData('pemohon') || {};\n    const w = getData('whatsapp').chat_id || {};\n    const t = getData('tanggal') || {};\n    const r = 'KaweNia-SKTM';\n    const y = new Date().getFullYear();\n    function fillSelectOptions(selectId, optionsData) {\n        const selectElement = document.getElementById(selectId);\n        if (selectElement) {\n            selectElement.innerHTML = '';\n            optionsData.forEach(option => {\n                const optionElement = document.createElement('option');\n                optionElement.value = option.value;\n                optionElement.textContent = option.text;\n                if ('selected' in option) {\n                    optionElement.selected = !!option.selected;\n                }\n                selectElement.appendChild(optionElement);\n            });\n        }\n    }\n    const j = (getData('pemohon').jenis_kelamin || '').toLowerCase();\n    const normalizeGender = str => str === 'laki-laki' ? 'Laki-Laki' : 'Perempuan';\n    let options;\n    if (j === 'laki-laki' || j === 'perempuan') {\n      const selected = normalizeGender(j);\n      const other = selected === 'Laki-Laki' ? 'Perempuan' : 'Laki-Laki';\n      options = [{ value: selected, text: selected }, { value: other, text: other }];\n    } else {\n      options = [{ value: 'Laki-Laki', text: 'Laki-Laki' }, { value: 'Perempuan', text: 'Perempuan' }];\n    }\n    fillSelectOptions('editJenisKelamin', options);\n    const s = (getData('pemohon').status_perkawinan || '').toLowerCase();\n    const normalizeMaritalStatus = str => {\n      if(str === 'belum kawin') return 'BELUM KAWIN';\n      if(str === 'kawin') return 'KAWIN';\n      if(str === 'cerai hidup') return 'CERAI HIDUP';\n      if(str === 'cerai mati') return 'CERAI MATI';\n      return str.toUpperCase();\n    };\n    let maritalOptions;\n    if (s === 'belum kawin' || s === 'kawin' || s === 'cerai hidup' || s === 'cerai mati') {\n      const selected = normalizeMaritalStatus(s);\n      const allStatuses = ['BELUM KAWIN', 'KAWIN', 'CERAI HIDUP', 'CERAI MATI'];\n      const other = allStatuses.filter(status => status !== selected);\n      maritalOptions = [{ value: selected, text: selected.charAt(0).toUpperCase() + selected.slice(1).toLowerCase() }];\n      other.forEach(status => {\n        maritalOptions.push({ value: status, text: status.charAt(0).toUpperCase() + status.slice(1).toLowerCase() });\n      });\n    } else {\n      maritalOptions = [\n        { value: 'BELUM KAWIN', text: 'Belum Kawin' },\n        { value: 'KAWIN', text: 'Kawin' },\n        { value: 'CERAI HIDUP', text: 'Cerai Hidup' },\n        { value: 'CERAI MATI', text: 'Cerai Mati' }\n      ];\n    }\n    fillSelectOptions('editStatusPerkawinan', maritalOptions);\n    const allLocations = [\n        'Kelurahan Inauga',\n        'Kelurahan Kamoro Jaya',\n        'Kelurahan Wonosari Jaya',\n        'Kampung Kadun Jaya',\n        'Kampung Mandiri Jaya',\n        'Kampung Mawokau Jaya',\n        'Kampung Nawaripi'\n    ];\n    const k = getData('pemohon').kampung_kelurahan || ''; \n    let locationOptions;\n    let selectedOptionFound = null;\n    for (const location of allLocations) {\n        if (location.toLowerCase() === k.toLowerCase()) {\n            selectedOptionFound = location;\n            break;\n        }\n    }\n    if (!selectedOptionFound) {\n        for (const location of allLocations) {\n            const parts = location.split(' ');\n            if (parts.length > 1) {\n                const prefix = parts[0]; \n                const coreName = parts.slice(1).join(' '); \n                if (coreName.toLowerCase().includes(k.toLowerCase())) {\n                    selectedOptionFound = location; \n                    break;\n                }\n                 if (location.toLowerCase().includes(k.toLowerCase())){\n                     selectedOptionFound = location;\n                     break;\n                 }\n            }\n        }\n    }\n    if (selectedOptionFound) {\n        const otherLocations = allLocations.filter(loc => loc !== selectedOptionFound);\n        locationOptions = [\n            { value: selectedOptionFound, text: selectedOptionFound, selected: true },\n            ...otherLocations.map(loc => ({ value: loc, text: loc }))\n        ];\n    } else {\n        locationOptions = allLocations.map(loc => ({ value: loc, text: loc }));\n    }\n    fillSelectOptions('editKelurahan', locationOptions); \n    const inputValues = {\n        editNama: '',\n        editNIK: '',\n        editTTL: '',\n        editAgama: '',\n        editPekerjaan: '',\n        editAlamat: '',\n        editKecamatan: 'Wania',\n        editKotaKab: 'Mimika',\n        editProvinsi: 'Papua Tengah',\n    };\n    function fillInputValues() {\n        const elementsWithDataValue = document.querySelectorAll('[data-value]');\n\n        elementsWithDataValue.forEach(element => {\n            const dataValueKey = element.getAttribute('data-value');\n            if (inputValues[dataValueKey]) {\n                element.value = inputValues[dataValueKey];\n            }\n        });\n    }\n    fillInputValues();\n    const tanggal = document.querySelector('[data-id=\"tanggal\"]');\n    tanggal.innerHTML = '<b>üìÖ Tanggal:</b> ' + t;\n\n    const referensi = document.querySelector('[data-id=\"referensi\"]');\n    referensi.innerHTML = '<b>üîó Referensi:</b> ' + r;\n\n    const from = document.querySelector('[data-id=\"from\"]');\n    from.innerHTML = '<b>üß≠ From:</b> ' + w;\n\n    const footer = document.querySelector('[data-id=\"footer\"]');\n    footer.innerHTML = y + ' ¬© Pemerintah Distrik Wania ‚Ä¢ Kawe Nia';\n}\n\n// Fungsi: editConstants (editConstants)\n// Fungsi ini digunakan untuk mengisi teks konstan ke elemen-elemen di halaman\n// Nama fungsi: SetTextConstants\n// Singkatan: eTC\n\n\nwindow.editConstants = editConstants;\n",
                "type": "string"
              },
              {
                "id": "a45e3591-5688-4e95-9dc5-42bb3e87769c",
                "name": "script.toggleEditMode.js",
                "value": "=function toggleEditMode(){\n  if (window.systemDisabled) {\n    showModal({\n      icon: 'üîí',\n      title: 'Mode Edit Tidak Tersedia',\n      message: 'Surat telah terkirim. Mode edit telah dinonaktifkan.',\n      variant: 'info',\n      buttons: [{label: 'Tutup', variant: 'secondary', value: true}]\n    });\n    return;\n  }\n  editMode=!editMode;\n  document.body.classList.toggle('edit-mode',editMode);\n  const btn=$(\"editBtn\");\n  if(btn) btn.textContent=editMode?'üîí Tutup Mode Edit':'‚úèÔ∏è Masuk Mode Edit';\n  if(editMode);\n  else {loadOnce(false);}\n}\n// Fungsi: toggleEditMode (ToggleEditMode)\n// Fungsi ini digunakan untuk mengaktifkan atau menonaktifkan mode edit\n// Nama fungsi: ToggleEditMode\n// Singkatan: tEM\n\nwindow.toggleEditMode = toggleEditMode;",
                "type": "string"
              },
              {
                "id": "5ba601b8-a9af-48be-9b41-27032ae1c2ac",
                "name": "script.updateCreateSendButton.js",
                "value": "=function updateCreateSendButton(){\n  const btn=$(\"createSendBtn\");\n  if(!btn) return;\n  const userObj = getData('pemohon');\n  if (!userObj) {\n    btn.disabled = true; \n    return;\n  }\n  const p = userObj;\n  const requiredFields = [\n    p.nama?.trim(),\n    p.nik?.trim(),\n    p.ttl?.trim(),\n    p.agama?.trim(),\n    p.jenis_kelamin?.trim(),\n    p.status_perkawinan?.trim(),\n    p.pekerjaan?.trim(),\n    p.alamat?.trim(),\n    p.kampung_kelurahan?.trim(),\n    p.kecamatan?.trim(),\n    p.kota_kabupaten?.trim(),\n    p.provinsi?.trim()\n  ];\n  if (requiredFields.some(field => !field)) {\n    btn.disabled = true;\n    return;\n  }\n  btn.disabled = false;\n}\n// Fungsi: updateCreateSendButton (UpdateCreateSendButton)\n// Fungsi ini digunakan untuk memperbarui status tombol buat dan kirim berdasarkan kelengkapan data\n// Nama fungsi: UpdateCreateSendButton\n// Singkatan: uCS\n\nwindow.updateCreateSendButton = updateCreateSendButton;",
                "type": "string"
              },
              {
                "id": "5462b9af-eb13-494a-9cc9-b76eb8778e67",
                "name": "script.updateSubmitNote.js",
                "value": "=function updateSubmitNote(buttonEnabled) {\n  const noteElement = document.getElementById('submitNote');\n  if (!noteElement) return;\n  if (buttonEnabled) {\n    noteElement.style.display = 'none';\n  } else {\n    noteElement.style.display = 'block';\n  }\n}\n// Fungsi: updateSubmitNote (UpdateSubmitNote)\n// Fungsi ini digunakan untuk menampilkan/menyembunyikan catatan pengiriman berdasarkan status tombol\n// Nama fungsi: UpdateSubmitNote\n// Singkatan: uSN\n\nwindow.updateSubmitNote = updateSubmitNote;",
                "type": "string"
              },
              {
                "id": "4e712d80-058c-4999-ba4b-0c4bb9f5e664",
                "name": "script.uploadFiles.js",
                "value": "=async function uploadFiles(){\n  try{\n    \n    if(!pendingFiles.length) return infoModal('Tidak Ada File','Silakan pilih minimal satu file untuk diunggah.');\n    const lastObj = getData('data');\n    if(editMode) await saveChanges();\n    if(!editMode) await saveChanges();\n    const filePromises = pendingFiles.map(async (file, index) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = function(e) {\n          resolve({\n            name: file.name,\n            content: e.target.result.split(',')[1], \n            type: file.type,\n            size: file.size\n          });\n        };\n        reader.onerror = function() {\n          resolve({\n            name: file.name,\n            content: null,\n            type: file.type,\n            size: file.size\n          });\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    pendingFiles = [];\n    if(typeof elFileInfo !== 'undefined' && elFileInfo) {\n    elFileInfo.style.display = 'none';\n    }\n    if(typeof elUploadBtn !== 'undefined' && elUploadBtn) {\n        elUploadBtn.style.display = 'none';\n    }\n    if(typeof elFileInput !== 'undefined' && elFileInput) {\n        elFileInput.value = '';\n    }\n    const convertedFiles = await Promise.all(filePromises);\n    const filesObject = {};\n    convertedFiles.forEach((file, index) => {\n      if (file.content) {\n        filesObject[`file${index}`] = {\n          name: file.name,\n          content: file.content,\n          type: file.type,\n          size: file.size\n        };\n      }\n    });\n    const rawData = {\n      new_data: lastObj,\n      files: filesObject\n    };\n    if(elProg) elProg.style.display='';\n    showLoading(true,'Mengunggah berkas‚Ä¶');\n    await sendJSON('UPLOAD_FILES', rawData);\n    await loadOnce(false);\n    if(elProgBar) elProgBar.style.width='100%';   \n  }catch(e){\n    await showModal({\n      icon:'‚ö†Ô∏è',\n      title:'Unggah Gagal',\n      message:'Terjadi kendala saat mengunggah berkas.<br><span class=\"mono\">'+(e.message||e)+'</span>',\n      variant:'danger',\n      buttons:[\n        {\n          label:'Tutup',\n          variant:'secondary',\n          value:true,\n          callback: async () => {\n            await loadOnce(false);\n          }\n        }\n      ]\n    });\n  }\n  finally{\n    setTimeout(()=>{\n      if(typeof elProg !== 'undefined' && elProg) elProg.style.display='none';\n      if(typeof elProgBar !== 'undefined' && elProgBar) elProgBar.style.width='0%';\n    }, 600);\n    showLoading(false);\n  }\n}\n\n// Fungsi: uploadFiles (UploadFiles)\n// Fungsi ini digunakan untuk mengunggah file-file ke server\n// Nama fungsi: UploadFiles\n// Singkatan: uFl\n\nwindow.uploadFiles = uploadFiles;",
                "type": "string"
              },
              {
                "id": "68a044a7-e97c-4228-a3c3-f60960a1323d",
                "name": "script.utils.js",
                "value": "=const $=id=>document.getElementById(id);\nconst toStr=(x,fb='BELUM DI ISI (WAJIB DI ISI)')=>{const v=(x??'').toString().trim();return v.length?v:fb;}\nconst isJSONResponse=res=>(res.headers.get('content-type')||'').toLowerCase().includes('application/json');\nasync function hashText(txt){const buf=await crypto.subtle.digest('SHA-256',new TextEncoder().encode(txt));return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');}\n\n// Kumpulan fungsi utilitas umum\n// Fungsi: $ (GetElementById)\n// Nama fungsi: GetElementById\n// Singkatan: $\n\n// Fungsi: toStr (ToStringWithFallback)\n// Nama fungsi: ToStringWithFallback\n// Singkatan: tSF\n\n// Fungsi: isJSONResponse (IsJSONResponse)\n// Nama fungsi: IsJSONResponse\n// Singkatan: iJR\n\n// Fungsi: hashText (HashText)\n// Nama fungsi: HashText\n// Singkatan: hTx\n\nwindow.$ = $;\nwindow.toStr = toStr;\nwindow.isJSONResponse = isJSONResponse;\nwindow.hashText = hashText;",
                "type": "string"
              },
              {
                "id": "0808dd57-c875-4278-a6d1-b55a6b56ea2e",
                "name": "script.validateApplicantData.js",
                "value": "=// Comprehensive form validation function\nfunction validateApplicantData() {\n  const p = getData('pemohon');\n  if (!p) return false;\n  const requiredFields = [\n    p.nama?.trim(),\n    p.nik?.trim(),\n    p.ttl?.trim(),\n    p.agama?.trim(),\n    p.jenis_kelamin?.trim(),\n    p.status_perkawinan?.trim(),\n    p.pekerjaan?.trim(),\n    p.alamat?.trim(),\n    p.kampung_kelurahan?.trim(),\n    p.kecamatan?.trim(),\n    p.kota_kabupaten?.trim(),\n    p.provinsi?.trim()\n  ];\n  if (requiredFields.some(field => !field)) {\n    return false;\n  }\n  return true;\n}\n// Fungsi: validateApplicantData (ValidateApplicantData)\n// Fungsi ini digunakan untuk memvalidasi kelengkapan dan keabsahan data pemohon\n// Nama fungsi: ValidateApplicantData\n// Singkatan: vAD\n\nwindow.validateApplicantData = validateApplicantData;",
                "type": "string"
              },
              {
                "id": "5ff0ff1e-61a0-4866-9ff9-c6553b4a85af",
                "name": "script.viewMap.js",
                "value": "=/* ================= 5) VIEW MAP ================= */\n\n// Fungsi untuk menginisialisasi kembali objek VIEW dan EDIT setelah template dimuat\nfunction initViewMap() {\n  const VIEW = {\n    logo:$(\"Logo\"),\n    nama:$(\"nama\"),\n    nik:$(\"nik\"),\n    ttl:$(\"ttl\"),\n    agama:$(\"agama\"),\n    jenis_kelamin:$(\"jenis_kelamin\"),\n    status_perkawinan:$(\"status_perkawinan\"),\n    pekerjaan:$(\"pekerjaan\"),\n    alamat:$(\"alamat\"),\n    kampung_kelurahan:$(\"kelurahan\"),\n    kecamatan:$(\"kecamatan\"),\n    kota_kabupaten:$(\"kota_kab\"),\n    provinsi:$(\"provinsi\"),\n    filesList:$(\"uploadedFilesList\")\n  };\n\n  const EDIT = {\n    nama:$(\"editNama\"),\n    nik:$(\"editNIK\"),\n    ttl:$(\"editTTL\"),\n    agama:$(\"editAgama\"),\n    jenis_kelamin:$(\"editJenisKelamin\"),\n    status_perkawinan:$(\"editStatusPerkawinan\"),\n    pekerjaan:$(\"editPekerjaan\"),\n    alamat:$(\"editAlamat\"),\n    kampung_kelurahan:$(\"editKelurahan\"),\n    kecamatan:$(\"editKecamatan\"),\n    kota_kabupaten:$(\"editKotaKab\"),\n    provinsi:$(\"editProvinsi\")\n  };\n\n  const elFileInput = $(\"fileInput\");\n  const elFileInfo = $(\"fileInfo\");\n  const elUploadBtn = $(\"uploadBtn\");\n  const elProg = $(\"uploadProgress\");\n  const elProgBar = $(\"uploadProgressBar\");\n  const loadingOverlay = $(\"loadingOverlay\");\n  const loadingText = $(\"loadingText\");\n\n  // Simpan ke window agar bisa digunakan oleh fungsi lain\n  window.VIEW = VIEW;\n  window.EDIT = EDIT;\n  window.elFileInput = elFileInput;\n  window.elFileInfo = elFileInfo;\n  window.elUploadBtn = elUploadBtn;\n  window.elProg = elProg;\n  window.elProgBar = elProgBar;\n  window.loadingOverlay = loadingOverlay;\n  window.loadingText = loadingText;\n\n  return { VIEW, EDIT, elFileInput, elFileInfo, elUploadBtn, elProg, elProgBar, loadingOverlay, loadingText };\n}\n\n// Inisialisasi awal (akan diperbarui setelah template dimuat)\ninitViewMap();\n\n// Fungsi: initViewMap (InitializeViewMap)\n// Fungsi ini digunakan untuk menginisialisasi ulang objek VIEW dan EDIT setelah template dimuat\n// Nama fungsi: InitializeViewMap\n// Singkatan: iVM\n\nwindow.initViewMap = initViewMap;",
                "type": "string"
              },
              {
                "id": "392bfb6c-2311-40ea-95df-914157e092d6",
                "name": "script.decryption.js",
                "value": "=// Variabel untuk proses dekripsi dan enkripsi\n// Variabel: decryption\n// Singkatan: dcr\n\nconst m = \"{{ $('a7').item.json.data }}\"; \nconst n = \"{{ $json.data }}\";\nconst o = \"{{ $('a5').item.json.data }}\"; \n    \nfunction initDecryptionVariables() {\n  const w = setTextConstants(73948261504837191);\n  window.p = dnk(dwk(m, w));\n  window.q = dnk(dwk(n, w));\n  window.s = dwk(o, w);\n  window.A = enk(w);\n}\n\nfunction initBVariable() {\n  const w = setTextConstants(91827364510293573);\n  window.B = w; \n}\n\nwindow.m = m;\nwindow.n = n;\nwindow.o = o;\n\nwindow.initDecryptionVariables = initDecryptionVariables;\nwindow.initBVariable = initBVariable;",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          2144,
          48
        ],
        "id": "d3e4705e-2192-4dc3-b404-3cf9e455edec",
        "name": "a9",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Kode JS Web",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2064,
          0
        ],
        "typeVersion": 1,
        "id": "51c82b88-26aa-4d28-a001-62901a4e0693",
        "name": "Sticky Note35"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
          "sendBody": true,
          "bodyParameters": {
            "parameters": [
              {
                "name": "data",
                "value": "={{ $('a6').item.json.Password }}"
              },
              {
                "name": "key",
                "value": "={{ $('a4').item.json.Short_Id }}"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          1936,
          48
        ],
        "id": "4dea91da-6f21-4359-819a-5ba76b52b4da",
        "name": "a8",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tool Encript Auth Password\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1824,
          0
        ],
        "typeVersion": 1,
        "id": "3eeb2e96-178a-4157-a830-c00a2b62316b",
        "name": "Sticky Note20"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
          "sendBody": true,
          "bodyParameters": {
            "parameters": [
              {
                "name": "data",
                "value": "={{ $json.User }}"
              },
              {
                "name": "key",
                "value": "={{ $('a4').item.json.Short_Id }}"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          1680,
          48
        ],
        "id": "9c7a30c4-0353-457c-9f5a-3720621be547",
        "name": "a7",
        "notesInFlow": true
      },
      {
        "parameters": {
          "content": "### Tool Encript Auth User\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1584,
          0
        ],
        "typeVersion": 1,
        "id": "53d7bb68-0397-42e6-96c9-4baac1137911",
        "name": "Sticky Note19"
      },
      {
        "parameters": {
          "operation": "get",
          "dataTableId": {
            "__rl": true,
            "value": "PR8F3oNl3mF1UXp9",
            "mode": "list",
            "cachedResultName": "Data Auth",
            "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/PR8F3oNl3mF1UXp9"
          },
          "filters": {
            "conditions": [
              {
                "keyName": "Nama",
                "keyValue": "Api_Json"
              }
            ]
          },
          "returnAll": true
        },
        "type": "n8n-nodes-base.dataTable",
        "typeVersion": 1,
        "position": [
          1456,
          48
        ],
        "id": "1a8e812f-1b4b-43d9-8e6d-1aa8819fd6dc",
        "name": "a6"
      },
      {
        "parameters": {
          "content": "### Tabel Data Auth\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/PR8F3oNl3mF1UXp9",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1344,
          0
        ],
        "typeVersion": 1,
        "id": "2bb17462-63a9-4639-8b7e-81116e5c5ecc",
        "name": "Sticky Note18"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/3bb4e66e-e354-415c-87d8-25631fd005a5-encript-data",
          "sendBody": true,
          "bodyParameters": {
            "parameters": [
              {
                "name": "data",
                "value": "=https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/5ac5e306-4655-4f62-a225-61216757bd813?id={{ $('a1').item.json.data_web.user.id.json }}"
              },
              {
                "name": "key",
                "value": "={{ $json.Short_Id }}"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          1216,
          48
        ],
        "id": "acaa19ea-624e-495a-b8b3-c874693b70d5",
        "name": "a5",
        "notesInFlow": true
      },
      {
        "parameters": {
          "dataTableId": {
            "__rl": true,
            "value": "6W3on0nN3Gmmij5S",
            "mode": "list",
            "cachedResultName": "Data Id",
            "cachedResultUrl": "/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S"
          },
          "columns": {
            "mappingMode": "defineBelow",
            "value": {
              "Short_Id": "={{$json.data.substring(3)}}",
              "Full_Id": "={{ $json.data }}",
              "Url": "=https://distrikwania.com/css/{{ $json.data }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "id": "Short_Id",
                "displayName": "Short_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Full_Id",
                "displayName": "Full_Id",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              },
              {
                "id": "Url",
                "displayName": "Url",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "type": "string",
                "readOnly": false,
                "removed": false
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {}
        },
        "type": "n8n-nodes-base.dataTable",
        "typeVersion": 1,
        "position": [
          976,
          48
        ],
        "id": "2e2b2b9a-b339-4a91-84ae-c0e46b699692",
        "name": "a4"
      },
      {
        "parameters": {
          "content": "### Tool Encript Url\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/bkujltHTudpMwHrU",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1104,
          0
        ],
        "typeVersion": 1,
        "id": "f697c7e5-cc6b-4dd9-bcce-faa8a5a7ee71",
        "name": "Sticky Note17"
      },
      {
        "parameters": {
          "content": "### Tabel Data Id\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/projects/MsnmAoT3kpqQYaku/datatables/6W3on0nN3Gmmij5S",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          864,
          0
        ],
        "typeVersion": 1,
        "id": "03117578-c5db-4058-a307-d72677f34f35",
        "name": "Sticky Note16"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/webhook/ea1611aa-ed6e-474c-8a9c-4fd32f460241",
          "sendQuery": true,
          "queryParameters": {
            "parameters": [
              {
                "name": "File Name",
                "value": "={{ $json['Nama File'] }}"
              },
              {
                "name": "Parent Folder",
                "value": "={{ $json['Lokasi File'] }}"
              }
            ]
          },
          "sendBody": true,
          "contentType": "raw",
          "rawContentType": "=text/css; charset=utf-8",
          "body": "={{ $json['Isi File'] }}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          736,
          48
        ],
        "id": "23742c0f-b25e-4771-8580-506ccf4905c7",
        "name": "a3",
        "alwaysOutputData": false,
        "executeOnce": false,
        "notesInFlow": true
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "0e5ed211-7817-4ac8-a33a-b4f4ac4faaba",
                "name": "Nama File",
                "value": "Style.css",
                "type": "string"
              },
              {
                "id": "1df4e9d1-f6ef-41a2-87bc-f7a3faeae4e9",
                "name": "Isi File",
                "value": "=\n:root{\n    --bg:#0b1020; --panel:#0f172a; --ink:#e5e7eb; --muted:#9ca3af;\n    --accent:#22c55e; --accent-2:#38bdf8; --line:#1f2937;\n    --danger:#ef4444; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);\n    --space:clamp(14px,2.4vw,22px);\n    --modal-radius:10px;\n    --modal-bg:#111827;\n    --modal-border:rgba(148,163,184,.45);\n    --overlay:rgba(0,0,0,.72);\n}\n*{box-sizing:border-box} html,body{height:100%}\n\n/* ===== FULL BACKGROUND ===== */\nbody{\n    margin:0; color:var(--ink);\n    font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,\"Apple Color Emoji\",\"Segoe UI Emoji\";\n    background:#0a0e1a;\n    min-height:100svh;\n}\n.bg{\n    position:fixed; inset:0; z-index:-1; pointer-events:none;\n    background:\n    radial-gradient(1400px 800px at 20% -10%, #16223f 0%, transparent 60%),\n    radial-gradient(1200px 700px at 90% -20%, rgba(56,189,248,.15) 0%, transparent 60%),\n    linear-gradient(145deg,#0a0e1a,#0f1933 55%,#0a0e1a);\n    background-attachment:fixed,fixed,fixed;\n}\n\nbody,body *{min-width:0; overflow-wrap:anywhere; word-break:break-word; white-space:normal}\n.wrap{max-width:1100px;margin:40px auto;padding:0 20px}\n\n.topbar{display:flex;align-items:center;gap:16px;margin-bottom:18px}\n.brand{display:flex;align-items:center;gap:12px;min-width:0}\n/* ==== Logo responsif & konsisten (tanpa wrapper tambahan) ==== */\n.brand img.logo{\n    width: 120px; /* atau angka yang Anda mau */\n    aspect-ratio: 1 / 1;\n    object-fit: contain;\n    background:#0f172a;\n    border-radius:12px;\n    display:block;\n    /* Garis stroke di dalam */\n    box-shadow:\n    inset 0 0 0 1px rgba(148,163,184,.35), /* border tipis */\n    0 0 6px rgba(0,0,0,.35);               /* glow shadow merata */\n}\n\n.brand .title{font-weight:700;font-size:clamp(16px,2.4vw,20px)}\n.brand .sub{font-size:12px;color:var(--muted)}\n.pill{margin-left:auto;display:flex;gap:8px;align-items:center;font-size:12px;color:#cbd5e1;\n    background:linear-gradient(180deg,rgba(56,189,248,.2),rgba(34,197,94,.15));\n    border:1px solid rgba(148,163,184,.3);padding:6px 10px;border-radius:999px;flex-shrink:0;}\n\n.card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));\n    border:1px solid rgba(148,163,184,.2); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}\n.card-header{display:flex;flex-wrap:wrap;gap:14px;align-items:center;justify-content:center;\n    padding:clamp(14px,2.2vw,20px) var(--space);\n    background:radial-gradient(800px 300px at 10% -20%, rgba(56,189,248,.15), transparent 60%),\n                radial-gradient(600px 300px at 90% -30%, rgba(34,197,94,.18), transparent 55%);\n    border-bottom:1px solid rgba(148,163,184,.2)}\n.hgroup{display:flex;flex-direction:column;gap:8px;min-width:0;margin-bottom:4px;width:100%;text-align:center}\n.h1{font-size:clamp(18px,2.8vw,26px);font-weight:800;letter-spacing:.3px;margin-bottom:2px}\n.h2{font-size:13px;color:var(--muted);margin-top:2px}\n.badges{display:flex;gap:8px;flex-wrap:wrap;min-width:0;margin-top:6px}\n.badge{font-size:12px;padding:6px 10px;border-radius:999px;background:#0b1224;border:1px solid rgba(148,163,184,.26)}\n.badge.info{border-color:rgba(56,189,248,.45);background:rgba(56,189,248,.12);color:#cffafe}\n\n.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:0;min-height:360px}\n@media (max-width:960px){.grid{grid-template-columns:1fr}.side{background:transparent}.panel{border-right:none}}\n\n.panel{padding:var(--space);border-right:1px solid rgba(148,163,184,.16)} .panel:last-child{border-right:none}\n.stitle{font-size:13px;letter-spacing:.4px;text-transform:uppercase;color:#a5b4fc;font-weight:700;margin-bottom:10px}\n\n/* ===== BAR AKSI EDIT ===== */\n.editbar{display:flex;gap:10px;align-items:center;margin-bottom:12px}\n.edit-actions{display:none;gap:10px}\n.edit-mode .edit-actions{display:flex}\n\n/* ===== Data Pemohon ===== */\n.ident{\n    display:grid; grid-template-columns:160px 10px 1fr; gap:6px 10px; align-items:start; font-size:14px;\n    background:rgba(15,23,42,.55); border:1px solid rgba(148,163,184,.15); border-radius:14px; padding:10px 12px;\n}\n@media (max-width:560px){ .ident{grid-template-columns:110px 8px 1fr} }\n.lab{color:#cbd5e1} .sep{color:#475569} .val{color:#e5e7eb;font-weight:600;line-height:1.45}\n.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace}\n\n.note{margin-top:12px;font-size:12.5px;color:#a5b4fc;background:rgba(99,102,241,.1);\n    border:1px dashed rgba(99,102,241,.35);border-radius:12px;padding:10px 12px}\n\n.side{display:flex;flex-direction:column;gap:14px;padding:var(--space);\n    background:linear-gradient(180deg,rgba(2,6,23,.35),rgba(2,6,23,.15))}\n.callout{border:1px solid rgba(56,189,248,.35);background:rgba(56,189,248,.1);border-radius:14px;padding:12px 14px;font-size:13px;color:#e0f2fe}\n.actions{display:flex;flex-wrap:wrap;gap:10px}\n\n/* ===== Buttons ===== */\n.btn{appearance:none;border:none;cursor:pointer;font-weight:700;letter-spacing:.3px;\n    background:#0b1224;color:var(--ink);padding:10px 14px;border-radius:12px; border:1px solid rgba(148,163,184,.3);\n    display:inline-flex; align-items:center; gap:8px; justify-content:center;}\na.btn, a.btn:link, a.btn:visited { text-decoration:none; color:inherit; }\na.btn:hover, a.btn:focus { text-decoration:none; }\n.btn.primary,.btn.success{ background:linear-gradient(180deg,rgba(34,197,94,.95),rgba(16,185,129,.95)); border-color:rgba(16,185,129,.95); color:#052e1a !important; }\n.btn.secondary{ background:linear-gradient(180deg,rgba(56,189,248,.9),rgba(59,130,246,.9)); border-color:rgba(96,165,250,.95); color:#06293a !important; }\n.btn.ghost{background:transparent}\n.btn.danger{ background:linear-gradient(180deg,rgba(239,68,68,.95),rgba(220,38,38,.95)); border-color:rgba(220,38,38,.95); color:#fef2f2 !important; }\n.btn:active{transform:translateY(1px)}\n.btn:disabled, .btn.disabled{\n    opacity: 0.4 !important;\n    cursor: not-allowed !important;\n    pointer-events: none !important;\n    background: #1f2937 !important;\n    border-color: #374151 !important;\n    color: #6b7280 !important;\n    transform: none !important;\n}\n.btn:disabled:hover, .btn.disabled:hover{\n    background: #1f2937 !important;\n    border-color: #374151 !important;\n    color: #6b7280 !important;\n}\n\n.edit-mode .val{display:none}.edit-mode .edit-field{display:block}\n.edit-field{display:none;width:100%;background:rgba(15,23,42,.8);border:1px solid rgba(56,189,248,.4);border-radius:8px;padding:8px 10px;color:#e5e7eb;font-size:14px;font-weight:600}\n.edit-field:focus{outline:none;border-color:rgba(56,189,248,.8);box-shadow:0 0 0 2px rgba(56,189,248,.2)}\n\n.file-upload-container{background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:14px}\n.upload-progress{width:100%;height:4px;background:rgba(148,163,184,.2);border-radius:2px;overflow:hidden;margin:8px 0}\n.upload-progress-bar{height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);width:0%;transition:width .3s ease}\n\n.uploaded-files-container{background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:14px;min-height:60px}\n.no-files-message{color:#9ca3af;font-size:13px;text-align:center;font-style:italic}\n\n.uploaded-file-item{display:flex;flex-direction:column;gap:8px;padding:10px 12px;background:rgba(34,197,94,.06);\n    border:1px solid rgba(34,197,94,.25);border-radius:12px;margin-bottom:8px}\n.file-name{color:#d1fae5;font-weight:700;line-height:1.35}\n.file-meta{color:#a5b4fc;font-size:12px}\n.file-id{font-size:12px;color:#94a3b8}\n.file-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:4px}\n.file-actions .btn{padding:6px 10px;border-radius:10px}\n\n.card-footer{display:flex;gap:14px;justify-content:space-between;align-items:center;\n    padding:12px var(--space);border-top:1px solid rgba(148,163,184,.2);color:var(--muted);font-size:12px}\n\n/* ===== MODAL ===== */\n.modal-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1000;background:var(--overlay)}\n.modal{width:min(480px,92vw);border-radius:var(--modal-radius);background:var(--modal-bg);\n    border:1px solid var(--modal-border);box-shadow:0 18px 50px rgba(0,0,0,.55);padding:18px 18px}\n.modal-header{display:flex;gap:10px;align-items:center;margin-bottom:8px}\n.modal-icon{font-size:28px}\n.modal-title{font-weight:800;font-size:18px;letter-spacing:.3px}\n.modal-message{color:#cbd5e1;line-height:1.7;margin:8px 0 16px;font-size:14px}\n.modal-actions{display:flex;gap:10px;justify-content:flex-end}\n.modal .btn{border-radius:10px;padding:10px 14px}\n.modal--info{box-shadow:inset 4px 0 0 0 #38bdf8, 0 18px 50px rgba(0,0,0,.55)}\n.modal--success{box-shadow:inset 4px 0 0 0 #22c55e, 0 18px 50px rgba(0,0,0,.55)}\n.modal--confirm{box-shadow:inset 4px 0 0 0 #f59e0b, 0 18px 50px rgba(0,0,0,.55)}\n.modal--danger{box-shadow:inset 4px 0 0 0 #ef4444, 0 18px 50px rgba(0,0,0,.55)}\n\n/* ===== LOADING ===== */\n.loading-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:900;background:rgba(2,6,23,.75)}\n.loading-box{display:flex;flex-direction:column;align-items:center;gap:14px;padding:22px;border-radius:12px;border:1px solid rgba(148,163,184,.35);background:#0f172a}\n.spinner{width:52px;height:52px;border-radius:50%;border:4px solid rgba(148,163,184,.35);border-top-color:#22c55e;animation:spin 1s linear infinite}\n@keyframes spin{to{transform:rotate(360deg)}}\n.loading-text{font-size:14px;color:#e5e7eb}\n\n@media print{.side{display:none} body{background:#fff} .card{border:none;box-shadow:none} .pill,.modal-overlay,.loading-overlay{display:none!important}}",
                "type": "string"
              },
              {
                "id": "2c858bc8-bb3a-497c-bb2e-d90ffb227c40",
                "name": "Catatan File",
                "value": "=kode Css untuk HTML",
                "type": "string"
              },
              {
                "id": "03f89783-a9af-4230-86e1-3652d440711f",
                "name": "Lokasi File",
                "value": "={{ $('a1').item.json.data_web.user.id.folder }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          464,
          48
        ],
        "id": "e359f8a1-26cb-4ca5-bf7d-aabd88a681fa",
        "name": "a2",
        "notesInFlow": true
      },
      {
        "parameters": {
          "mode": "raw",
          "jsonOutput": "={{ $json.body }}",
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          208,
          48
        ],
        "id": "e3815cf6-9f23-4ff1-9f7c-f4ebcd14c0c4",
        "name": "a1",
        "notesInFlow": true
      },
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "67379661-2458-45d3-8bce-3dc149f95ca9-web-sktm-user",
          "responseMode": "responseNode",
          "options": {}
        },
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2.1,
        "position": [
          -16,
          48
        ],
        "id": "6a790a7b-8f5d-4af6-bac5-c8dcee4036af",
        "name": "a",
        "webhookId": "67379661-2458-45d3-8bce-3dc149f95ca9"
      },
      {
        "parameters": {
          "content": "### Kode CSS Web ",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          384,
          0
        ],
        "typeVersion": 1,
        "id": "edd4bf66-e146-4d76-b572-8d7ed3f54931",
        "name": "Sticky Note34"
      },
      {
        "parameters": {
          "content": "### Format Json ",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          144,
          0
        ],
        "typeVersion": 1,
        "id": "d1458bbc-3f77-423d-b338-9765ec035e30",
        "name": "Sticky Note33"
      },
      {
        "parameters": {
          "content": "### Webhook Input SKTM User\n",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -96,
          0
        ],
        "typeVersion": 1,
        "id": "0f552200-7a17-48ce-9e2d-e73747a676a7",
        "name": "Sticky Note32"
      },
      {
        "parameters": {
          "content": "### Tool Uploud Kode CSS\n\n\n\n\n\n\n\n### https://n8n-qz8tp6856ibc.bgxy.sumopod.my.id/workflow/CRuVbFdsuDvupK2i",
          "height": 192
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          624,
          0
        ],
        "typeVersion": 1,
        "id": "b0fe87bb-3af4-43f3-a94e-3f493263fd30",
        "name": "Sticky Note15"
      }
    ],
    "connections": {
      "a21": {
        "main": [
          [
            {
              "node": "a22",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a20": {
        "main": [
          [
            {
              "node": "a21",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a19": {
        "main": [
          [
            {
              "node": "a20",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a18": {
        "main": [
          [
            {
              "node": "a19",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a17": {
        "main": [
          [
            {
              "node": "a18",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a16": {
        "main": [
          [
            {
              "node": "a17",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a15": {
        "main": [
          [
            {
              "node": "a16",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a14": {
        "main": [
          [
            {
              "node": "a15",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a13": {
        "main": [
          [
            {
              "node": "a14",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a12": {
        "main": [
          [
            {
              "node": "a13",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a11": {
        "main": [
          [
            {
              "node": "a12",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a10": {
        "main": [
          [
            {
              "node": "a11",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a9": {
        "main": [
          [
            {
              "node": "a10",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a8": {
        "main": [
          [
            {
              "node": "a9",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a7": {
        "main": [
          [
            {
              "node": "a8",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a6": {
        "main": [
          [
            {
              "node": "a7",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a5": {
        "main": [
          [
            {
              "node": "a6",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a4": {
        "main": [
          [
            {
              "node": "a5",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a3": {
        "main": [
          [
            {
              "node": "a4",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a2": {
        "main": [
          [
            {
              "node": "a3",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a1": {
        "main": [
          [
            {
              "node": "a2",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "a": {
        "main": [
          [
            {
              "node": "a1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "authors": "Wania Mimika",
    "name": null,
    "description": null
  },
  "tags": []
}